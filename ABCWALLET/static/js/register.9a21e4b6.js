(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["register"],{"08d6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"register_index"}},[i("van-nav-bar",{attrs:{title:"开通"+e.brandName},on:{"click-left":function(t){return e.$router.push({name:"jfwalletAuth"})}}}),i("BankCard"),i("div",{directives:[{name:"show",rawName:"v-show",value:e.ifShowPhoneInput,expression:"ifShowPhoneInput"}],staticClass:"form-wrapper"},[i("p",{staticClass:"phone-title"},[e._v("请补充个人信息")]),i("div",{staticClass:"form-item-phone"},[i("label",{staticClass:"phone-label"},[e._v("手机号：")]),i("van-field",{staticClass:"phone-input",attrs:{placeholder:"请输入注册手机号"},model:{value:e.phone,callback:function(t){e.phone="string"===typeof t?t.trim():t},expression:"phone"}})],1)]),i("div",{staticClass:"btmSec g_container"},[i("div",{staticClass:"confirmSrc"},[i("van-checkbox",{attrs:{shape:"square"},model:{value:e.ifAcceptAgreement,callback:function(t){e.ifAcceptAgreement=t},expression:"ifAcceptAgreement"}}),i("p",[e._v(" 勾选后，点击按钮即您同意 "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.$router.push({path:"/agreement",query:{agreementSrc:a("8710")}})}}},[e._v("《注册协议》")]),e._v("、 "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.$router.push({path:"/agreement",query:{agreementSrc:a("6a5e")}})}}},[e._v("《隐私保护政策》")]),e._v("、 "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.$router.push({path:"/agreement",query:{agreementSrc:a("acc1")}})}}},[e._v("《用户授权书》")])])],1),i("van-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",loading:e.isSubmitting,"loading-text":"提交中...",disabled:e.isSubmitDisable},on:{click:e.handleSubmit}},[e._v("立即申请")])],1)],1)},n=[],r=(a("b0c0"),a("a9e3"),a("96cf"),a("89ba")),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"openWallet_bankCrd"}},[i("div",{staticClass:"card"},[i("img",{staticClass:"img_bg",attrs:{src:a("e9fa"),alt:""}}),i("div",{staticClass:"wallet-logo"},[i("img",{staticClass:"wallet-bank-logo",attrs:{src:a("8cea"),alt:""}}),i("span"),i("img",{staticClass:"wallet-merchant-logo",attrs:{src:e.merchantLogo,alt:""}})]),i("p",{staticClass:"number"},[e._v(e._s(e.number))]),i("ul",{directives:[{name:"show",rawName:"v-show",value:!e.cardNumber,expression:"!cardNumber"}],staticClass:"defaultNumber"},[i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li"),i("li")])])])},o=[],c=(a("ac1f"),a("5319"),a("469a")),u=a.n(c),l={name:"BankCard",props:{cardNumber:{type:String,default:""}},data:function(){return{merchantLogo:u.a,number:""}},watch:{cardNumber:function(e){this.number=e.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")}},mounted:function(){var e=this.$session.getProductInfo();e.brandLogo&&(this.merchantLogo=e.brandLogo),this.number=this.cardNumber.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")}},d=l,m=(a("f470"),a("2877")),h=Object(m["a"])(d,s,o,!1,null,"e5045392",null),f=h.exports,p={name:"RegisterIndex",components:{BankCard:f},data:function(){return{ifAcceptAgreement:"1"===this.$session.getRegisterAgreementState(),isSubmitting:!1,ifShowPhoneInput:!1,phone:""}},computed:{isSubmitDisable:function(){return!this.ifAcceptAgreement||!this.phone&&this.ifShowPhoneInput},brandName:function(){return this.$session.getProductInfo()["brandName"]}},watch:{ifAcceptAgreement:function(e){this.$session.setRegisterAgreementState(e?1:0)}},methods:{updatePv:function(){this.$api.customer.updatePv({merchantId:this.$session.getMerchantInfo()["merchantId"],productCode:this.$store.state.app.productCode,type:1})},checkPhoneNumber:function(){var e=this.phone;return!!(!e||/^[1][34578]\d{9}$/.test(e)&&/^[1-9]\d*$/.test(e)&&11===e.length)||(this.$notify({type:"danger",message:"手机号码不符合规范"}),!1)},handleSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.ifShowPhoneInput){e.next=6;break}if(this.checkPhoneNumber()){e.next=3;break}return e.abrupt("return");case 3:t=this.$session.getMerchantInfo(),t["registerMobile"]=this.phone,this.$session.setMerchantInfo(t);case 6:return this.isSubmitting=!0,e.next=9,this.$api.customer.customerInit({merchantCustomerId:this.$session.getMerchantInfo().merchantCustomerId});case 9:a=e.sent,a&&"200"===a.code?this.$router.push("/register/IDcardOCR"):this.$notify({type:"danger",message:a.message}),this.isSubmitting=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},beforeRouteEnter:function(e,t,a){a((function(e){if(1===Number(e.$session.getHasRegisterMobile())?(e.ifShowPhoneInput=!0,e.phone=e.$session.getMerchantInfo()["registerMobile"]):e.ifShowPhoneInput=!1,!e.$session.getPv())return e.$session.setPv(1),void e.updatePv();t.name&&e.updatePv()}))}},g=p,v=(a("367f"),Object(m["a"])(g,i,n,!1,null,"65b568f9",null));t["default"]=v.exports},"0a13":function(e,t,a){},"16ec":function(e,t,a){e.exports=a.p+"static/img/中国农业银行电子账户服务协议ABC(2018)4063.5133ed00.jpg"},"23d3":function(e){e.exports=JSON.parse('{"v":"5.5.8","fr":25,"ip":0,"op":250,"w":300,"h":300,"nm":"合成 1","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":5,"nm":"￥","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[28.49,26.815,0],"ix":2},"a":{"a":0,"k":[18.281,-12.727,0],"ix":1},"s":{"a":0,"k":[80.76,80.76,100],"ix":6}},"ao":0,"t":{"d":{"k":[{"s":{"s":36,"f":"TRENDS","t":"￥","j":0,"tr":0,"lh":43.2,"ls":0,"fc":[1,0.851,0.42]},"t":0}]},"p":{},"m":{"g":1,"a":{"a":0,"k":[0,0],"ix":2}},"a":[]},"ip":0,"op":252,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"形状图层 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[28,28,0],"ix":2},"a":{"a":0,"k":[33.887,-29.377,0],"ix":1},"s":{"a":0,"k":[72,72,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[54.745,54.745],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.976470648074,0.670588235294,0.062745098039,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[33.887,-29.377],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":252,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[51.735,28,0],"ix":2},"a":{"a":0,"k":[57.623,-29.377,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[54.745,54.745],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.850980451995,0.419607873056,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[33.887,-29.377],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":252,"st":0,"bm":0}]}],"fonts":{"list":[{"fName":"TRENDS","fFamily":"ShiShangZhongHeiJianTi","fStyle":"Regular","ascent":74.1226196289062},{"fName":"PingFangSC-Regular","fFamily":"PingFang SC","fStyle":"Regular","ascent":72.7996826171875}]},"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"预合成 1","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[23.06,129.023,0],"to":[42.333,0,0],"ti":[-42.333,0,0]},{"t":250,"s":[277.06,129.023,0]}],"ix":2},"a":{"a":0,"k":[28,28,0],"ix":1},"s":{"a":0,"k":[60.929,60.929,100],"ix":6}},"ao":0,"w":56,"h":56,"ip":0,"op":375,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":5,"nm":"开通中...","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[112.192,182,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"t":{"d":{"k":[{"s":{"s":20,"f":"PingFangSC-Regular","t":"开通中...","j":0,"tr":0,"lh":24,"ls":0,"fc":[0.2,0.2,0.2]},"t":0}]},"p":{},"m":{"g":1,"a":{"a":0,"k":[0,0],"ix":2}},"a":[]},"ip":0,"op":378,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"形状图层 5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[20.929,129,0],"ix":2},"a":{"a":0,"k":[-68.144,6,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":0,"s":[0,160,100]},{"t":250,"s":[160,160,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[160.982,0.213],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":20,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.850980451995,0.419607873056,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[12.241,6.106],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":625,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"形状图层 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[20.929,129,0],"ix":2},"a":{"a":0,"k":[-68.144,6,0],"ix":1},"s":{"a":0,"k":[160,160,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[160.982,0.213],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":20,"ix":4},"nm":"矩形路径 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"st","c":{"a":0,"k":[0.89928002451,0.89928002451,0.89928002451,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[12.241,6.106],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"矩形 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":378,"st":0,"bm":0}],"markers":[],"chars":[{"ch":"￥","size":36,"style":"Regular","w":100,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[74.951,-24.609],[74.951,-37.402],[58.74,-37.451],[82.227,-71.338],[66.162,-71.338],[50.098,-47.51],[32.031,-71.143],[15.967,-71.143],[40.283,-37.451],[24.219,-37.402],[24.219,-24.609],[42.334,-24.609],[42.334,-19.385],[24.219,-19.385],[24.219,-6.592],[42.334,-6.592],[42.334,8.691],[56.641,8.789],[56.641,-6.592],[74.805,-6.543],[74.756,-19.385],[56.641,-19.385],[56.641,-24.609]],"c":true},"ix":2},"nm":"￥","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"￥","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"ShiShangZhongHeiJianTi"},{"ch":"开","size":20,"style":"Regular","w":100,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,-1.309],[0,0],[0,0],[0,0],[2.115,-5.841],[8.157,-4.633],[0,0],[-3.827,8.459],[-0.906,10.373],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,1.007],[0,0],[0,0],[0,0],[-0.806,8.057],[-3.223,7.654],[0,0],[8.862,-4.633],[3.021,-6.848],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[11.279,-76.236],[11.279,-69.186],[29.608,-69.186],[29.608,-46.024],[29.507,-42.499],[5.841,-42.499],[5.841,-35.55],[29.105,-35.55],[24.774,-14.804],[7.654,3.625],[11.581,9.869],[30.615,-9.769],[36.456,-35.55],[65.561,-35.55],[65.561,9.064],[72.913,9.064],[72.913,-35.55],[94.968,-35.55],[94.968,-42.499],[72.913,-42.499],[72.913,-69.186],[89.731,-69.186],[89.731,-76.236]],"c":true},"ix":2},"nm":"开","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,1.208]],"o":[[0,0],[0,0],[0,0],[0,-1.108],[0,0]],"v":[[37.061,-69.186],[65.561,-69.186],[65.561,-42.499],[36.96,-42.499],[37.061,-46.024]],"c":true},"ix":2},"nm":"开","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"开","np":5,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"PingFang SC"},{"ch":"通","size":20,"style":"Regular","w":100,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[6.949,5.237],[0,0],[-4.23,-5.035],[0,0]],"o":[[0,0],[7.352,5.64],[0,0],[-4.733,-5.237]],"v":[[12.689,-80.667],[7.755,-75.934],[25.076,-59.921],[30.212,-64.957]],"c":true},"ix":2},"nm":"通","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-5.539,0],[0,0],[0,0],[4.834,-0.101],[4.633,0],[5.338,0.101],[3.223,1.41],[2.417,2.921],[0.806,0.604],[0,0],[0,0],[0,0],[0,0],[0,0],[5.338,-8.459],[0,0],[-2.417,0],[-1.41,-1.712],[-4.028,-1.208],[-6.546,-0.101]],"o":[[0,0],[0,0],[-2.618,0.201],[-4.935,0.101],[-7.956,0],[-6.042,-0.201],[-2.82,-1.309],[-0.906,-1.007],[0,0],[0,0],[0,0],[0,0],[0,0],[-4.129,1.813],[0,0],[5.539,-9.265],[1.208,0],[3.122,3.625],[4.028,1.108],[6.445,0.101]],"v":[[71.603,8.258],[94.464,8.258],[96.176,1.007],[84.998,1.41],[70.596,1.611],[50.656,1.41],[36.859,-1.007],[29.004,-7.352],[26.486,-9.668],[26.486,-47.333],[5.438,-47.333],[5.438,-40.686],[19.739,-40.686],[19.739,-10.071],[5.539,5.338],[10.977,10.272],[22.961,-3.625],[26.889,-1.108],[37.665,6.244],[53.577,8.057]],"c":true},"ix":2},"nm":"通","mn":"ADBE Vector Shape - Group","hd":false},{"ind":2,"ty":"sh","ix":3,"ks":{"a":0,"k":{"i":[[4.23,2.518],[0,0],[-3.827,-2.719],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.417,0],[0,0],[0,0],[0,0],[0,5.136],[0,0],[0,0],[0,0],[-6.042,5.237],[0,0],[0,0],[0,0],[0,0],[5.237,-2.719]],"o":[[0,0],[4.935,2.618],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,2.216],[0,0],[0,0],[0,0],[5.64,0],[0,0],[0,0],[0,0],[7.05,-3.827],[0,0],[0,0],[0,0],[0,0],[-4.431,3.424],[-3.424,-2.518]],"v":[[53.577,-70.999],[49.146,-66.669],[62.338,-58.612],[37.161,-58.612],[37.161,-5.035],[44.009,-5.035],[44.009,-22.659],[60.828,-22.659],[60.828,-5.338],[67.575,-5.338],[67.575,-22.659],[84.494,-22.659],[84.494,-15.106],[80.869,-11.682],[72.913,-11.984],[74.524,-5.841],[82.883,-5.841],[91.342,-13.596],[91.342,-58.612],[71.402,-58.612],[69.791,-59.921],[89.429,-73.517],[89.429,-78.754],[34.946,-78.754],[34.946,-72.61],[79.66,-72.61],[65.158,-63.446]],"c":true},"ix":2},"nm":"通","mn":"ADBE Vector Shape - Group","hd":false},{"ind":3,"ty":"sh","ix":4,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[44.009,-37.463],[60.828,-37.463],[60.828,-28.601],[44.009,-28.601]],"c":true},"ix":2},"nm":"通","mn":"ADBE Vector Shape - Group","hd":false},{"ind":4,"ty":"sh","ix":5,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[67.575,-37.463],[84.494,-37.463],[84.494,-28.601],[67.575,-28.601]],"c":true},"ix":2},"nm":"通","mn":"ADBE Vector Shape - Group","hd":false},{"ind":5,"ty":"sh","ix":6,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[84.494,-43.506],[67.575,-43.506],[67.575,-52.57],[84.494,-52.57]],"c":true},"ix":2},"nm":"通","mn":"ADBE Vector Shape - Group","hd":false},{"ind":6,"ty":"sh","ix":7,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[60.828,-43.506],[44.009,-43.506],[44.009,-52.57],[60.828,-52.57]],"c":true},"ix":2},"nm":"通","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"通","np":10,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"PingFang SC"},{"ch":"中","size":20,"style":"Regular","w":100,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[46.628,-82.681],[46.628,-64.554],[10.574,-64.554],[10.574,-17.221],[17.825,-17.221],[17.825,-23.566],[46.628,-23.566],[46.628,10.776],[54.08,10.776],[54.08,-23.566],[82.983,-23.566],[82.983,-17.221],[90.234,-17.221],[90.234,-64.554],[54.08,-64.554],[54.08,-82.681]],"c":true},"ix":2},"nm":"中","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[17.825,-30.615],[17.825,-57.504],[46.628,-57.504],[46.628,-30.615]],"c":true},"ix":2},"nm":"中","mn":"ADBE Vector Shape - Group","hd":false},{"ind":2,"ty":"sh","ix":3,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[54.08,-30.615],[54.08,-57.504],[82.983,-57.504],[82.983,-30.615]],"c":true},"ix":2},"nm":"中","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"中","np":6,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"PingFang SC"},{"ch":".","size":20,"style":"Regular","w":26.4,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[1.611,0],[1.108,-1.208],[0,-1.813],[-1.208,-1.208],[-1.813,0],[-1.208,1.208],[0,1.712],[1.208,1.208]],"o":[[-1.813,0],[-1.208,1.208],[0,1.712],[1.108,1.208],[1.611,0],[1.208,-1.208],[0,-1.813],[-1.208,-1.208]],"v":[[13.293,-11.984],[8.963,-10.172],[7.15,-5.74],[8.963,-1.41],[13.293,0.403],[17.624,-1.41],[19.437,-5.74],[17.624,-10.172]],"c":true},"ix":2},"nm":".","mn":"ADBE Vector Shape - Group","hd":false}],"nm":".","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"PingFang SC"}]}')},2581:function(e,t,a){e.exports=a.p+"static/img/icon_safe.aeb42523.svg"},"356e":function(e,t,a){"use strict";var i=a("e206"),n=a.n(i);n.a},"367f":function(e,t,a){"use strict";var i=a("a2e7"),n=a.n(i);n.a},"3e36":function(e,t,a){},"408a":function(e,t,a){var i=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},"469a":function(e,t,a){e.exports=a.p+"static/img/merchant_logo.380f0d26.png"},4914:function(e,t,a){},"542d":function(e,t,a){"use strict";var i=a("23e7"),n=a("d039"),r=a("408a"),s=1..toPrecision,o=n((function(){return"1"!==s.call(1,void 0)}))||!n((function(){s.call({})}));i({target:"Number",proto:!0,forced:o},{toPrecision:function(e){return void 0===e?s.call(r(this)):s.call(r(this),e)}})},5713:function(e,t,a){e.exports=a.p+"static/img/id_idCard_em.d42c8b77.png"},"678e":function(e,t,a){e.exports=a.p+"static/img/个人人民币银行结算账户管理协议ABC(2019)7029.8299070f.jpg"},"6a5e":function(e,t,a){e.exports=a.p+"static/img/超级大脑隐私保护政策.afeb6d82.jpg"},7746:function(e,t,a){},"7ba7":function(e,t,a){"use strict";var i=a("f34e"),n=a.n(i);n.a},8580:function(e,t,a){e.exports=a.p+"static/img/idCard_nationalEmblem.49d9115d.svg"},8710:function(e,t,a){e.exports=a.p+"static/img/超级大脑注册协议.5563d44d.jpg"},"8cd8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"openWallet_index"}},[a("van-nav-bar",{attrs:{title:e.isChangeBindCard?"更换绑定卡":"开通"+e.brandName,"left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isChangeBindCard,expression:"!isChangeBindCard"}],staticClass:"currentProgress",attrs:{slot:"right"},slot:"right"},[a("span",{staticClass:"currentStep"},[e._v("3")]),a("span",{staticClass:"totalStep"},[e._v("/3")])])]),a("StepList",{directives:[{name:"show",rawName:"v-show",value:!e.isChangeBindCard,expression:"!isChangeBindCard"}],attrs:{percentage:100}}),a("div",{staticClass:"icon_wrap"},[a("lottie",{attrs:{options:e.defaultOptions},on:{animCreated:e.handleAnimation}})],1)],1)},n=[],r=(a("0d03"),a("96cf"),a("89ba")),s=a("23d3"),o=a.t(s,2),c={name:"WalletOpening",props:{isSMSCorrect:{type:Boolean,default:!1}},data:function(){return{animationSpeed:1,anim:{},defaultOptions:{animationData:o},startDate:new Date,endDate:"",delayTime:0}},computed:{ifSubmit:{get:function(){return this.isSMSCorrect},set:function(e){this.$emit("update:isSMSCorrect",e)}},isChangeBindCard:function(){return this.$route.query.changeBindCard},brandName:function(){return this.$session.getProductInfo()["brandName"]}},watch:{ifSubmit:function(e){e&&(this.isChangeBindCard?this.changeCard():this.openWallet())}},methods:{handleAnimation:function(e){this.anim=e},calcDelayTime:function(){this.endDate=new Date;var e=this.endDate.getTime()-this.startDate.getTime();this.delayTime=e>3500?0:3500-e},changeCard:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$session.getBankCardForm(),a=this.$app.getBankBasicInfo(t.bank),e.next=4,this.$api.abc.bankModify({bankUnionNumber:a.bankUnionNumber,customerBankAccountId:this.$session.getCustomerAccountId(),mobile:t.cardPhone,msgVerNum:t.msgVerNum,msgVerLog:t.msgVerLog,newBankCode:t.bank,newBankChinaName:t.bankName,newBankNumber:t.bankCardNo});case 4:i=e.sent,this.calcDelayTime(),n=this,setTimeout((function(){"403"===i.code||"413"===i.code?n.ifSubmit=!1:i&&"200"===i.code?(n.$router.push({path:"/success",query:{name:"更换绑定卡",result:"申请成功",detail:"绑定卡更换申请成功，申请结果请留意银行短信通知。",routeName:"homeIndex",buttonText:"返回首页"}}),n.$session.clearSessionAfterOpenWallet()):n.$router.push({path:"/failure",query:{name:"更换绑定卡",result:"申请失败",detail:"失败原因："+i.message,routeName:"homeIndex",buttonText:"返回首页"}})}),this.delayTime);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openWallet:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$session.getIDcardForm(),a=this.$session.getBankCardForm(),i=this.$session.getCustomerInfo(),n=i.customerId,e.next=5,this.$api.register.openWallet({accountBank:"ABC",bankType:a.bankType,customerId:n,idInvalidTime:t.idInvalidTime,idStartTime:t.idStartTime,identFileId:t.imgIDFrontId+"|"+t.imgIDBackId,msgVerNum:a.msgVerNum,msgVerLog:a.msgVerLog,personBankId:a.personBankId,reqRefTrace:a.reqRefTrace,sex:t.sex});case 5:r=e.sent,this.calcDelayTime(),s=this,setTimeout((function(){if("403"===r.code||"413"===r.code)s.ifSubmit=!1;else if(r&&r.data){var e=r.data[0]?r.data[0]:{};s.$session.setCustomerAccountId(e.bankAccountCode),s.$router.push({path:"/success",query:{name:"开通"+s.brandName,result:"开通成功",detail:"恭喜您，您已开立农行电子账户<br/> 账户号："+e.bankAccountCode,routeName:"homeIndex",buttonText:"前往首页"}}),s.$session.clearSessionAfterOpenWallet()}else s.$router.push({path:"/failure",query:{name:"开通"+s.brandName,result:"开通失败",detail:"失败原因："+r.message,routeName:"registerBankCardOCR"}})}),this.delayTime);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},u=c,l=(a("7ba7"),a("2877")),d=Object(l["a"])(u,i,n,!1,null,"d13d0af6",null);t["default"]=d.exports},"8cea":function(e,t,a){e.exports=a.p+"static/img/wallet_bank.5fa83ec0.svg"},"98f6":function(e,t,a){e.exports=a.p+"static/img/idCard_face.5634653b.svg"},"9edd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"registerIDcardOCR_index"}},[i("van-nav-bar",{attrs:{title:"实名认证","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}},[i("div",{staticClass:"currentProgress",attrs:{slot:"right"},slot:"right"},[i("span",{staticClass:"currentStep"},[e._v("1")]),i("span",{staticClass:"totalStep"},[e._v("/3")])])]),i("StepList",{attrs:{percentage:100/3}}),i("div",{staticClass:"titleContent"},[i("div",{staticClass:"g_container"},[i("TitleSec",{attrs:{"title-text":"上传身份证照片","desc-text":"本操作将严格保护您的隐私安全，请放心操作"}})],1)]),i("div",{staticClass:"mainContent"},[i("div",{staticClass:"g_container"},[i("van-row",{staticClass:"OCRsec"},[i("van-col",{attrs:{span:"12"}},[i("div",{staticClass:"id_face item"},[i("cameras-albums",{attrs:{fileInputID:"id_face","click-image-src":a("98f6"),"click-text":"点击上传人像面"},on:{clickSample:e.IDcardFrontSample,setData:e.setImgIDFront}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.$session.getIDcardOCRAgreementState(),expression:"!$session.getIDcardOCRAgreementState()"}],staticClass:"clickMarsk",on:{click:function(t){return e.handleClickMarsk("front")}}})],1)]),i("van-col",{attrs:{span:"12"}},[i("div",{staticClass:"id_nationalEmblem item"},[i("cameras-albums",{attrs:{fileInputID:"id_nationalEmblem","click-image-src":a("8580"),"click-text":"点击上传国徽面"},on:{clickSample:e.IDcardBackSample,setData:e.setImgIDBack}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.$session.getIDcardOCRAgreementState(),expression:"!$session.getIDcardOCRAgreementState()"}],staticClass:"clickMarsk",on:{click:function(t){return e.handleClickMarsk("back")}}})],1)])],1),i("ResultForm",{directives:[{name:"show",rawName:"v-show",value:e.ifShowResultForm,expression:"ifShowResultForm"}],attrs:{"ocr-result":e.OCRresult}}),i("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.ifShowResultForm,expression:"!ifShowResultForm"},{name:"waves",rawName:"v-waves"}],staticClass:"btn_submitOCR",attrs:{type:"primary",disabled:e.isSubmitDisable},on:{click:e.nextStep}},[e._v("下一步")])],1)]),i("van-popup",{staticClass:"IDcardPopup",attrs:{position:"bottom"},model:{value:e.showIDfrontPopup,callback:function(t){e.showIDfrontPopup=t},expression:"showIDfrontPopup"}},[i("h3",[e._v("照片示例")]),i("img",{attrs:{src:a("cb7b"),alt:""}}),i("ul",[i("li",[e._v("拍摄时请将证件横向平放，且手机横向握持;")]),i("li",[e._v("请确保身份证全图边框完整，照片内容清晰；")]),i("li",[e._v("若过于模糊/反光/太暗/缺角会导致识别失败；")])]),i("van-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(t){e.showIDfrontPopup=!1}}},[e._v("我知道了")])],1),i("van-popup",{staticClass:"IDcardPopup",attrs:{position:"bottom"},model:{value:e.showIDbackPopup,callback:function(t){e.showIDbackPopup=t},expression:"showIDbackPopup"}},[i("h3",[e._v("照片示例")]),i("img",{attrs:{src:a("5713"),alt:""}}),i("ul",[i("li",[e._v("拍摄时请将证件横向平放，且手机横向握持;")]),i("li",[e._v("请确保身份证全图边框完整，照片内容清晰；")]),i("li",[e._v("若过于模糊/反光/太暗/缺角会导致识别失败；")])]),i("van-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(t){e.showIDbackPopup=!1}}},[e._v("我知道了")])],1),i("VanLoading",{attrs:{"if-show-loading":e.ifShowLoading},on:{"update:ifShowLoading":function(t){e.ifShowLoading=t},"update:if-show-loading":function(t){e.ifShowLoading=t}}}),i("VanDialog",{attrs:{"if-show-dialog":e.ifShowDialog},on:{"update:ifShowDialog":function(t){e.ifShowDialog=t},"update:if-show-dialog":function(t){e.ifShowDialog=t},confirm:e.handleDialogConfirm}},[e._v(" 您上传的身份证正反面照片仅用作 "),i("br"),e._v("本业务开通，请您仔细阅读并同意 "),i("br"),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.$router.push({path:"/agreement",query:{agreementSrc:a("cc65")}})}}},[e._v("《个人信息授权书》")])])],1)},n=[],r=(a("b0c0"),a("96cf"),a("89ba")),s=a("1157"),o=a.n(s),c=a("ad66"),u=a("ec40"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"registerIDcardOCR_resultForm"}},[a("van-field",{attrs:{"error-message":e.formErrMsg.name,label:"姓名",placeholder:"请输入姓名"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),a("van-field",{attrs:{"error-message":e.formErrMsg.idNumber,label:"身份号码",maxlength:"18",placeholder:"请填写身份号码"},model:{value:e.formData.idNumber,callback:function(t){e.$set(e.formData,"idNumber",t)},expression:"formData.idNumber"}}),a("div",{staticClass:"validDate"},[a("van-field",{staticClass:"idStartTime",attrs:{"error-message":e.formErrMsg.idStartTime,label:"证件有效期",placeholder:"起始日期"},on:{focus:function(t){return e.handleChooseDate(1)}},model:{value:e.formData.idStartTime,callback:function(t){e.$set(e.formData,"idStartTime",t)},expression:"formData.idStartTime"}}),a("div",{staticClass:"split"},[e._v("-")]),a("van-field",{staticClass:"idInvalidTime",attrs:{"error-message":e.formErrMsg.idInvalidTime,placeholder:"结束日期"},on:{focus:function(t){return e.handleChooseDate(2)}},model:{value:e.formData.idInvalidTime,callback:function(t){e.$set(e.formData,"idInvalidTime",t)},expression:"formData.idInvalidTime"}})],1),a("van-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"btn_submit",attrs:{type:"primary",disabled:e.isSubmitDisable},on:{click:e.nextStep}},[e._v("下一步")]),a("van-popup",{attrs:{position:"bottom"},model:{value:e.ifShowDatetimePicker,callback:function(t){e.ifShowDatetimePicker=t},expression:"ifShowDatetimePicker"}},[a("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.handleConfirmDatetimePicker,cancel:function(t){e.ifShowDatetimePicker=!1}},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),a("VanLoading",{attrs:{"if-show-loading":e.ifShowLoading},on:{"update:ifShowLoading":function(t){e.ifShowLoading=t},"update:if-show-loading":function(t){e.ifShowLoading=t}}})],1)},d=[],m=(a("0d03"),a("a9e3"),a("ac1f"),a("5319"),a("1276"),{name:"ResultForm",props:{ocrResult:{type:Object,default:function(){return{}}}},data:function(){return{isSubmitDisable:!0,ifShowDatetimePicker:!1,ifShowLoading:!1,curSec:null,currentDate:new Date,maxDate:"",minDate:"",formData:{name:"",idNumber:"",idStartTime:"",idInvalidTime:""},formErrMsg:{},rules:{name:[{required:!0,message:"姓名不能为空"}],idNumber:[{required:!0,message:"身份号码不能为空"}],idStartTime:[{required:!0,message:"必填"}],idInvalidTime:[{required:!0,message:"必填"}]}}},watch:{formData:{handler:function(e){if(e.idStartTime&&e.idInvalidTime&&Number(e.idStartTime.replace(/\./g,""))>Number(e.idInvalidTime.replace(/\./g,""))){var t=e.idStartTime;e.idStartTime=e.idInvalidTime,e.idInvalidTime=t}e.name&&e.idNumber&&e.idStartTime&&e.idInvalidTime&&this.validator.valid?this.isSubmitDisable=!1:this.isSubmitDisable=!0},deep:!0},ocrResult:function(e){if(e){var t=e.validDate?e.validDate.split("-"):[];this.formData.name=e.name,this.formData.idNumber=e.idNumber,this.formData.idStartTime=t[0],this.formData.idInvalidTime=t[1]}}},created:function(){this.initForm()},mounted:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth(),i=e.getDate();this.minDate=new Date(t-30,a,i),this.maxDate=new Date(t+30,a,i)},methods:{initForm:function(){this.validator=this.$validate({rules:this.rules,data:this.formData}),this.formData=this.validator.Data,this.formErrMsg=this.validator.ErrMsg},handleChooseDate:function(e){this.curSec=e,this.ifShowDatetimePicker=!0},handleConfirmDatetimePicker:function(e){var t=e.getFullYear(),a=e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1),i=e.getDate()>9?e.getDate():"0"+e.getDate(),n=t+"."+a+"."+i;2===this.curSec?this.formData.idInvalidTime=n:this.formData.idStartTime=n,this.ifShowDatetimePicker=!1},gotoBankCardOCR:function(){var e=JSON.parse(JSON.stringify(this.formData));e.idStartTime=e.idStartTime.replace(/\./g,""),e.idInvalidTime=e.idInvalidTime.replace(/\./g,""),e.sex=this.$lib.analyzeIDCard(e.idNumber).sex,e.age=this.$lib.analyzeIDCard(e.idNumber).age,this.$session.setIDcardForm(Object.assign(this.ocrResult,e)),this.$router.push("/register/bankCardOCR")},nextStep:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ifShowLoading=!0,t=this.$session.getMerchantInfo(),e.next=4,this.$api.register.walletCheck({bank:"ABC",registerMobile:t.registerMobile,idNumber:this.formData.idNumber,merchantCustomerId:t.merchantCustomerId});case 4:a=e.sent,a&&"200"===a.code?a.data?(this.$session.setCustomerAccountId(a.data[0].bankAccountCode),this.$router.push("/home")):this.gotoBankCardOCR():a&&"604"===a.code?this.gotoBankCardOCR():a&&"422"===a.code?this.gotoBankCardOCR():this.$notify({type:"danger",message:a.message}),this.ifShowLoading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),h=m,f=(a("af96"),a("2877")),p=Object(f["a"])(h,l,d,!1,null,"3b6115a6",null),g=p.exports,v={name:"RegisterIDcardOCRIndex",components:{TitleSec:c["a"],CamerasAlbums:u["a"],ResultForm:g},data:function(){return{showIDfrontPopup:!1,showIDbackPopup:!1,ifShowResultForm:!1,imgIDFront:"",imgIDBack:"",OCRresult:{},ifShowLoading:!1,ifShowDialog:!1,nextClick:""}},computed:{isSubmitDisable:function(){return""===this.imgIDFront||""===this.imgIDBack}},methods:{handleClickMarsk:function(e){this.nextClick=e,this.ifShowDialog=!0},handleDialogConfirm:function(){this.$session.setIDcardOCRAgreementState(1),"front"===this.nextClick?o()("#id_face").click():"back"===this.nextClick&&o()("#id_nationalEmblem").click()},updateOCRresult:function(){var e=JSON.stringify(this.OCRresult);this.OCRresult={},this.OCRresult=JSON.parse(e)},IDcardOCR:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ifShowLoading=!0,e.next=3,this.$api.kuangshi.IDcardOCR({flag:t,imageBase64:t?this.imgIDBack.src:this.imgIDFront.src,legality:0});case 3:a=e.sent,a&&"200"===a.code?(this.OCRresult=Object.assign(this.OCRresult,a.data[0]),this.updateOCRresult()):this.$notify({type:"danger",message:"身份认证失败！"}),this.ifShowLoading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),IDcardFrontSample:function(){this.showIDfrontPopup=!0},IDcardBackSample:function(){this.showIDbackPopup=!0},setImgIDFront:function(e){this.imgIDFront=e,this.IDcardOCR(0)},setImgIDBack:function(e){this.imgIDBack=e,this.IDcardOCR(1)},nextStep:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ifShowLoading=!0,e.next=3,this.$api.abc.uploadIDcard({cnName:this.OCRresult.name,diDi:this.OCRresult.idNumber,pic:this.$lib.spiltBase64(this.imgIDFront.src),picName:this.imgIDFront.name});case 3:if(t=e.sent,!t||"200"!==t.code){e.next=8;break}this.OCRresult.imgIDFrontId=t.data[0].fileId,e.next=11;break;case 8:return this.$notify({type:"danger",message:t.message}),this.ifShowLoading=!1,e.abrupt("return",!1);case 11:return e.next=13,this.$api.abc.uploadIDcard({cnName:this.OCRresult.name,diDi:this.OCRresult.idNumber,pic:this.$lib.spiltBase64(this.imgIDBack.src),picName:this.imgIDFront.name});case 13:if(a=e.sent,!a||"200"!==a.code){e.next=18;break}this.OCRresult.imgIDBackId=a.data[0].fileId,e.next=21;break;case 18:return this.$notify({type:"danger",message:a.message}),this.ifShowLoading=!1,e.abrupt("return",!1);case 21:this.ifShowResultForm=!0,this.ifShowLoading=!1;case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},k=v,b=(a("f518"),Object(f["a"])(k,i,n,!1,null,"1f5d66ee",null));t["default"]=b.exports},a2e7:function(e,t,a){},a434:function(e,t,a){"use strict";var i=a("23e7"),n=a("23cb"),r=a("a691"),s=a("50c4"),o=a("7b0b"),c=a("65f0"),u=a("8418"),l=a("1dde"),d=Math.max,m=Math.min,h=9007199254740991,f="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!l("splice")},{splice:function(e,t){var a,i,l,p,g,v,k=o(this),b=s(k.length),w=n(e,b),C=arguments.length;if(0===C?a=i=0:1===C?(a=0,i=b-w):(a=C-2,i=m(d(r(t),0),b-w)),b+a-i>h)throw TypeError(f);for(l=c(k,i),p=0;p<i;p++)g=w+p,g in k&&u(l,p,k[g]);if(l.length=i,a<i){for(p=w;p<b-i;p++)g=p+i,v=p+a,g in k?k[v]=k[g]:delete k[v];for(p=b;p>b-i+a;p--)delete k[p-1]}else if(a>i)for(p=b-i;p>w;p--)g=p+i-1,v=p+a-1,g in k?k[v]=k[g]:delete k[v];for(p=0;p<a;p++)k[p+w]=arguments[p+2];return k.length=b-i+a,l}})},acc1:function(e,t,a){e.exports=a.p+"static/img/用户授权书.696e0da8.jpg"},ad66:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"TitleSec"}},[i("h1",[e._v(e._s(e.titleText))]),i("p",{staticClass:"desc"},[i("img",{attrs:{src:a("2581"),alt:""}}),e._v(" "+e._s(e.descText)+" ")])])},n=[],r={name:"TitleSec",props:{titleText:{type:String,default:"标题文本"},descText:{type:String,default:"描述文本"}}},s=r,o=(a("f2f6"),a("2877")),c=Object(o["a"])(s,i,n,!1,null,"3e0d9c5c",null);t["a"]=c.exports},af96:function(e,t,a){"use strict";var i=a("0a13"),n=a.n(i);n.a},b4f2:function(e,t,a){},ba9f:function(e,t,a){e.exports=a("c229")},baa5:function(e,t,a){var i=a("23e7"),n=a("e58c");i({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},c08c:function(e,t,a){},c229:function(e,t,a){"use strict";var i,n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s){"object"===r(t)&&"undefined"!=typeof e?e.exports=s():(i=s,n="function"===typeof i?i.call(t,a,t,e):i,void 0===n||(e.exports=n))}((function(){var e={};function t(e){return["image/png","image/jpeg","image/gif"].some((function(t){return t===e}))}return e.urltoImage=function(e){return new Promise((function(t,a){var i=new Image;i.onload=function(){return t(i)},i.onerror=function(){return a(new Error("urltoImage(): Image failed to load, please check the image URL"))},i.src=e}))},e.urltoBlob=function(e){return fetch(e).then((function(e){return e.blob()}))},e.imagetoCanvas=async function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElement("canvas"),i=a.getContext("2d"),n=void 0,r=void 0;for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Number(t[s]));if(t.scale){var o=t.scale>0&&t.scale<10?t.scale:1;r=e.width*o,n=e.height*o}else r=t.width||t.height*e.width/e.height||e.width,n=t.height||t.width*e.height/e.width||e.height;switch([5,6,7,8].some((function(e){return e===t.orientation}))?(a.height=r,a.width=n):(a.height=n,a.width=r),t.orientation){case 3:i.rotate(180*Math.PI/180),i.drawImage(e,-a.width,-a.height,a.width,a.height);break;case 6:i.rotate(90*Math.PI/180),i.drawImage(e,0,-a.width,a.height,a.width);break;case 8:i.rotate(270*Math.PI/180),i.drawImage(e,-a.height,0,a.height,a.width);break;case 2:i.translate(a.width,0),i.scale(-1,1),i.drawImage(e,0,0,a.width,a.height);break;case 4:i.translate(a.width,0),i.scale(-1,1),i.rotate(180*Math.PI/180),i.drawImage(e,-a.width,-a.height,a.width,a.height);break;case 5:i.translate(a.width,0),i.scale(-1,1),i.rotate(90*Math.PI/180),i.drawImage(e,0,-a.width,a.height,a.width);break;case 7:i.translate(a.width,0),i.scale(-1,1),i.rotate(270*Math.PI/180),i.drawImage(e,-a.height,0,a.height,a.width);break;default:i.drawImage(e,0,0,a.width,a.height)}return a},e.canvastoFile=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg";return new Promise((function(i){return e.toBlob((function(e){return i(e)}),a,t)}))},e.canvastoDataURL=async function(e,a,i){return t(i)||(i="image/jpeg"),e.toDataURL(i,a)},e.filetoDataURL=function(e){return new Promise((function(t){var a=new FileReader;a.onloadend=function(e){return t(e.target.result)},a.readAsDataURL(e)}))},e.dataURLtoImage=function(e){return new Promise((function(t,a){var i=new Image;i.onload=function(){return t(i)},i.onerror=function(){return a(new Error("dataURLtoImage(): dataURL is illegal"))},i.src=e}))},e.dataURLtoFile=async function(e,a){for(var i=e.split(","),n=i[0].match(/:(.*?);/)[1],r=atob(i[1]),s=r.length,o=new Uint8Array(s);s--;)o[s]=r.charCodeAt(s);return t(a)&&(n=a),new Blob([o],{type:n})},e.downloadFile=function(e,t){var a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.download=t||Date.now().toString(36),document.body.appendChild(a);var i=document.createEvent("MouseEvents");i.initEvent("click",!1,!1),a.dispatchEvent(i),document.body.removeChild(a)},e.compress=async function(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(a instanceof Blob))throw new Error("compress(): First arg must be a Blob object or a File object.");if("object"!==(void 0===i?"undefined":r(i))&&(i=Object.assign({quality:i})),i.quality=Number(i.quality),Number.isNaN(i.quality))return a;var n=await e.filetoDataURL(a),s=n.split(",")[0].match(/:(.*?);/)[1],o="image/jpeg";t(i.type)&&(o=i.type,s=i.type);var c=await e.dataURLtoImage(n),u=await e.imagetoCanvas(c,Object.assign({},i)),l=await e.canvastoDataURL(u,i.quality,o);return await e.dataURLtoFile(l,s)},e.compressAccurately=async function(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(a instanceof Blob))throw new Error("compressAccurately(): First arg must be a Blob object or a File object.");if("object"!==(void 0===i?"undefined":r(i))&&(i=Object.assign({size:i})),i.size=Number(i.size),Number.isNaN(i.size))return a;if(1024*i.size>a.size)return a;i.accuracy=Number(i.accuracy),(!i.accuracy||i.accuracy<.8||i.accuracy>.99)&&(i.accuracy=.95);var n=i.size*(2-i.accuracy)*1024,s=1024*i.size,o=i.size*i.accuracy*1024,c=await e.filetoDataURL(a),u=c.split(",")[0].match(/:(.*?);/)[1],l="image/jpeg";t(i.type)&&(l=i.type,u=i.type);for(var d=await e.dataURLtoImage(c),m=await e.imagetoCanvas(d,Object.assign({},i)),h=.5,f=void 0,p=[null,null],g=1;g<=7;g++){var v=.75*(f=await e.canvastoDataURL(m,h,l)).length;if(7===g){(n<v||o>v)&&(f=[f].concat(p).filter((function(e){return e})).sort((function(e,t){return Math.abs(.75*e.length-s)-Math.abs(.75*t.length-s)}))[0]);break}if(n<v)p[1]=f,h-=.5**(g+1);else{if(!(o>v))break;p[0]=f,h+=.5**(g+1)}}var k=await e.dataURLtoFile(f,u);return k.size>a.size?a:k},e}))},c523:function(e,t,a){"use strict";var i=a("4914"),n=a.n(i);n.a},c592:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"bankCardOCR_index"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSMSCorrect,expression:"!isSMSCorrect"}]},[i("van-nav-bar",{attrs:{title:e.isChangeBindCard?"更换绑定卡":"绑定银行卡","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isChangeBindCard,expression:"!isChangeBindCard"}],staticClass:"currentProgress",attrs:{slot:"right"},slot:"right"},[i("span",{staticClass:"currentStep"},[e._v("2")]),i("span",{staticClass:"totalStep"},[e._v("/3")])])]),i("StepList",{directives:[{name:"show",rawName:"v-show",value:!e.isChangeBindCard,expression:"!isChangeBindCard"}],attrs:{percentage:200/3}}),i("div",{staticClass:"g_container mainContent"},[i("div",{staticClass:"titleContent"},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.ifShowBankCardListPopup=!0}}},[e._v("支持银行")]),i("TitleSec",{attrs:{"title-text":"填写银行卡号","desc-text":"请填写您本人的银行卡。本操作将严格保护您的隐私安全，请放心操作"}}),i("div",{staticClass:"formContent",attrs:{loading:!0}},[i("div",{staticClass:"bankCardOCR"},[i("p",{staticClass:"lbl"},[e._v("银行卡号")]),i("van-field",{class:""===e.bankCardNo?"":"fb",attrs:{"error-message":e.bankCardNoErrorMsg,maxlength:"23",placeholder:"请输入银行卡号"},model:{value:e.bankCardNo,callback:function(t){e.bankCardNo=t},expression:"bankCardNo"}}),i("cameras-albums",{attrs:{fileInputID:"id_bankCardOCR","only-icon":!0},on:{setData:e.OCRbankCard}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.$session.getBankCardOCRAgreementState()&&!e.isChangeBindCard,expression:"!$session.getBankCardOCRAgreementState() && !isChangeBindCard"}],staticClass:"clickMarsk",on:{click:e.handleClickMarsk}})],1),i("p",{staticClass:"lbl"},[e._v("预留手机号")]),i("van-field",{class:""===e.cardPhone?"":"fb",attrs:{"error-message":e.cardPhoneErrorMsg,maxlength:"11",placeholder:"请输入预留手机号"},model:{value:e.cardPhone,callback:function(t){e.cardPhone=t},expression:"cardPhone"}})],1)],1)]),i("div",{staticClass:"btmSec g_container"},[i("div",{staticClass:"confirmSrc"},[i("van-checkbox",{attrs:{shape:"square"},model:{value:e.ifAcceptAgreement,callback:function(t){e.ifAcceptAgreement=t},expression:"ifAcceptAgreement"}}),i("p",[e._v(" 我已阅读并同意 "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.$router.push({path:"/agreement",query:{agreementSrc:a("678e")}})}}},[e._v("《个人人民币银行结算账户管理协议》")]),e._v("、 "),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.$router.push({path:"/agreement",query:{agreementSrc:a("16ec")}})}}},[e._v("《中国农业银行电子账户服务协议》")])])],1),i("van-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",disabled:e.isSubmitDisable},on:{click:e.nextStep}},[e._v("下一步")])],1),i("van-popup",{staticClass:"bankCardListPopup",attrs:{position:"bottom"},model:{value:e.ifShowBankCardListPopup,callback:function(t){e.ifShowBankCardListPopup=t},expression:"ifShowBankCardListPopup"}},[i("h3",[e._v("支持银行")]),i("van-grid",{attrs:{border:!1,"column-num":3}},e._l(e.$settings.app.bankInfoList,(function(t){return i("van-grid-item",{key:t.name},[i("i",{class:t.icon}),i("span",[e._v(e._s(t.shortName))])])})),1),i("van-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:function(t){e.ifShowBankCardListPopup=!1}}},[e._v("确定")])],1),i("VanLoading",{attrs:{"if-show-loading":e.ifShowLoading},on:{"update:ifShowLoading":function(t){e.ifShowLoading=t},"update:if-show-loading":function(t){e.ifShowLoading=t}}}),i("VanDialog",{attrs:{"if-show-dialog":e.ifShowDialog},on:{"update:ifShowDialog":function(t){e.ifShowDialog=t},"update:if-show-dialog":function(t){e.ifShowDialog=t},confirm:e.handleDialogConfirm}},[e._v(" 您上传的银行卡照片仅用作本业 "),i("br"),e._v("务开通，请您仔细阅读并同意 "),i("br"),i("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.$router.push({path:"/agreement",query:{agreementSrc:a("cc65")}})}}},[e._v("《个人信息授权书》")])]),i("SMSVerification",{attrs:{ifShowSMSpopup:e.ifShowSMSpopup,"mobile-phone-number":e.cardPhone,"sms-type":e.smsType},on:{"update:ifShowSMSpopup":function(t){e.ifShowSMSpopup=t},"update:if-show-s-m-spopup":function(t){e.ifShowSMSpopup=t},onCorrect:e.handleSMSCorrect}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isSMSCorrect,expression:"isSMSCorrect"}]},[i("WalletOpening",{attrs:{isSMSCorrect:e.isSMSCorrect},on:{"update:isSMSCorrect":function(t){e.isSMSCorrect=t},"update:is-s-m-s-correct":function(t){e.isSMSCorrect=t}}})],1)])},n=[],r=(a("b0c0"),a("ac1f"),a("5319"),a("96cf"),a("89ba")),s=a("1157"),o=a.n(s),c=a("ad66"),u=a("ec40"),l=a("8cd8"),d={name:"BankCardOCRIndex",components:{TitleSec:c["a"],CamerasAlbums:u["a"],WalletOpening:l["default"]},data:function(){return{ifAcceptAgreement:"1"===this.$session.getSigningAgreementState(),ifShowLoading:!1,ifShowBankCardListPopup:!1,bankCardNo:this.$session.getBankCardForm().bankCardNo||"",bankCardNoErrorMsg:"",cardPhone:this.$session.getBankCardForm().cardPhone||"",cardPhoneErrorMsg:"",ifShowDialog:!1,bankBasicInfo:"",ifShowSMSpopup:!1,smsType:1,isSMSCorrect:!1}},computed:{isSubmitDisable:function(){return!(this.ifAcceptAgreement&&this.bankCardNo&&""===this.bankCardNoErrorMsg&&this.cardPhone&&""===this.cardPhoneErrorMsg)},isChangeBindCard:function(){return this.$route.query.changeBindCard}},watch:{ifAcceptAgreement:function(e){this.$session.setSigningAgreementState(e?1:0)},bankCardNo:function(e){var t=this;this.$nextTick((function(){if(t.bankCardNo=e.replace(/\D/g,"").replace(/....(?!$)/g,"$& "),""===e)t.bankCardNoErrorMsg="银行卡号不能为空";else if(e.length<15)t.bankCardNoErrorMsg="银行卡号格式不正确";else{t.bankCardNoErrorMsg="";var a=t.$session.getBankCardForm();a.bankCardNo=e,t.$session.setBankCardForm(a)}}))},cardPhone:function(e){var t=this;this.$nextTick((function(){if(""===e)t.cardPhoneErrorMsg="预留手机号不能为空";else if(11!==e.length)t.cardPhoneErrorMsg="手机号码格式不正确";else{t.cardPhoneErrorMsg="";var a=t.$session.getBankCardForm();a.cardPhone=e,t.$session.setBankCardForm(a)}}))}},methods:{handleClickMarsk:function(){this.ifShowDialog=!0},handleDialogConfirm:function(){this.$session.setBankCardOCRAgreementState(1),o()("#id_bankCardOCR").click()},OCRbankCard:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ifShowLoading=!0,e.next=3,this.$api.kuangshi.bankCardOCR({imageBase64:t.src});case 3:a=e.sent,a&&a.data?(this.bankCardNo=a.data[0].number,this.ifShowLoading=!1):(this.$notify({type:"danger",message:"银行卡识别失败！"}),this.ifShowLoading=!1);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),nextStep:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ifShowLoading=!0,e.next=3,this.$api.register.getBankCardNameAndType(this.bankCardNo.replace(/\s*/g,""));case 3:if(t=e.sent,!t||!t.data){e.next=21;break}if(a=t.data[0]?t.data[0]:{},this.bankBasicInfo=this.$app.getBankBasicInfo(a.bank),"2"!==a.cardType){e.next=11;break}return this.$notify({type:"danger",message:"不支持绑定信用卡！"}),this.ifShowLoading=!1,e.abrupt("return",!1);case 11:if(this.bankBasicInfo.name){e.next=15;break}return this.$notify({type:"danger",message:"不支持绑定该行的银行卡"}),this.ifShowLoading=!1,e.abrupt("return",!1);case 15:a.bankType="ABC"===this.bankBasicInfo.code?"01":"02",a.cardPhone=this.cardPhone,this.$session.setBankCardForm(a),this.isChangeBindCard?(this.ifShowLoading=!1,this.ifShowSMSpopup=!0,this.smsType=2):this.handleSigning(),e.next=24;break;case 21:return this.$notify({type:"danger",message:t.message}),this.ifShowLoading=!1,e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSigning:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.smsType=1,t=this.$session.getIDcardForm(),a=this.$session.getBankCardForm(),i=this.$session.getMerchantInfo(),e.next=6,this.$api.register.customerSigning({accBank:this.bankBasicInfo.bankUnionNumber,bankCardNo:a.bankCardNo,bankName:a.bank,bankChinaName:a.bankName,bankType:a.bankType,cardPhone:a.cardPhone,registerMobile:i.registerMobile,cardType:a.cardType,idNumber:t.idNumber,merchantCustomerId:this.$session.getMerchantInfo().merchantCustomerId,name:t.name});case 6:if(n=e.sent,!n||"200"!==n.code){e.next=17;break}r=n.data[0]?n.data[0]:{},this.$session.setCustomerInfo({customerId:r.customerId}),a.personBankId=r.personBankId,a.reqRefTrace=r.reqRefTrace,this.$session.setBankCardForm(a),this.ifShowLoading=!1,this.ifShowSMSpopup=!0,e.next=20;break;case 17:return this.$notify({type:"danger",message:n.message}),this.ifShowLoading=!1,e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSMSCorrect:function(e){var t=this.$session.getBankCardForm();t.msgVerNum=e.msgVerNum||"",t.msgVerLog=e.msgVerLog||"",this.$session.setBankCardForm(t),this.isSMSCorrect=!0}}},m=d,h=(a("356e"),a("c523"),a("2877")),f=Object(h["a"])(m,i,n,!1,null,"557552ac",null);t["default"]=f.exports},cb7b:function(e,t,a){e.exports=a.p+"static/img/id_idCard_face.f87d71cb.png"},cc65:function(e,t,a){e.exports=a.p+"static/img/OCR识别.4ebfc8a1.jpg"},dcb5:function(e,t,a){"use strict";var i=a("3e36"),n=a.n(i);n.a},e206:function(e,t,a){},e58c:function(e,t,a){"use strict";var i=a("fc6a"),n=a("a691"),r=a("50c4"),s=a("b301"),o=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,l=s("lastIndexOf");e.exports=u||l?function(e){if(u)return c.apply(this,arguments)||0;var t=i(this),a=r(t.length),s=a-1;for(arguments.length>1&&(s=o(s,n(arguments[1]))),s<0&&(s=a+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:c},e9fa:function(e,t,a){e.exports=a.p+"static/img/card_bg.5540809f.png"},ec40:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"camerasAlbums"},[a("input",{staticStyle:{display:"none"},attrs:{id:e.fileInputID,type:"file",accept:"image/*",name:"file"},on:{change:function(t){return e.fileChange(t)}}}),a("div",{staticClass:"image-item space",on:{click:function(t){return e.showActionSheet()}}},[a("div",{staticClass:"image-up"})]),a("div",{staticClass:"clickArea",class:e.onlyIcon?"onlyIcon":"",on:{click:function(t){return e.fileClick()}}},[a("div",{staticClass:"img_wrap"},[e._m(0),e.onlyIcon||e.curImg?e._e():a("img",{staticClass:"img_click",attrs:{src:e.clickBgImgSrc,width:"100%",alt:""}}),e.onlyIcon?e._e():a("img",{staticClass:"img_result",attrs:{src:e.curImg.src,alt:""}})]),e.onlyIcon?e._e():a("p",{staticClass:"desc",domProps:{innerHTML:e._s(e.clickText)}})]),e.onlyIcon?e._e():a("div",{staticClass:"sample_link"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.handleSample}},[e._v("示例")])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"camera_wrap"},[a("i",{staticClass:"icon-camera"})])}],r=(a("c975"),a("baa5"),a("a434"),a("b0c0"),a("a9e3"),a("542d"),a("1157")),s=a.n(r),o=(a("ba9f"),{name:"CamerasAlbums",props:{onlyIcon:{type:Boolean,default:!1},fileInputID:{type:String,default:"upload_file"},clickImageSrc:{type:String,default:""},clickText:{type:String,default:"点击上传"},maxSize:{type:Number,default:100/1024}},data:function(){return{targetCanvas:"",clickBgImgSrc:"",curImg:"",imgList:[],datas:new FormData,files:0,size:0}},mounted:function(){this.clickBgImgSrc=this.clickImageSrc},watch:{imgList:function(){var e=this;this.curImg=this.imgList[this.imgList.length-1].file,this.size/1024/1024>this.maxSize?e.compressImage(e.curImg.src,.9):this.$emit("setData",this.curImg)}},methods:{compressImage:function(e,t){var a=this;a.compressImageInner(e,t,(function(e){e.length/1024/1024>a.maxSize?a.compressImage(e,.9):(a.curImg.src=e,a.$emit("setData",a.curImg))}))},fileClick:function(){s()("#"+this.fileInputID).click()},checkPermissionCamera:function(){var e=plus.navigator.checkPermission("CAMERA"),t=!1;switch(e){case"authorized":plus.nativeUI.toast("已开启相机权限"),t=!0;break;case"denied":plus.nativeUI.toast("已关闭相机权限");break;case"undetermined":plus.nativeUI.toast("未确定相机权限");break;case"unknown":plus.nativeUI.toast("无法查询相机权限");break;default:plus.nativeUI.toast("不支持相机权限");break}return t},getImage:function(){if(this.checkPermissionCamera()){var e=plus.camera.getCamera();e.captureImage((function(e){plus.io.resolveLocalFileSystemURL(e,(function(e){compressImage(e.toLocalURL(),e.name)}),(function(e){plus.nativeUI.toast("读取拍照文件错误："+e.message)}))}),(function(e){plus.nativeUI.toast("拍照失败："+e.message)}),{filter:"image"})}},galleryImgs:function(){plus.gallery.pick((function(e){var t=e.substr(e.lastIndexOf("/")+1);compressImage(e,t)}),(function(e){}),{filter:"image"})},showActionSheet:function(){var e=[{title:"拍照"},{title:"从相册选择"}];plus.nativeUI.actionSheet({cancel:"取消",buttons:e},(function(e){1==e.index?this.getImage():2==e.index&&this.galleryImgs()}))},fileChange:function(e){this.files=s()("#"+this.fileInputID).get(0).files;for(var t=0;t<this.files.length;t++)this.datas.append("file",this.files[t]);e.target.files[0].size&&(this.fileList(e.target),e.target.value="")},fileList:function(e){for(var t=e.files,a=0;a<t.length;a++)""!=t[a].type?this.fileAdd(t[a]):this.folders(e.items[a])},folders:function(e){var t=this;e.kind&&(e=e.webkitGetAsEntry()),e.createReader().readEntries((function(e){for(var a=0;a<e.length;a++)e[a].isFile?t.foldersAdd(e[a]):t.folders(e[a])}))},fileAdd:function(e){if(this.size=this.size+e.size,-1==e.type.indexOf("image"))e.src="wenjian.png",this.imgList.push({file:e});else{var t=new FileReader;t.vue=this,t.readAsDataURL(e),t.onload=function(){e.src=this.result,this.vue.imgList.push({file:e})}}},fileDel:function(e){this.size=this.size-this.imgList[e].file.size,this.imgList.splice(e,1)},bytesToSize:function(e){if(0===e)return"0 B";var t=1024,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(t));return(e/Math.pow(t,i)).toPrecision(3)+" "+a[i]},compressImageInner:function(e,t,a){var i=new Image;i.src=e,i.onload=function(){var e=this,n=document.createElement("canvas"),r=n.getContext("2d"),s=e.width*t,o=e.height*t;n.width=s,n.height=o,r.fillStyle="#fff",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,s,o);var c=n.toDataURL("image/jpeg",t);return a(c),c}},handleSample:function(){this.$emit("clickSample")}}}),c=o,u=(a("dcb5"),a("2877")),l=Object(u["a"])(c,i,n,!1,null,"f57e5ed0",null);t["a"]=l.exports},f2f6:function(e,t,a){"use strict";var i=a("b4f2"),n=a.n(i);n.a},f34e:function(e,t,a){},f470:function(e,t,a){"use strict";var i=a("7746"),n=a.n(i);n.a},f518:function(e,t,a){"use strict";var i=a("c08c"),n=a.n(i);n.a}}]);