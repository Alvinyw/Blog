!function(e){var t={};t.trim=function(e){return/^\s*(\S*)\s*$/.exec(e)[1]},t.preset=function(e){var t=[].slice.call(arguments,1);return function(){e.apply(null,t.concat([].slice.call(arguments)))}},t.extend=function(){for(var e,t={},n=0,r=arguments.length;n<r;++n)if(e=arguments[n])for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i]);return t};var n,r="DXImageTransform.Microsoft.AlphaImageLoader",i=" progid:"+r+'(sizingMethod="scale")',o={jpeg:["image/jpeg"],jpg:["image/jpeg"],gif:["image/gif"],png:["image/png","image/x-png"],tiff:["image/tiff"],bmp:["image/x-ms-bmp","image/bmp"]},a=!(!document.documentElement.filters||!document.documentElement.filters.item),l=11===document.documentMode;document.documentElement.addEventListener?n=function(e,t,n){e.addEventListener(t,n)}:n=function(e,t,n){e.attachEvent("on"+t,n)};var c=function(e){if(e)return{createObjectURL:function(t){return e.createObjectURL(t)},revokeObjectURL:function(t){e.revokeObjectURL(t)}}}(window.webkitURL||window.URL),u=function(e,t){if(!e)return t("");if(c)t(c.createObjectURL(e));else if(window.FileReader){var r=new window.FileReader;n(r,"load",function(e){t(e.target.result)}),r.readAsDataURL(e)}else t(e.readAsDataURL())},f=function(e){var t=e.value||"";return 0===t.search(/\w:\\fakepath/)&&(e.select(),t=document.selection.createRangeCollection()[0].htmlText),t},s=function(e,t){var n=e.getElementsByClassName("data-preview-img")[0];return n?(c&&c.revokeObjectURL(n.src),t&&(n[n.remove&&"remove"||"removeNode"].call(n),n=null),n):null},d=function(e,t,n){var r="",i=t.lastIndexOf(".");return i>0&&(r=t.substring(i+1)),e.opts[n(o[r])?"onSuccess":"onFailed"].call(e.self,t,r,e.accept)},m=function(){m[a?"legacy":"modern"].apply(null,arguments)};m.modern=function(e,t,n,r){var i=s(n,!t);t&&d(e,e.fileEl.files[0].name,r)&&(i||((i=new Image).className="data-preview-img",i.onload=function(){i.style.display="block",i.style.maxHeight="100%",i.style.maxWidth="100%",i.style.height="auto"},n.appendChild(i)),i.src=t)},m.legacy=function(e,t,n,i){d(e,t,i)&&(n.filters.item(r).src=t)};var p=function(){p[a?"legacy":"modern"].apply(null,arguments)};p.modern=function(e,n,r,i){u(n.files[0],t.preset(function(e,t){m(e,t,r,i)},e))},p.legacy=function(e,t,n,r){var i=f(t);m(e,i,n,r)};var v,g=function(e){a?(e.style.filter=e.style.filter.replace(i,""),setTimeout(function(){e.style.filter+=i},0)):s(e,!0)},w=function(e){if(document.documentMode&&document.documentMode<11){var t=e.parentNode,n=e.nextSibling;(v=v||document.createElement("form")).appendChild(e),v.reset(),t.insertBefore(e,n)}else e.value=""},h=e.Preview=function(e,r,o){if(2>arguments.length)throw Error("Failed to execute 'Preview': 2 over arguments required, but only "+arguments.length+" present");if(!(this instanceof h))return new h(e,r);var l=this._={};l.self=this;for(var c,u=0;u<2&&(c=arguments[u++]);)"INPUT"===c.nodeName&&"file"===c.type?l.fileEl=c:l.previewEl=c;if(!l.fileEl)throw Error("Failed to execute 'Preview': HTMLInputElement[type=file] required, but there is no one present");l.opts=t.extend(o,h.defaults);var f,s;"function"!=typeof l.opts.onSuccess&&(f=l.opts.onSuccess,l.opts.onSuccess=function(){return f}),"function"!=typeof l.opts.onFailed&&(s=l.opts.onFailed,l.opts.onFailed=function(){return s}),a&&(l.previewEl.style.filter+=i);var d=function(e){for(var t,n=(e=e.replace(/\*/g,function(e){return"[^\\u002c]+"})).split(/\s*,\s*/),r=[],i=0;t=n[i++];)r.push(RegExp(t));return function(e){e=[].concat(e);for(var t,n=0;t=r[n++];)for(var i,o=0;i=e[o++];)if(t.test(i))return!0;return!1}}(l.accept=l.fileEl.accept||"image/*");n(l.fileEl,"change",function(){p(l,l.fileEl,l.previewEl,d)})};h.prototype.reset=function(){var e=this._;w(e.fileEl),l||g(e.previewEl)},h.defaults={onSuccess:!0,onFailed:!1}}(window);