{"version":3,"sources":["webpack:///./src/views/canvasTurntable/index.vue?c3a1","webpack:///./node_modules/alvin-canvasturntable/canvasTurntable.js","webpack:///src/views/canvasTurntable/index.vue","webpack:///./src/views/canvasTurntable/index.vue?e2b0","webpack:///./src/views/canvasTurntable/index.vue"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","attrs","$","jQuery","createCanvasTurntable","cfg","targetNodeId","AddCanvasTurntable","fn","options","angles","defaults","sectorText","colors","rotateTime","alertText","resultTitle","settings","extend","_this","rotNum","curIndex","notice","textNum","length","selectedText","Array","canvasWidth","width","idSuffix","Date","parse","canvasWrapperID","canvas1ID","canvas2ID","clickBtnID","resultID","initCanvasNode","canvasWrapper","css","canvasZhuanPan","append","canvasZhiZhen","clickBtn","resultDiv","resultTitleNode","initTurntable","canvas1","document","getElementById","canvas2","ctx1","getContext","ctx2","initSector","startAngle","endAngle","i","Math","PI","save","beginPath","arc","lineWidth","strokeStyle","stroke","restore","fillStyle","fill","closePath","initSectorText","textAlign","textBaseline","step","translate","rotate","font","arrText","split","j","fillText","initPoint","moveTo","lineTo","runCup","degValue","targetCanvas","rnd","n","m","floor","random","ifRepeat","array","str","on","attr","setTimeout","console","log","newText","html","push","removeAttr","alert","name","data","tooltip","mounted","component"],"mappings":"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","file":"static/js/chunk-2d21e919.ed59e4bb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"canvasTurntable\"}})])}]\n\nexport { render, staticRenderFns }","var $ = require(\"jquery\");\r\nvar jQuery = require(\"jquery\");\r\n\r\n(function ($) {\r\n    $.fn.AddCanvasTurntable = function (options) {\r\n        var defaults = {\r\n\t\t\t/********** 标签属性设置 **********/\r\n\t\t\tsectorText: '', /* 扇形的文本值，应设置成数据形式 */\r\n\t\t\tcolors: '', /* 插件用到的颜色，应设置成数据形式 */\r\n\t\t\trotateTime: '', /* 转盘旋转一次的时间，单位 s，默认是 6s */\r\n\t\t\talertText: '', /* 全部选中之后的弹框内容 */\r\n\t\t\tresultTitle: '' /* result 描述 */\r\n\t\t\t\r\n        },\r\n        settings = $.extend(defaults, options); //把传入的参数 options 合并到 defaults 里并赋给 settings；若 options 里的参数与 defaults 有重复，则 options 会覆盖 defaults 里的参数\r\n\t\t\r\n        var _this = this;\r\n\t\t\r\n\t\t//转到当前选中的扇形需要旋转的角度\r\n\t\tvar angles;\r\n\t\t\r\n\t\t//旋转次数\r\n\t\tvar rotNum = 0;\r\n\t\t\r\n\t\t//当前选中的文本索引\r\n\t\tvar curIndex = 0;\r\n\t\t\r\n\t\t//当前抽中内容\r\n\t\tvar notice = null;\r\n\t\t\r\n\t\t//转盘旋转一次时间\r\n\t\tvar rotateTime = settings.rotateTime?settings.rotateTime:6;\r\n\t\t\r\n\t\t//result 描述\r\n\t\tvar resultTitle = settings.resultTitle?settings.resultTitle:\"当前已选中的结果如下：\";\r\n\t\t\r\n\t\t//全部选中之后的弹框内容\r\n\t\tvar alertText = settings.alertText?settings.alertText:\"转盘里的内容已全部被选中！\";\r\n\t\t\r\n\t\t//转盘用到的颜色: [扇形颜色一，扇形颜色二，扇形颜色三，扇形字体颜色，指针字体颜色，指针和边框颜色]\r\n\t\t//当扇形为奇数时，最后一块扇形的背景色为颜色三\r\n\t\tvar colors = settings.colors?settings.colors:[\"#e9536a\",\"#fbd7a1\",\"#df6679\",\"#000\",\"#fff\",\"#666\"];\r\n\t\t\r\n\t\t//扇形的文本内容\r\n\t\tvar sectorText = settings.sectorText?settings.sectorText:[\"扇形一\",\"扇形二\",\"扇形三\",\"扇形四\",\"扇形五\",\"扇形六\",\"扇形七\",\"扇形八\",\"扇形九\",\"扇形十\",\"扇形十一\",\"扇形十二\",\"扇形十三\",\"扇形十四\"];\r\n\t\tvar textNum = sectorText.length;\r\n\t\t\r\n\t\t//已选中过的文本内容\r\n\t\tvar selectedText = new Array();\r\n\t\t\r\n\t\t//转盘 Canvas 参数\r\n\t\tvar canvasWidth = _this.width();//转盘为圆形，宽高相等\r\n\t\t\r\n\t\t//ID 后缀\r\n\t\tvar idSuffix = Date.parse(new Date())/1000,\r\n\t\t\tcanvasWrapperID = \"canvasWrapper-\"+ idSuffix,\r\n\t\t\tcanvas1ID = \"canvas1-\"+ idSuffix,\r\n\t\t\tcanvas2ID = \"canvas2-\"+ idSuffix,\r\n\t\t\tclickBtnID = \"clickBtn-\"+ idSuffix,\r\n\t\t\tresultID = \"result-\"+ idSuffix;\r\n\t\t\t\t\r\n\t\t//初始化转盘的 html 元素\r\n\t\tinitCanvasNode();\r\n\t\t\t\r\n\t\t//初始化转盘\r\n\t\tinitTurntable();\r\n\t\t\r\n\t\t//为指针绑定点击事件\r\n\t\t$(\"body\").on(\"click\", \"#\"+clickBtnID+\"\", function(){\r\n\t\t\tif(selectedText.length<sectorText.length){\r\n\t\t\t\t//拿到随机数，计算旋转角度和当前选中文本\r\n\t\t\t\tfor(var i=0;i>-1;i++){\r\n\t\t\t\t\tcurIndex = rnd(0,sectorText.length-1);\r\n\t\t\t\t\tif(!ifRepeat(selectedText,sectorText[curIndex])){\r\n\t\t\t\t\t\tangles = 6*360*(rotNum+1) - curIndex*(360/textNum);\r\n\t\t\t\t\t\tnotice = sectorText[curIndex];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//转盘旋转\r\n\t\t\t\trunCup();\r\n\t\t\t\t\r\n\t\t\t\t//转盘旋转过程“开始”按钮无法点击\r\n\t\t\t\t$(\"#\"+clickBtnID+\"\").attr(\"disabled\", true);\r\n\t\t\t\t\r\n\t\t\t\t//旋转次数加一\r\n\t\t\t\trotNum = rotNum + 1;\r\n\t\t\t\t\r\n\t\t\t\t//恢复“开始”按钮的点击\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tconsole.log(notice);\r\n\t\t\t\t\tvar newText = $('<span>');\r\n\t\t\t\t\tnewText.html(sectorText[curIndex]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(selectedText.length!=0){\r\n\t\t\t\t\t\t//$(\"#\"+resultID+\"\").append('、');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tselectedText.push(sectorText[curIndex]);\r\n\t\t\t\t\t$(\"#\"+resultID+\"\").append(newText);\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(\"#\"+clickBtnID+\"\").removeAttr(\"disabled\", true);\r\n\t\t\t\t},rotateTime*1000);\r\n\t\t\t}else{\r\n\t\t\t\talert(alertText);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t//初始化转盘的 html 元素\r\n\t\tfunction initCanvasNode(){\r\n\t\t\tvar canvasWrapper = $(\"<div id='\"+canvasWrapperID+\"'>\");\r\n\t\t\tcanvasWrapper.css({\"height\":_this.width(),\"width\":_this.width(),\"position\":\"relative\"});\r\n\t\t\t\r\n\t\t\tvar canvasZhuanPan = $(\"<canvas id='\"+canvas1ID+\"' width='\" + canvasWidth +\"' height='\" + canvasWidth +\"'>\");\r\n\t\t\tcanvasZhuanPan.css({\"border-radius\":\"100%\",\"transition\":\"transform \"+rotateTime+\"s\",\"-o-transition\":\"transform \"+rotateTime+\"s\",\"-ms-transition\":\"transform \"+rotateTime+\"s\",\"-moz-transition\":\"transform \"+rotateTime+\"s\",\"-webkit-transition\":\"transform \"+rotateTime+\"s\",\"transform-origin\":\"50% 50%\",\"-o-transform-origin\":\"50% 50%\",\"-ms-transform-origin\":\"50% 50%\",\"-moz-transform-origin\":\"50% 50%\",\"-webkit-transform-origin\":\"50% 50%\"});\r\n\t\t\tcanvasWrapper.append(canvasZhuanPan);\r\n\t\t\t\r\n\t\t\tvar canvasZhiZhen = $(\"<canvas id='\"+canvas2ID+\"' width='\" + canvasWidth +\"' height='\" + canvasWidth +\"'>\");\r\n\t\t\tcanvasZhiZhen.css({\"position\":\"absolute\",\"top\":\"0\",\"left\":\"0\",\"z-index\":\"30\"});\r\n\t\t\tcanvasWrapper.append(canvasZhiZhen);\r\n\t\t\t\r\n\t\t\tvar clickBtn = $(\"<button id='\"+clickBtnID+\"'>\");\r\n\t\t\tclickBtn.css({\"position\":\"absolute\",\"top\":\"50%\",\"left\":\"50%\",\"width\":canvasWidth/5,\"height\":canvasWidth/5,\"margin-top\":-canvasWidth/10,\"margin-left\":-canvasWidth/10,\"border-radius\":\"100%\",\"cursor\":\"pointer\",\"border\":\"none\",\"background\":\"transparent\",\"outline\":\"none\",\"z-index\":\"40\"});\r\n\t\t\tcanvasWrapper.append(clickBtn);\r\n\t\t\t\r\n\t\t\tvar resultDiv = $(\"<div id='\"+resultID+\"' class='result' width='\" + canvasWidth +\"'>\");\r\n\t\t\tresultDiv.css({\"padding\":\"10px\",\"border\":\"2px solid #aaa\",\"margin-top\":\"20px\",\"border-radius\":\"4px\"});\r\n\t\t\tvar resultTitleNode = $(\"<h3>\"+resultTitle+\"</h3>\");\r\n\t\t\tresultDiv.append(resultTitleNode);\t\t\t\r\n\t\t\t\r\n\t\t\t_this.append(canvasWrapper);\r\n\t\t\t\r\n\t\t\t_this.append(resultDiv);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//初始化绘制转盘\r\n\t\tfunction initTurntable(){\r\n\t\t\tvar canvas1 = document.getElementById(canvas1ID);\r\n\t\t\tvar canvas2 = document.getElementById(canvas2ID);\r\n\t\t\tvar ctx1 = canvas1.getContext('2d');\r\n\t\t\tvar ctx2 = canvas2.getContext('2d');\r\n\t\t\t\r\n\t\t\t//初始化扇形\r\n\t\t\tinitSector();\r\n\t\t\t\r\n\t\t\t//初始化扇形文本\r\n\t\t\tinitSectorText();\r\n\t\t\t\r\n\t\t\t//初始化指针\r\n\t\t\tinitPoint();\r\n\t\t\r\n\t\t\t//初始化扇形转盘\r\n\t\t\tfunction initSector(){\r\n\t\t\t\tvar startAngle = 0;//扇形的开始弧度\r\n\t\t\t\tvar endAngle = 0;//扇形的终止弧度\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t//画一个 textNum 等份扇形组成的圆形\r\n\t\t\t\tfor (var i = 0; i< textNum; i++){\r\n\t\t\t\t\tstartAngle = i*Math.PI*2/textNum - Math.PI/2 + Math.PI*2/textNum/2; //保证初始化时指针正好对应在 扇形一 的中间\r\n\t\t\t\t\tendAngle = startAngle+Math.PI*2*(1/textNum);\r\n\t\t\t\t\tctx1.save();\r\n\t\t\t\t\tctx1.beginPath(); \r\n\t\t\t\t\tctx1.arc(canvasWidth/2,canvasWidth/2,canvasWidth/2, startAngle, endAngle, false);\r\n\t\t\t\t\tctx1.lineWidth = canvasWidth;\r\n\t\t\t\t\tif (i%2 == 0) {\r\n\t\t\t\t\t\tctx1.strokeStyle = colors[0];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tctx1.strokeStyle = colors[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(i==textNum-1 && textNum%2!=0){\r\n\t\t\t\t\t\tctx1.strokeStyle = colors[2];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx1.stroke();\r\n\t\t\t\t\tctx1.restore();\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\t//中间白底圆圈：半径：canvasWidth/10\r\n\t\t\t\tctx1.beginPath();\r\n\t\t\t\tctx1.arc(canvasWidth/2,canvasWidth/2,canvasWidth/10,0,Math.PI*2,false);\r\n\t\t\t\tctx1.fillStyle = colors[4];\r\n\t\t\t\tctx1.fill();\r\n\t\t\t\tctx1.closePath();\r\n\t\t\t}\r\n\t\r\n\t\t\t//初始化扇形转盘文字\r\n\t\t\tfunction initSectorText(){\t \r\n\t\t\t\tctx1.textAlign='start';\r\n\t\t\t\tctx1.textBaseline='middle';\r\n\t\t\t\tctx1.fillStyle = colors[3];\r\n\t\t\t\tvar step = 2*Math.PI/textNum;\r\n\t\t\t\tfor ( var i = 0; i < textNum; i++) {\r\n\t\t\t\t\tctx1.save();\r\n\t\t\t\t\tctx1.beginPath();\r\n\t\t\t\t\tctx1.translate(canvasWidth/2,canvasWidth/2);\r\n\t\t\t\t\tctx1.rotate(i*step);\r\n\t\t\t\t\tctx1.font = \"Bold 16px Microsoft YaHei\";\r\n\t\t\t\t\tctx1.fillStyle = colors[3];\t\t\t\t\t\r\n\t\t\t\t\tvar arrText = sectorText[i].split('');\r\n\t\t\t\t\tfor(var j=0;j<arrText.length;j++){\r\n\t\t\t\t\t\t//-8 是为了让文字向左偏移半个字的宽度（大概是 8px）\r\n\t\t\t\t\t\tctx1.fillText(arrText[j], -8, 20*j-(canvasWidth/2-35), 20);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx1.closePath();\r\n\t\t\t\t\tctx1.restore();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t//初始化指针\r\n\t\t\tfunction initPoint(){ \r\n\t\t\t\t//画转盘最外边边框\r\n\t\t\t\tctx2.beginPath(); \r\n\t\t\t\tctx2.strokeStyle = colors[5];\r\n\t\t\t\tctx2.arc(canvasWidth/2,canvasWidth/2,canvasWidth/2-2, 0, Math.PI*2, false);\r\n\t\t\t\tctx2.lineWidth = 3;\r\n\t\t\t\tctx2.stroke();\r\n\t\t\t\tctx2.closePath();\r\n\t\t\t\t//箭头指针\r\n\t\t\t\tctx2.beginPath();\r\n\t\t\t\tctx2.moveTo(canvasWidth/2,canvasWidth*(3/10));\r\n\t\t\t\tctx2.lineTo(canvasWidth/2-9,canvasWidth/2);\r\n\t\t\t\tctx2.lineTo(canvasWidth/2+9,canvasWidth/2);\r\n\t\t\t\tctx2.lineTo(canvasWidth/2,canvasWidth*(3/10));\r\n\t\t\t\tctx2.fillStyle = colors[5];\r\n\t\t\t\tctx2.fill();\r\n\t\t\t\tctx2.closePath();\r\n\t\t\t\t//中间小圆\r\n\t\t\t\tctx2.beginPath();\r\n\t\t\t\tctx2.arc(canvasWidth/2,canvasWidth/2,canvasWidth/10-3,0,Math.PI*2,false);\r\n\t\t\t\tctx2.fillStyle = colors[5];\r\n\t\t\t\tctx2.fill();\r\n\t\t\t\tctx2.closePath();\r\n\t\t\t\t//小圆文字\r\n\t\t\t\tctx2.font = \"Bold 16px Microsoft YaHei\"; \r\n\t\t\t\tctx2.textAlign='start';\r\n\t\t\t\tctx2.textBaseline='middle';\r\n\t\t\t\tctx2.fillStyle = colors[4];\r\n\t\t\t\tctx2.beginPath();\r\n\t\t\t\tctx2.fillText('开始',canvasWidth/2-16,canvasWidth/2-1,40);\r\n\t\t\t\tctx2.fill();\r\n\t\t\t\tctx2.closePath();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t//转盘旋转\r\n\t\tfunction runCup(){\r\n\t\t\tvar degValue = 'rotate('+angles+'deg'+')',\r\n\t\t\t\ttargetCanvas = $(\"#\"+canvas1ID+\"\");\r\n\t\t\ttargetCanvas.css('-o-transform',degValue);           //Opera\r\n\t\t\ttargetCanvas.css('-ms-transform',degValue);          //IE浏览器\r\n\t\t\ttargetCanvas.css('-moz-transform',degValue);         //Firefox\r\n\t\t\ttargetCanvas.css('-webkit-transform',degValue);      //Chrome和Safari\r\n\t\t\ttargetCanvas.css('transform',degValue);\r\n\t\t}\t\t\r\n\t\t\r\n\t\t//获取随机数\r\n\t\tfunction rnd(n, m){\r\n\t\t\treturn Math.floor(Math.random()*(m-n+1)+n)\r\n\t\t}\r\n\t\t\r\n\t\t//判断 str 是否存在于 arrtay 中\r\n\t\tfunction ifRepeat(array,str){\r\n\t\t\tfor(var i=0;i<array.length;i++){\r\n\t\t\t\tif(array[i]==str){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n    }\r\n})(jQuery);\r\n\r\nfunction createCanvasTurntable(cfg) {\r\n\treturn $(\"#\" + cfg.targetNodeId).AddCanvasTurntable(cfg);\r\n}\r\nexport default createCanvasTurntable;","<template>\r\n  <div id=\"main\">\r\n    <div id=\"canvasTurntable\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport createCanvasTurntable from \"alvin-canvasturntable\";\r\nexport default {\r\n  name: \"CanvasTurntable\",\r\n  data() {\r\n    return {\r\n      tooltip: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    var cfg = {\r\n      targetNodeId: \"canvasTurntable\",\r\n      sectorText: [\"张某某\", \"李某某\", \"王某某\", \"韩某某\", \"廖某某\", \"赵某某\"],\r\n      rotateTime: 3,\r\n    };\r\n    this.tooltip = createCanvasTurntable(cfg);\r\n  },\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=74666c48&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}