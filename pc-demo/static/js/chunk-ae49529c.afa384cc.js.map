{"version":3,"sources":["webpack:///./src/views/canvasDrag/index.vue?ef5a","webpack:///./src/views/canvasDrag/index.vue?bdf7","webpack:///./node_modules/alvin-canvasdrag/canvasDrag.js","webpack:///src/views/canvasDrag/index.vue","webpack:///./src/views/canvasDrag/index.vue?f76d","webpack:///./src/views/canvasDrag/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","fuc_getPointInfo","_v","staticRenderFns","$","canvasDrag","options","_this","defaults","operationPanel","canvasWrapperClass","dragBgContentClass","canvasEditerClass","defaultPointInfo","dragBgSrc","canvasWrapperBorder","brushThickness","defaultLineColor","errorLineColor","defaultRadiusColor","errorRadiusColor","innerRadiusFillColor","vertexOuterRadius","vertexInnerRadius","midpointOuterRadius","midpointInnerRadius","mouseX","mouseY","settings","extend","html","pointInfo","Array","midPointInfo","tempX","tempY","tempX0","tempY0","tempX1","tempY1","pointInductor","slopeSide","drawErrorRect","invalidShape","curDragPointIndex","canvasDragWrapper","dragBgContent","canvasEditer","operationPanelW","width","operationPanelH","height","parentAspectRatio","css","attr","dragBgImage","Image","src","onload","imgAspectRatio","length","i","drawRect","append","ctx","getContext","clearRect","getMidPointInfo","beginPath","strokeStyle","lineWidth","moveTo","lineTo","closePath","stroke","drawArc","a","b","c","d","arc","Math","PI","fillStyle","fill","p","getSlopeSide","checkPointBorder","checkPointShape","x0","y0","x1","y1","x2","y2","x3","y3","a0","b0","c0","a1","b1","c1","e","window","event","offsetX","offsetY","abs","j","mousemove","tempa1","tempb1","tempa2","tempb2","a2","b2","c2","off","_x","_y","createCanvasDrag","cfg","_canvasDrag","prototype","getPointInfo","console","log","name","data","canvasdrag","mounted","methods","component"],"mappings":"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","file":"static/js/chunk-ae49529c.afa384cc.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3fd8dbd2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3fd8dbd2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"}},[_c('a',{attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":_vm.fuc_getPointInfo}},[_vm._v(\"getPointInfo\")]),_c('div',{attrs:{\"id\":\"canvasdrag\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var $ = require(\"jquery\");\r\nvar jQuery = require(\"jquery\");\r\n\r\nfunction canvasDrag(options) {\r\n\tvar _this = this;\r\n\t/*默认的参数设置*/\r\n\tvar defaults = {\r\n\t\toperationPanel: \"#operationPanel\", //画板的根部容器\r\n\t\tcanvasWrapperClass: \"canvasDragWrapper\", //画板容器\r\n\t\tdragBgContentClass: \"dragBgContent\", //画板的背景图容器\r\n\t\tcanvasEditerClass: \"canvasEditer\", //Canvas 画板\r\n\t\tdefaultPointInfo: 0, //初始角点坐标（为长度为 8 的数组），不能设置成字符串\r\n\t\tdragBgSrc: \"\", //设置画板的背景图\r\n\t\tcanvasWrapperBorder: \"1px solid #ddd\", //画板容器的边框样式\r\n\t\tbrushThickness: 3, //画笔笔触粗细\r\n\t\tdefaultLineColor: \"#50a8e1\", //默认画笔颜色\r\n\t\terrorLineColor: \"red\", //默认拖拽出不合法四边形时画笔的颜色\r\n\t\tdefaultRadiusColor: \"#50a8e1\", //默认的拖拽点画笔颜色\r\n\t\terrorRadiusColor: \"red\", //默认拖拽出不合法四边形是拖拽点的颜色\r\n\t\tinnerRadiusFillColor: \"rgba(255,255,255,.5)\", //默认拖拽点内圆的背景色\r\n\t\tvertexOuterRadius: 6, //角点外圆的半径，最小值为（brushThickness+4）\r\n\t\tvertexInnerRadius: 5, //角点内圆半径，最小值为（brushThickness+3），最大值为（vertexOuterRadius-1）\r\n\t\tmidpointOuterRadius: 5, //中点外圆的半径，最小值为（brushThickness+3），最大值为（vertexInnerRadius）\r\n\t\tmidpointInnerRadius: 4, //中点点内圆半径，最小值为（brushThickness+2），最大值为（midpointOuterRadius-1）\r\n\t\tmouseX: \"#mouseX\", //实时显示鼠标在 X 轴的坐标\r\n\t\tmouseY: \"#mouseY\" //实时显示鼠标在 Y 轴的坐标\r\n\r\n\t};\r\n\tvar settings = $.extend(defaults, options); //把传入的参数 options 合并到 defaults 里并赋给 settings；若 options 里的参数与 defaults 有重复，则 options 会覆盖 defaults 里的参数\r\n\r\n\t//Canvas 画板里的笔触粗细\r\n\tvar brushThickness = settings.brushThickness;\r\n\r\n\t//计算角点和中点的圆半径\r\n\tvar vertexOuterRadius = settings.vertexOuterRadius < (brushThickness + 4) ? (brushThickness + 4) : settings.vertexOuterRadius,\r\n\t\tvertexInnerRadius = settings.vertexInnerRadius > (vertexOuterRadius - 1) ? (vertexOuterRadius - 1) : (settings.vertexInnerRadius < (brushThickness + 3) ? (brushThickness + 3) : settings.vertexInnerRadius),\r\n\t\tmidpointOuterRadius = settings.midpointOuterRadius > vertexInnerRadius ? vertexInnerRadius : (settings.midpointOuterRadius < (brushThickness + 3) ? (brushThickness + 3) : settings.midpointOuterRadius),\r\n\t\tmidpointInnerRadius = settings.midpointInnerRadius > (midpointOuterRadius - 1) ? (midpointOuterRadius - 1) : (settings.midpointInnerRadius < (brushThickness + 2) ? (brushThickness + 2) : settings.midpointInnerRadius);\r\n\r\n\t//初始化 UI\r\n\t$(settings.operationPanel).html('<div class=\"' + settings.canvasWrapperClass + '\" oncontextmenu=\"return false;\"><div class=\"' + settings.dragBgContentClass + '\"></div><canvas class=\"' + settings.canvasEditerClass + '\"></canvas></div>');\r\n\r\n\t//初始角点信息\r\n\t_this.pointInfo = new Array(8);\r\n\r\n\t//中点坐标数组 midPointInfo\r\n\t_this.midPointInfo = new Array(8);\r\n\r\n\t//判断角点和中点是否能响应拖拽行为的数组\r\n\tvar pointInductor = new Array(8);\r\n\r\n\t//四边斜率数组\r\n\tvar slopeSide = new Array(4);\r\n\r\n\t//记录拖拽的四边形是否合法的变量\r\n\tvar drawErrorRect = false,\r\n\t\tinvalidShape = false;\r\n\r\n\t//当前拖拽的点的 index\r\n\tvar curDragPointIndex = '';\r\n\r\n\t//当前拖拽点移动前的位置坐标\r\n\tvar tempX, tempY, tempX0, tempY0, tempX1, tempY1;\r\n\r\n\tvar canvasDragWrapper = $(settings.operationPanel + \" .\" + settings.canvasWrapperClass);\r\n\tvar dragBgContent = $(settings.operationPanel + \" .\" + settings.dragBgContentClass);\r\n\tvar canvasEditer = $(settings.operationPanel + \" .\" + settings.canvasEditerClass);\r\n\tvar operationPanelW = $(settings.operationPanel).width(),\r\n\t\toperationPanelH = $(settings.operationPanel).height();\r\n\r\n\t//外部容器宽高比\r\n\tvar parentAspectRatio = operationPanelW / operationPanelH;\r\n\r\n\t//初始化主框架样式\r\n\tcanvasDragWrapper.css({\r\n\t\t\"position\": \"relative\",\r\n\t\t\"width\": operationPanelW,\r\n\t\t\"height\": operationPanelH,\r\n\t\t\"border\": settings.canvasWrapperBorder\r\n\t});\r\n\tdragBgContent.css({\r\n\t\t\"position\": \"relative\",\r\n\t\t\"width\": operationPanelW,\r\n\t\t\"height\": operationPanelH\r\n\t});\r\n\tcanvasEditer.css({\r\n\t\t\"position\": \"absolute\",\r\n\t\t\"top\": 0,\r\n\t\t\"left\": 0,\r\n\t\t\"user-select\": \"none\",\r\n\t\t\"-webkit-user-select\": \"none\",\r\n\t\t\"-moz-user-select\": \"none\",\r\n\t\t\"-ms-user-select\": \"none\"\r\n\t});\r\n\tcanvasEditer.attr(\"width\", operationPanelW).attr(\"height\", operationPanelH);\r\n\r\n\tif (settings.dragBgSrc != \"\") {\r\n\t\t//创建新图片\r\n\t\tvar dragBgImage = new Image();\r\n\t\t//drag 操作的背景图\r\n\t\tdragBgImage.src = settings.dragBgSrc;\r\n\t\tdragBgImage.onload = function () {\r\n\t\t\t//等比压缩图片的宽高，使图片上下居中\r\n\t\t\tvar imgAspectRatio = dragBgImage.width / dragBgImage.height;\r\n\t\t\t$(dragBgImage).css(\"position\", \"absolute\");\r\n\t\t\tif (imgAspectRatio > parentAspectRatio) {\r\n\t\t\t\tdragBgImage.width = operationPanelW;\r\n\t\t\t\tdragBgImage.height = operationPanelW / imgAspectRatio;\r\n\t\t\t\t$(dragBgImage).css({\r\n\t\t\t\t\t\"top\": (operationPanelH - dragBgImage.height) / 2,\r\n\t\t\t\t\t\"left\": 0\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdragBgImage.height = operationPanelH;\r\n\t\t\t\tdragBgImage.width = dragBgImage.height * imgAspectRatio;\r\n\t\t\t\t$(dragBgImage).css({\r\n\t\t\t\t\t\"top\": 0,\r\n\t\t\t\t\t\"left\": (operationPanelW - dragBgImage.width) / 2\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//设置 Canvas 画布的宽高\r\n\t\t\tcanvasEditer.attr(\"width\", dragBgImage.width).attr(\"height\", dragBgImage.height);\r\n\t\t\tcanvasEditer.css({\r\n\t\t\t\t\"top\": (operationPanelH - dragBgImage.height) / 2,\r\n\t\t\t\t\"left\": (operationPanelW - dragBgImage.width) / 2\r\n\t\t\t});\r\n\r\n\t\t\t//手动设置了有效的 defaultPointInfo\r\n\t\t\tif (settings.defaultPointInfo.length == 8) {\r\n\t\t\t\tfor (var i = 0; i < settings.defaultPointInfo.length; i++) {\r\n\t\t\t\t\t_this.pointInfo[i] = settings.defaultPointInfo[i];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//若未设置有效的 defaultPointInfo，则根据图片缩放后的宽高初始化角点位置信息\r\n\t\t\t\t_this.pointInfo[0] = 0;\r\n\t\t\t\t_this.pointInfo[1] = 0;\r\n\t\t\t\t_this.pointInfo[2] = dragBgImage.width;\r\n\t\t\t\t_this.pointInfo[3] = 0\r\n\t\t\t\t_this.pointInfo[4] = dragBgImage.width;\r\n\t\t\t\t_this.pointInfo[5] = dragBgImage.height;\r\n\t\t\t\t_this.pointInfo[6] = 0;\r\n\t\t\t\t_this.pointInfo[7] = dragBgImage.height;\r\n\t\t\t}\r\n\r\n\t\t\t//绘制画板的初始形态\r\n\t\t\tdrawRect();\r\n\r\n\t\t};\r\n\t\t//将图片添加到画板里\r\n\t\tdragBgContent.append(dragBgImage);\r\n\t} else if (settings.defaultPointInfo.length == 8) {\r\n\t\tfor (var i = 0; i < settings.defaultPointInfo.length; i++) {\r\n\t\t\t_this.pointInfo[i] = settings.defaultPointInfo[i];\r\n\t\t}\r\n\t} else {\r\n\t\t//如果 dragBgSrc 和 defaultPointInfo 都未设置\r\n\t\t_this.pointInfo[0] = 0;\r\n\t\t_this.pointInfo[1] = 0;\r\n\t\t_this.pointInfo[2] = canvasEditer.width();\r\n\t\t_this.pointInfo[3] = 0\r\n\t\t_this.pointInfo[4] = canvasEditer.width();\r\n\t\t_this.pointInfo[5] = canvasEditer.height();\r\n\t\t_this.pointInfo[6] = 0;\r\n\t\t_this.pointInfo[7] = canvasEditer.height();\r\n\t}\r\n\r\n\t//绘制画板的初始形态\r\n\tdrawRect();\r\n\r\n\t//方法：绘制画布\r\n\tfunction drawRect() {\r\n\t\tvar ctx = canvasEditer[0].getContext('2d');\r\n\t\tctx.clearRect(0, 0, canvasEditer.width(), canvasEditer.height());\r\n\r\n\t\t//更新中点坐标信息\r\n\t\tgetMidPointInfo();\r\n\r\n\t\t//开始绘制画板里的内容\r\n\t\tctx.beginPath();\r\n\r\n\t\tif (drawErrorRect) {\r\n\t\t\tctx.strokeStyle = settings.errorLineColor;\r\n\t\t} else {\r\n\t\t\tctx.strokeStyle = settings.defaultLineColor;\r\n\t\t}\r\n\r\n\t\tctx.lineWidth = brushThickness;\r\n\t\tctx.moveTo(_this.pointInfo[0], _this.pointInfo[1]);\r\n\t\tctx.lineTo(_this.pointInfo[2], _this.pointInfo[3]);\r\n\t\tctx.lineTo(_this.pointInfo[4], _this.pointInfo[5]);\r\n\t\tctx.lineTo(_this.pointInfo[6], _this.pointInfo[7]);\r\n\t\tctx.closePath();\r\n\t\tctx.stroke();\r\n\r\n\t\tdrawArc(_this.pointInfo[0], _this.pointInfo[1], vertexOuterRadius, vertexInnerRadius);\r\n\t\tdrawArc(_this.pointInfo[2], _this.pointInfo[3], vertexOuterRadius, vertexInnerRadius);\r\n\t\tdrawArc(_this.pointInfo[4], _this.pointInfo[5], vertexOuterRadius, vertexInnerRadius);\r\n\t\tdrawArc(_this.pointInfo[6], _this.pointInfo[7], vertexOuterRadius, vertexInnerRadius);\r\n\r\n\t\tdrawArc(_this.midPointInfo[0], _this.midPointInfo[1], midpointOuterRadius, midpointInnerRadius);\r\n\t\tdrawArc(_this.midPointInfo[2], _this.midPointInfo[3], midpointOuterRadius, midpointInnerRadius);\r\n\t\tdrawArc(_this.midPointInfo[4], _this.midPointInfo[5], midpointOuterRadius, midpointInnerRadius);\r\n\t\tdrawArc(_this.midPointInfo[6], _this.midPointInfo[7], midpointOuterRadius, midpointInnerRadius);\r\n\t};\r\n\r\n\t//绘制圆形拖拽点\r\n\tfunction drawArc(a, b, c, d) {\r\n\t\tvar ctx = canvasEditer[0].getContext('2d');\r\n\t\tctx.beginPath();\r\n\t\tif (drawErrorRect) {\r\n\t\t\tctx.strokeStyle = settings.errorRadiusColor;\r\n\t\t} else {\r\n\t\t\tctx.strokeStyle = settings.defaultRadiusColor;\r\n\t\t}\r\n\t\tctx.lineWidth = 2 * (c - d); //半径等于圆心到圆边线中心的距离\r\n\t\tctx.arc(a, b, c, 0, Math.PI * 2);\r\n\t\tctx.stroke();\r\n\t\tctx.closePath();\r\n\r\n\t\tctx.beginPath();\r\n\t\tctx.fillStyle = settings.innerRadiusFillColor;\r\n\t\tctx.arc(a, b, d, 0, Math.PI * 2);\r\n\t\tctx.fill();\r\n\t\tctx.closePath();\r\n\t};\r\n\r\n\tcanvasEditer.on(\"mousedown\", function (e) {\r\n\t\tvar ctx = canvasEditer[0].getContext('2d');\r\n\t\tvar mouseX = (e || window.event).offsetX;\r\n\t\tvar mouseY = (e || window.event).offsetY;\r\n\r\n\t\t//根据鼠标落点计算响应拖拽的是哪个点（顶点和中点均可拖拽）\r\n\t\tfor (var i = 0; i < pointInductor.length; i++) {\r\n\t\t\tif (i < 4) {\r\n\t\t\t\t//判断四个角点是否在响应范围\r\n\t\t\t\tpointInductor[i] = (Math.abs(_this.pointInfo[2 * i] - mouseX) < 2 * vertexOuterRadius - vertexInnerRadius && Math.abs(_this.pointInfo[2 * i + 1] - mouseY) < 2 * vertexOuterRadius - vertexInnerRadius) ? true : false;\r\n\t\t\t} else {\r\n\t\t\t\t//判断四个中点是否在响应范围\r\n\t\t\t\tpointInductor[i] = (Math.abs(_this.midPointInfo[2 * (i - 4)] - mouseX) < 2 * midpointOuterRadius - midpointInnerRadius && Math.abs(_this.midPointInfo[2 * (i - 4) + 1] - mouseY) < 2 * midpointOuterRadius - midpointInnerRadius) ? true : false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//确保角点和中点中最多只有一个在响应拖拽的范围内\r\n\t\tfor (var i = pointInductor.length - 1; i > -1; i--) {\r\n\t\t\tif (i < 4 && pointInductor[i] == true) {\r\n\t\t\t\tfor (var j = 0; j < pointInductor.length; j++) {\r\n\t\t\t\t\tif (i != j) {\r\n\t\t\t\t\t\tpointInductor[j] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//缓存操作点被移动前的坐标（用于拖拽出凹四边形时的还原）\r\n\t\tfor (var i = 0; i < pointInductor.length; i++) {\r\n\t\t\tif (pointInductor[i] == true && !invalidShape) {\r\n\t\t\t\tcurDragPointIndex = i;\r\n\t\t\t\tif (i < 4) {\r\n\t\t\t\t\t//缓存角点坐标\r\n\t\t\t\t\ttempX = _this.pointInfo[2 * i];\r\n\t\t\t\t\ttempY = _this.pointInfo[2 * i + 1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//缓存中点坐标\r\n\t\t\t\t\ttempX0 = _this.pointInfo[2 * (i - 4)], tempY0 = _this.pointInfo[2 * (i - 4) + 1],\r\n\t\t\t\t\t\ttempX1 = _this.pointInfo[(2 * (i - 4) + 2) % 8], tempY1 = _this.pointInfo[(2 * (i - 4) + 3) % 8];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//鼠标移动响应事件\t\t\r\n\t\t$(this).mousemove(function (e) {\r\n\t\t\tvar mouseX = (e || window.event).offsetX;\r\n\t\t\tvar mouseY = (e || window.event).offsetY;\r\n\r\n\t\t\t//实时显示 mouse 坐标\r\n\t\t\t$(settings.mouseX).html(mouseX);\r\n\t\t\t$(settings.mouseY).html(mouseY);\r\n\r\n\t\t\tfor (var i = 0; i < pointInductor.length; i++) {\r\n\t\t\t\tif (i < 4 && pointInductor[i] == true) {\r\n\t\t\t\t\t$(this).css(\"cursor\", \"move\");\r\n\t\t\t\t\tctx.clearRect(0, 0, canvasEditer.width(), canvasEditer.height());\r\n\r\n\t\t\t\t\t_this.pointInfo[2 * i] = mouseX;\r\n\t\t\t\t\t_this.pointInfo[2 * i + 1] = mouseY;\r\n\r\n\t\t\t\t\t//更新斜率数组\r\n\t\t\t\t\tgetSlopeSide();\r\n\r\n\t\t\t\t\t//检查四个角点是否碰到画板边界\r\n\t\t\t\t\tcheckPointBorder();\r\n\r\n\t\t\t\t\tif (checkPointShape()) {\r\n\t\t\t\t\t\tdrawErrorRect = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawErrorRect = false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tdrawRect();\r\n\r\n\t\t\t\t} else if (i == 4 && pointInductor[4] == true) {\r\n\t\t\t\t\t$(this).css(\"cursor\", \"move\");\r\n\t\t\t\t\tctx.clearRect(0, 0, canvasEditer.width(), canvasEditer.height());\r\n\t\t\t\t\tvar tempa1 = _this.pointInfo[0],\r\n\t\t\t\t\t\ttempb1 = _this.pointInfo[1],\r\n\t\t\t\t\t\ttempa2 = _this.pointInfo[2],\r\n\t\t\t\t\t\ttempb2 = _this.pointInfo[3];\r\n\r\n\t\t\t\t\tvar a0 = slopeSide[0],\r\n\t\t\t\t\t\tb0 = -1,\r\n\t\t\t\t\t\tc0 = mouseY - slopeSide[0] * mouseX;\r\n\t\t\t\t\tvar a1 = slopeSide[1],\r\n\t\t\t\t\t\tb1 = -1,\r\n\t\t\t\t\t\tc1 = _this.pointInfo[3] - slopeSide[1] * _this.pointInfo[2];\r\n\t\t\t\t\tvar a2 = slopeSide[3],\r\n\t\t\t\t\t\tb2 = -1,\r\n\t\t\t\t\t\tc2 = _this.pointInfo[1] - slopeSide[3] * _this.pointInfo[0];\r\n\r\n\t\t\t\t\tif (slopeSide[0] == 0) {\r\n\t\t\t\t\t\tif (slopeSide[1] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = _this.pointInfo[2];\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = mouseY;\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = (mouseY - _this.pointInfo[3]) / slopeSide[1] + _this.pointInfo[2];\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[3] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = _this.pointInfo[0];\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = mouseY;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = (mouseY - _this.pointInfo[1]) / slopeSide[3] + _this.pointInfo[0];\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (slopeSide[0] == 'Infinity') {\r\n\t\t\t\t\t\tif (slopeSide[1] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = _this.pointInfo[3];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = slopeSide[1] * (mouseX - _this.pointInfo[2]) + _this.pointInfo[3];\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = mouseX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[3] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = _this.pointInfo[1];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = slopeSide[3] * (mouseX - _this.pointInfo[0]) + _this.pointInfo[1];\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = mouseX;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (slopeSide[1] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = _this.pointInfo[2] + (mouseX - _this.midPointInfo[0]);\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = _this.pointInfo[3];\r\n\t\t\t\t\t\t} else if (slopeSide[1] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = _this.pointInfo[2];\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = _this.pointInfo[3] + (mouseY - _this.midPointInfo[1]);\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = (b1 * c0 - b0 * c1) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = (a0 * c1 - a1 * c0) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (slopeSide[3] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = _this.pointInfo[0] + (mouseX - _this.midPointInfo[0]);\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = _this.pointInfo[1];\r\n\t\t\t\t\t\t} else if (slopeSide[3] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = _this.pointInfo[0];\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = _this.pointInfo[1] + (mouseY - _this.midPointInfo[1]);\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = (b2 * c0 - b0 * c2) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = (a0 * c2 - a2 * c0) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tcheckPointBorder();\r\n\t\t\t\t\tif (checkPointShape()) {\r\n\t\t\t\t\t\t//_this.editorCanvas.onmouseup();\r\n\t\t\t\t\t\tdrawErrorRect = true;\r\n\t\t\t\t\t\t_this.pointInfo[0] = tempa1;\r\n\t\t\t\t\t\t_this.pointInfo[1] = tempb1;\r\n\t\t\t\t\t\t_this.pointInfo[2] = tempa2;\r\n\t\t\t\t\t\t_this.pointInfo[3] = tempb2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawErrorRect = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdrawRect();\r\n\t\t\t\t} else if (i == 5 && pointInductor[5] == true) {\r\n\t\t\t\t\t$(this).css(\"cursor\", \"move\");\r\n\t\t\t\t\tctx.clearRect(0, 0, canvasEditer.width(), canvasEditer.height());\r\n\t\t\t\t\tvar tempa1 = _this.pointInfo[2],\r\n\t\t\t\t\t\ttempb1 = _this.pointInfo[3],\r\n\t\t\t\t\t\ttempa2 = _this.pointInfo[4],\r\n\t\t\t\t\t\ttempb2 = _this.pointInfo[5];\r\n\r\n\t\t\t\t\tvar a0 = slopeSide[1],\r\n\t\t\t\t\t\tb0 = -1,\r\n\t\t\t\t\t\tc0 = mouseY - slopeSide[1] * mouseX;\r\n\t\t\t\t\tvar a1 = slopeSide[0],\r\n\t\t\t\t\t\tb1 = -1,\r\n\t\t\t\t\t\tc1 = _this.pointInfo[3] - slopeSide[0] * _this.pointInfo[2];\r\n\t\t\t\t\tvar a2 = slopeSide[2],\r\n\t\t\t\t\t\tb2 = -1,\r\n\t\t\t\t\t\tc2 = _this.pointInfo[5] - slopeSide[2] * _this.pointInfo[4];\r\n\r\n\t\t\t\t\tif (slopeSide[1] == 0) {\r\n\t\t\t\t\t\tif (slopeSide[2] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = _this.pointInfo[4];\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = mouseY;\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = (mouseY - _this.pointInfo[5]) / slopeSide[2] + _this.pointInfo[4];\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[0] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = _this.pointInfo[2];\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = mouseY;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = (mouseY - _this.pointInfo[3]) / slopeSide[0] + _this.pointInfo[2];\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (slopeSide[1] == 'Infinity') {\r\n\t\t\t\t\t\tif (slopeSide[2] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = _this.pointInfo[5];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = slopeSide[2] * (mouseX - _this.pointInfo[4]) + _this.pointInfo[5];\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = mouseX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[0] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = _this.pointInfo[3];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = slopeSide[0] * (mouseX - _this.pointInfo[2]) + _this.pointInfo[3];\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = mouseX;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (slopeSide[2] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = _this.pointInfo[4] + (mouseX - _this.midPointInfo[2]);\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = _this.pointInfo[5];\r\n\t\t\t\t\t\t} else if (slopeSide[2] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = _this.pointInfo[4];\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = _this.pointInfo[5] + (mouseY - _this.midPointInfo[3]);\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = (b2 * c0 - b0 * c2) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = (a0 * c2 - a2 * c0) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (slopeSide[0] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = _this.pointInfo[2] + (mouseX - _this.midPointInfo[2]);\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = _this.pointInfo[3];\r\n\t\t\t\t\t\t} else if (slopeSide[0] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = _this.pointInfo[2];\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = _this.pointInfo[3] + (mouseY - _this.midPointInfo[3]);\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_this.pointInfo[2] = (b1 * c0 - b0 * c1) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t\t_this.pointInfo[3] = (a0 * c1 - a1 * c0) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcheckPointBorder();\r\n\t\t\t\t\tif (checkPointShape()) {\r\n\t\t\t\t\t\t//_this.editorCanvas.onmouseup();\r\n\t\t\t\t\t\tdrawErrorRect = true;\r\n\t\t\t\t\t\t_this.pointInfo[2] = tempa1;\r\n\t\t\t\t\t\t_this.pointInfo[3] = tempb1;\r\n\t\t\t\t\t\t_this.pointInfo[4] = tempa2;\r\n\t\t\t\t\t\t_this.pointInfo[5] = tempb2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawErrorRect = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdrawRect();\r\n\t\t\t\t} else if (i == 6 && pointInductor[6] == true) {\r\n\t\t\t\t\t$(this).css(\"cursor\", \"move\");\r\n\t\t\t\t\tctx.clearRect(0, 0, canvasEditer.width(), canvasEditer.height());\r\n\t\t\t\t\tvar tempa1 = _this.pointInfo[4],\r\n\t\t\t\t\t\ttempb1 = _this.pointInfo[5],\r\n\t\t\t\t\t\ttempa2 = _this.pointInfo[6],\r\n\t\t\t\t\t\ttempb2 = _this.pointInfo[7];\r\n\r\n\t\t\t\t\tvar a0 = slopeSide[2],\r\n\t\t\t\t\t\tb0 = -1,\r\n\t\t\t\t\t\tc0 = mouseY - slopeSide[2] * mouseX;\r\n\t\t\t\t\tvar a1 = slopeSide[1],\r\n\t\t\t\t\t\tb1 = -1,\r\n\t\t\t\t\t\tc1 = _this.pointInfo[5] - slopeSide[1] * _this.pointInfo[4];\r\n\t\t\t\t\tvar a2 = slopeSide[3],\r\n\t\t\t\t\t\tb2 = -1,\r\n\t\t\t\t\t\tc2 = _this.pointInfo[7] - slopeSide[3] * _this.pointInfo[6];\r\n\r\n\t\t\t\t\tif (slopeSide[2] == 0) {\r\n\t\t\t\t\t\tif (slopeSide[3] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = _this.pointInfo[6];\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = mouseY;\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = (mouseY - _this.pointInfo[7]) / slopeSide[3] + _this.pointInfo[6];\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[1] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = _this.pointInfo[4];\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = mouseY;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = (mouseY - _this.pointInfo[5]) / slopeSide[1] + _this.pointInfo[4];\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (slopeSide[2] == 'Infinity') {\r\n\t\t\t\t\t\tif (slopeSide[3] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = _this.pointInfo[7];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = slopeSide[3] * (mouseX - _this.pointInfo[6]) + _this.pointInfo[7];\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = mouseX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[1] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = _this.pointInfo[5];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = slopeSide[1] * (mouseX - _this.pointInfo[4]) + _this.pointInfo[5];\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = mouseX;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (slopeSide[3] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = _this.pointInfo[6] + (mouseX - _this.midPointInfo[4]);\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = _this.pointInfo[7];\r\n\t\t\t\t\t\t} else if (slopeSide[3] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = _this.pointInfo[6];\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = _this.pointInfo[7] + (mouseY - _this.midPointInfo[5]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = (b2 * c0 - b0 * c2) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = (a0 * c2 - a2 * c0) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (slopeSide[1] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = _this.pointInfo[4] + (mouseX - _this.midPointInfo[4]);\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = _this.pointInfo[5];\r\n\t\t\t\t\t\t} else if (slopeSide[1] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = _this.pointInfo[4];\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = _this.pointInfo[5] + (mouseY - _this.midPointInfo[5]);\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t_this.pointInfo[4] = (b1 * c0 - b0 * c1) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t\t_this.pointInfo[5] = (a0 * c1 - a1 * c0) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcheckPointBorder();\r\n\t\t\t\t\tif (checkPointShape()) {\r\n\t\t\t\t\t\t//_this.editorCanvas.onmouseup();\r\n\t\t\t\t\t\tdrawErrorRect = true;\r\n\t\t\t\t\t\t_this.pointInfo[4] = tempa1;\r\n\t\t\t\t\t\t_this.pointInfo[5] = tempb1;\r\n\t\t\t\t\t\t_this.pointInfo[6] = tempa2;\r\n\t\t\t\t\t\t_this.pointInfo[7] = tempb2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawErrorRect = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdrawRect();\r\n\t\t\t\t} else if (i == 7 && pointInductor[7] == true) {\r\n\t\t\t\t\t$(this).css(\"cursor\", \"move\");\r\n\t\t\t\t\tctx.clearRect(0, 0, canvasEditer.width(), canvasEditer.height());\r\n\t\t\t\t\tvar tempa1 = _this.pointInfo[6],\r\n\t\t\t\t\t\ttempb1 = _this.pointInfo[7],\r\n\t\t\t\t\t\ttempa2 = _this.pointInfo[0],\r\n\t\t\t\t\t\ttempb2 = _this.pointInfo[1];\r\n\r\n\t\t\t\t\tvar a0 = slopeSide[3],\r\n\t\t\t\t\t\tb0 = -1,\r\n\t\t\t\t\t\tc0 = mouseY - slopeSide[3] * mouseX;\r\n\t\t\t\t\tvar a1 = slopeSide[2],\r\n\t\t\t\t\t\tb1 = -1,\r\n\t\t\t\t\t\tc1 = _this.pointInfo[7] - slopeSide[2] * _this.pointInfo[6];\r\n\t\t\t\t\tvar a2 = slopeSide[0],\r\n\t\t\t\t\t\tb2 = -1,\r\n\t\t\t\t\t\tc2 = _this.pointInfo[1] - slopeSide[0] * _this.pointInfo[0];\r\n\r\n\t\t\t\t\tif (slopeSide[3] == 0) {\r\n\t\t\t\t\t\tif (slopeSide[0] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = _this.pointInfo[0];\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = mouseY;\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = (mouseY - _this.pointInfo[1]) / slopeSide[0] + _this.pointInfo[0];\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[2] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = _this.pointInfo[6];\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = mouseY;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = (mouseY - _this.pointInfo[7]) / slopeSide[2] + _this.pointInfo[6];\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = mouseY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (slopeSide[3] == 'Infinity') {\r\n\t\t\t\t\t\tif (slopeSide[0] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = _this.pointInfo[1];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = slopeSide[0] * (mouseX - _this.pointInfo[0]) + _this.pointInfo[1];\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = mouseX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (slopeSide[2] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = mouseX;\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = _this.pointInfo[7];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = slopeSide[2] * (mouseX - _this.pointInfo[6]) + _this.pointInfo[7];\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = mouseX;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (slopeSide[0] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = _this.pointInfo[0] + (mouseX - _this.midPointInfo[6]);\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = _this.pointInfo[1];\r\n\t\t\t\t\t\t} else if (slopeSide[0] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = _this.pointInfo[0];\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = _this.pointInfo[1] + (mouseY - _this.midPointInfo[7]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[0] = (b2 * c0 - b0 * c2) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t\t_this.pointInfo[1] = (a0 * c2 - a2 * c0) / (a2 * b0 - a0 * b2);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (slopeSide[2] == 0) {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = _this.pointInfo[6] + (mouseX - _this.midPointInfo[6]);\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = _this.pointInfo[7];\r\n\t\t\t\t\t\t} else if (slopeSide[2] == 'Infinity') {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = _this.pointInfo[6];\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = _this.pointInfo[7] + (mouseY - _this.midPointInfo[7]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_this.pointInfo[6] = (b1 * c0 - b0 * c1) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t\t_this.pointInfo[7] = (a0 * c1 - a1 * c0) / (a1 * b0 - a0 * b1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcheckPointBorder();\r\n\t\t\t\t\tif (checkPointShape()) {\r\n\t\t\t\t\t\t//_this.editorCanvas.onmouseup();\r\n\t\t\t\t\t\tdrawErrorRect = true;\r\n\t\t\t\t\t\t_this.pointInfo[6] = tempa1;\r\n\t\t\t\t\t\t_this.pointInfo[7] = tempb1;\r\n\t\t\t\t\t\t_this.pointInfo[0] = tempa2;\r\n\t\t\t\t\t\t_this.pointInfo[1] = tempb2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrawErrorRect = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tdrawRect();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n\r\n\tcanvasEditer.on(\"mouseup\", function (e) {\r\n\t\t$(this).css(\"cursor\", \"default\");\r\n\t\t//$(this).mousemove() = null;\r\n\t\t$(this).off(\"mousemove\");\r\n\r\n\t\tif (curDragPointIndex < 4) {\r\n\t\t\tif (invalidShape) {\r\n\t\t\t\t_this.pointInfo[2 * curDragPointIndex] = tempX;\r\n\t\t\t\t_this.pointInfo[2 * curDragPointIndex + 1] = tempY;\r\n\r\n\t\t\t\tgetSlopeSide();\r\n\t\t\t\tdrawErrorRect = false;\r\n\t\t\t\tdrawRect();\r\n\t\t\t\tinvalidShape = false;\r\n\t\t\t};\r\n\t\t} else if (curDragPointIndex >= 4) {\r\n\t\t\tif (invalidShape) {\r\n\t\t\t\tvar i = curDragPointIndex;\r\n\t\t\t\t_this.pointInfo[2 * (i - 4)] = tempX0, _this.pointInfo[2 * (i - 4) + 1] = tempY0,\r\n\t\t\t\t\t_this.pointInfo[(2 * (i - 4) + 2) % 8] = tempX1, _this.pointInfo[(2 * (i - 4) + 3) % 8] = tempY1;\r\n\t\t\t\tgetSlopeSide();\r\n\t\t\t\tdrawErrorRect = false;\r\n\t\t\t\tdrawRect();\r\n\t\t\t\tinvalidShape = false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar p = _this.pointInfo;\r\n\t\tvar x0 = p[0],\r\n\t\t\ty0 = p[1],\r\n\t\t\tx1 = p[2],\r\n\t\t\ty1 = p[3],\r\n\t\t\tx2 = p[4],\r\n\t\t\ty2 = p[5],\r\n\t\t\tx3 = p[6],\r\n\t\t\ty3 = p[7];\r\n\r\n\t\twhile (x0 >= x1 || y1 >= y2 || x2 <= x3 || y3 <= y0 || Math.abs((y1 + y2 - y0 - y3) / (x1 + x2 - x3 - x0)) > Math.abs((y2 + y3 - y0 - y1) / (x2 + x3 - x0 - x1))) {\r\n\t\t\tvar _x = x0;\r\n\t\t\tx0 = x1, x1 = x2, x2 = x3, x3 = _x;\r\n\t\t\tvar _y = y0;\r\n\t\t\ty0 = y1, y1 = y2, y2 = y3, y3 = _y;\r\n\t\t}\r\n\t\tp[0] = x0, p[1] = y0,\r\n\t\t\tp[2] = x1, p[3] = y1,\r\n\t\t\tp[4] = x2, p[5] = y2,\r\n\t\t\tp[6] = x3, p[7] = y3;\r\n\r\n\t});\r\n\r\n\tcanvasEditer.on(\"mouseout\", function (e) {\r\n\t\t$(this).css(\"cursor\", \"default\");\r\n\t\t//$(this).mousemove() = null;\r\n\t\t$(this).off(\"mousemove\");\r\n\t\t//$(this).mouseup();\r\n\t});\r\n\r\n\tcanvasEditer.on(\"mouseover\", function (e) {\r\n\t\t$(this).css(\"cursor\", \"default\");\r\n\t\t//$(this).mousemove() = null;\r\n\t\t$(this).off(\"mousemove\");\r\n\t\t//$(this).mouseup();\r\n\t});\r\n\r\n\t//更新中点坐标数组\r\n\tfunction getMidPointInfo() {\r\n\t\tvar p = _this.pointInfo;\r\n\t\t_this.midPointInfo[0] = (p[0] + p[2]) / 2;\r\n\t\t_this.midPointInfo[1] = (p[1] + p[3]) / 2;\r\n\r\n\t\t_this.midPointInfo[2] = (p[2] + p[4]) / 2;\r\n\t\t_this.midPointInfo[3] = (p[3] + p[5]) / 2;\r\n\r\n\t\t_this.midPointInfo[4] = (p[4] + p[6]) / 2;\r\n\t\t_this.midPointInfo[5] = (p[5] + p[7]) / 2;\r\n\r\n\t\t_this.midPointInfo[6] = (p[6] + p[0]) / 2;\r\n\t\t_this.midPointInfo[7] = (p[7] + p[1]) / 2;\r\n\t\treturn _this.midPointInfo;\r\n\t};\r\n\r\n\t//计算四条边的斜率\r\n\tfunction getSlopeSide() {\r\n\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\tif (i < 3) {\r\n\t\t\t\tif ((_this.pointInfo[2 * i + 3] - _this.pointInfo[2 * i + 1]) == 0 && (_this.pointInfo[2 * (i + 1)] - _this.pointInfo[2 * i]) == 0) {\r\n\t\t\t\t\tslopeSide[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tslopeSide[i] = (_this.pointInfo[2 * i + 3] - _this.pointInfo[2 * i + 1]) / (_this.pointInfo[2 * (i + 1)] - _this.pointInfo[2 * i]);\r\n\t\t\t\t};\r\n\r\n\t\t\t} else if (i == 3) {\r\n\t\t\t\tif ((_this.pointInfo[7] - _this.pointInfo[1]) == 0 && (_this.pointInfo[6] - _this.pointInfo[0]) == 0) {\r\n\t\t\t\t\tslopeSide[3] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tslopeSide[3] = (_this.pointInfo[7] - _this.pointInfo[1]) / (_this.pointInfo[6] - _this.pointInfo[0]);\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn slopeSide;\r\n\t};\r\n\r\n\t//检查四个角点是否触及画板边界\r\n\tfunction checkPointBorder() {\r\n\t\tfor (var i = 0; i < _this.pointInfo.length / 2; i++) {\r\n\t\t\tif (_this.pointInfo[2 * i] < 0) {\r\n\t\t\t\t_this.pointInfo[2 * i] = 0;\r\n\t\t\t} else if (_this.pointInfo[2 * i] > canvasEditer.width() - 1) {\r\n\t\t\t\t_this.pointInfo[2 * i] = canvasEditer.width() - 1;\r\n\t\t\t}\r\n\t\t\tif (_this.pointInfo[2 * i + 1] < 0) {\r\n\t\t\t\t_this.pointInfo[2 * i + 1] = 0;\r\n\t\t\t} else if (_this.pointInfo[2 * i + 1] > canvasEditer.height() - 1) {\r\n\t\t\t\t_this.pointInfo[2 * i + 1] = canvasEditer.height() - 1;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t//检查四个角点构成的四边形是否合法\r\n\tfunction checkPointShape() {\r\n\t\tvar p = _this.pointInfo;\r\n\t\tvar x0 = p[0],\r\n\t\t\ty0 = p[1],\r\n\t\t\tx1 = p[2],\r\n\t\t\ty1 = p[3],\r\n\t\t\tx2 = p[4],\r\n\t\t\ty2 = p[5],\r\n\t\t\tx3 = p[6],\r\n\t\t\ty3 = p[7];\r\n\r\n\t\t// 0 = A*x + B*y + C\r\n\t\t// 0 = (y2-y0)*x + (x0-x2)*y + x2*y0-x0*y2\r\n\t\tvar a0 = y2 - y0,\r\n\t\t\tb0 = x0 - x2,\r\n\t\t\tc0 = x2 * y0 - x0 * y2;\r\n\t\t// 0 = (y3-y1)*x + (x1-x3)*y + x3*y1-x1*y3\r\n\t\tvar a1 = y3 - y1,\r\n\t\t\tb1 = x1 - x3,\r\n\t\t\tc1 = x3 * y1 - x1 * y3;\r\n\r\n\t\tif (!((a0 * x1 + b0 * y1 + c0) > 0 && (a0 * x3 + b0 * y3 + c0) < 0 &&\r\n\t\t\t\t(a1 * x0 + b1 * y0 + c1) < 0 && (a1 * x2 + b1 * y2 + c1) > 0)) {\r\n\t\t\tinvalidShape = true;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tinvalidShape = false;\r\n\t\treturn false;\r\n\t};\r\n}\r\n\r\n//获取四个角点坐标信息\r\ncanvasDrag.prototype.getPointInfo = function () {\r\n\tconsole.log(this.pointInfo, \"this.pointInfo\")\r\n\tconsole.log(this.midPointInfo, \"this.midPointInfo\")\r\n\treturn this.pointInfo;\r\n}\r\n\r\nfunction createCanvasDrag(cfg){\r\n    var _canvasDrag = new canvasDrag(cfg);\r\n    return _canvasDrag;\r\n}\r\n\r\nexport default createCanvasDrag;","<template>\r\n  <div id=\"main\">\r\n    <a href=\"javascript:void(0)\" @click=\"fuc_getPointInfo\">getPointInfo</a>\r\n    <div id=\"canvasdrag\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport createCanvasDrag from \"alvin-canvasdrag\";\r\nexport default {\r\n  name: \"CanvasDrag\",\r\n  data() {\r\n    return {\r\n      canvasdrag: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    var cfg = {\r\n      operationPanel: \"#canvasdrag\",\r\n      defaultPointInfo: [58, 189, 440, 87, 475, 211, 92, 314],\r\n    };\r\n    this.canvasdrag = createCanvasDrag(cfg);\r\n  },\r\n  methods: {\r\n    fuc_getPointInfo() {\r\n      if (!this.canvasdrag) {\r\n        return false;\r\n      }\r\n\r\n      this.canvasdrag.getPointInfo();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n#canvasdrag {\r\n  width: 600px;\r\n  height: 400px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3fd8dbd2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3fd8dbd2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3fd8dbd2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}