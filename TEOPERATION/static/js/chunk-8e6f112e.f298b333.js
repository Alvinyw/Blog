(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e6f112e","chunk-469a47b3"],{3455:function(t,e,a){},4096:function(t,e,a){"use strict";var i=a("3455"),n=a.n(i);n.a},6070:function(t,e,a){"use strict";a.r(e);a("c5f6"),a("28a5");var i=a("6612"),n=a.n(i),o=!1;e["default"]={color:["#F63A31"],title:{text:""},tooltip:{trigger:"axis",confine:!1,padding:[16,23,18,16],textStyle:{color:"#333"},backgroundColor:"rgba(255,255,255,0.7)",extraCssText:"box-shadow: 0px 1px 6px 0px rgba(0,0,0,0.18)",formatter:function(t){o||(console.log(t[0]),o=!0);var e=t[0],a=e.axisValue,i=e.value,r=e.marker,s=a.split("月")[0],l=a.split("月")[1].slice(0,-1),c=["日","一","二","三","四","五","六"];return s=Number(s)-1,l=new Date(2020,s,l).getDay(),i=n()(i).format("0,0"),"".concat(a,"(周").concat(c[l],")<br/>").concat(r," 注册用户数：").concat(i)}},grid:{left:50,right:30,bottom:20},yAxis:{type:"value",axisTick:{show:!1},splitNumber:5,splitLine:{lineStyle:{color:"#EFEFEF"}},axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#D9D9D9"}}},xAxis:{boundaryGap:!1,axisTick:{show:!1},axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#D9D9D9"}},data:[]},series:{type:"line",name:"流量趋势",symbol:"circle",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#fffafa"},{offset:1,color:"#ffdad8"}],global:!1}},data:[]}}},6751:function(t,e,a){},"760d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"asset-view"},[a("div",{staticClass:"asset-data"},[a("el-dropdown",{staticClass:"menu",attrs:{trigger:"click"},on:{command:t.onTitleChange}},[a("el-button",{staticClass:"menu-button",attrs:{type:"default"}},[t._v(t._s(t.selectedItem.label))]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.titleList,function(e){return a("el-dropdown-item",{key:e.prop,attrs:{command:e}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),a("el-date-picker",{staticClass:"datepicker",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":!0,clearable:!1,"picker-options":t.pickerOptions},on:{change:t.onTimeChange},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}}),t._v(" "),a("div",{staticClass:"placeholder-ele"}),t._v(" "),a("h3",{staticClass:"amount"},[t._v(t._s(t.selectedItem.label)+": "+t._s(t.$lib.toPercent(t.currentItemAmount)))]),t._v(" "),a("span",{staticClass:"tips"},[t._v("更新至昨日")])],1),t._v(" "),a("div",{staticClass:"chart-data"},[a("div",{staticClass:"chart-title"},[a("h4",[t._v(t._s(t.selectedItem.label))])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chartLoading,expression:"chartLoading"}],staticClass:"chart-content",attrs:{id:"basicAssetChart"}})]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticClass:"table-data"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,"tooltip-effect":"light","header-cell-style":{background:"#f5f5f5",color:"#333"}}},t._l(t.columns,function(e,i){return a("el-table-column",{key:i,attrs:{prop:e["prop"],label:e["label"],width:e["width"],"min-width":e["minWidth"],"show-overflow-tooltip":e["showOverflowTooltip"]},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s("date"===e["prop"]?a.row.date+" ("+t.getDayOfWeek(a.row.date)+")":t.$lib.toPercent(a.row[e["prop"]])))]}}],null,!0)})}),1),t._v(" "),a("DataPagination",{attrs:{"pagination-data":t.paginationData,"page-sizes":t.pageSizes},on:{"update:paginationData":function(e){t.paginationData=e},"update:pagination-data":function(e){t.paginationData=e},resetData:t.resetData}})],1)])},n=[],o=a("db72"),r=(a("c5f6"),a("28a5"),a("ac6a"),a("96cf"),a("3b8d")),s=a("313e"),l=a.n(s),c=a("6070"),u=(a("6612"),!1),p={name:"EvaluationDataDetail",props:{productData:{type:Object,default:function(){return{titleList:[],columns:[]}}}},data:function(){return{currentYear:"2020",selectedItem:"",currentItemAmount:"",titleList:[],columns:[],chart:null,timer:!1,chartLoading:!1,tableLoading:!1,paginationData:{pageIndex:1,pageSize:10,dataCount:0},pageSizes:[10,15,20,31],oriYesterdayData:[],oriEvaluationData:[],list:[],chartData:{category:[],data:[]},arr:["flashPay","wallet","loan"],range:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近两周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-12096e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]}}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.range=this.getLastWeek(),this.titleList=this.productData["titleList"],this.columns=this.productData["columns"],this.titleList.forEach(function(t){t.prop===e.$route.query.item&&(e.selectedItem=t)}),t.next=6,this.getEvaluationData();case 6:return t.next=8,this.getYesterdayData();case 8:window.addEventListener("resize",this.onResize);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{getYesterdayData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.productData.productCode,this.$api.analysis.getYesterdayData({productCode:e}).then(function(t){a.oriYesterdayData=t.data?t.data[0]:[],a.currentItemAmount=a.oriYesterdayData[a.selectedItem.prop]}).catch(function(t){a.$message.error(t.message)});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getEvaluationData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.tableLoading=!0,e=this.productData.productCode,this.$api.analysis.getBaseData({productCode:e,startDate:this.range[0],endDate:this.range[1]}).then(function(t){a.splitResponseData(t.data||[]),a.tableLoading=!1}).catch(function(t){a.tableLoading=!1,a.$message.error(t.message)});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),splitResponseData:function(t){var e=this;this.oriEvaluationData=[],t.forEach(function(t){var a=JSON.parse(t.content);e.oriEvaluationData.push(a.report)}),this.selectTableData(this.oriEvaluationData),this.selectChartData(this.oriEvaluationData)},selectTableData:function(t){var e=this,a=[],i=this.paginationData;i.dataCount=t.length,t.forEach(function(t,n){var o=(i.pageIndex-1)*i.pageSize-1<n&&i.pageIndex*i.pageSize>n;if(o){var r={};e.columns.forEach(function(e){r[e.prop]=t[e.prop]}),a.push(r)}}),this.list=a},selectChartData:function(t){var e=this;t.length<1||(this.chartData.category=[],this.chartData.data=[],this.currentYear=t[0].date.split("-")[0],t.forEach(function(t){var a=t.date.split("-");e.chartData.category.push(a[1]+"月"+a[2]+"日"),e.chartData.data.push(t[e.selectedItem.prop])}),this.initChart())},getValueByDate:function(t){var e=this,a="",i=t.split("月")[0],n=t.split("月")[1].slice(0,-1);return this.oriEvaluationData.forEach(function(t){if(-1!==t.date.indexOf(i)&&-1!==t.date.indexOf(n)){var o=e.selectedItem.prop.split("_");a=[t[o[0]],t[o[1]]]}}),a},getLastWeek:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[this.$lib.formatYMDDate(e),this.$lib.formatYMDDate(t)]},getDayOfWeek:function(t){var e=t.split("-"),a=["日","一","二","三","四","五","六"],i=new Date(e[0],e[1]-1,e[2]).getDay();return"周"+a[i]},onTitleChange:function(t){console.log("onTitleChange",t),this.selectedItem=t,this.currentItemAmount=this.oriYesterdayData[this.selectedItem.prop],this.selectChartData(this.oriEvaluationData)},onTimeChange:function(){console.log(this.range,"range-1");var t=new Date(this.range[1]).getTime()-new Date(this.range[0]).getTime();if(t/3600/1e3/24>183){var e=new Date(this.range[1]),a=new Date(e.setTime(e.getTime()-158112e5)),i=a.getFullYear()+"-"+Number(a.getMonth()+1)+"-"+a.getDate();this.range=[i,this.range[1]]}console.log(this.range,"range-2"),this.getEvaluationData()},initChart:function(){var t=this;this.chartLoading=!0,this.chart=l.a.init(document.getElementById("basicAssetChart")),console.log(this.selectedItem,"initChart");var e={color:this.productData.color,title:{text:""},grid:Object(o["a"])({},c["default"].grid,{left:80,right:50,bottom:50}),xAxis:Object(o["a"])({},c["default"].xAxis,{data:this.chartData["category"]}),yAxis:Object(o["a"])({},c["default"].yAxis,{axisLabel:{color:"#666666",formatter:function(t){return(100*t).toFixed(2)+"%"}}}),series:Object(o["a"])({},c["default"].series,{name:this.selectedItem.label,data:this.chartData["data"],areaStyle:{color:Object(o["a"])({},c["default"].series.areaStyle.color,{colorStops:[{offset:0,color:this.productData.linear[0]},{offset:1,color:this.productData.linear[1]}]})}}),tooltip:Object(o["a"])({},c["default"].tooltip,{formatter:function(e){u||(console.log(e[0]),u=!0);var a=e[0],i=a.axisValue,n=a.value,o=a.marker,r=i.split("月")[0],s=i.split("月")[1].slice(0,-1),l=["日","一","二","三","四","五","六"];r=Number(r)-1,s=new Date(t.currentYear,r,s).getDay();var c=t.selectedItem.label.split("/"),p=t.getValueByDate(i),d="".concat(i,"(周").concat(l[s],")"),h="".concat(o," ").concat(c[0],": ").concat(p[0]),f="".concat(o," ").concat(c[1],": ").concat(p[1]),g="".concat(o," ").concat(t.selectedItem.label,"：").concat(t.$lib.toPercent(n));return"".concat(d,"<br/>").concat(h,"<br>").concat(f,"<br>").concat(g)}})};this.chart.setOption(Object(o["a"])({},c["default"],{},e));var a=this;setTimeout(function(){a.chartLoading=!1},250)},onResize:function(){if(!this.timer){var t=this;t.timer=!0,setTimeout(function(){t.timer=!1,t.chart.resize()},200)}},resetData:function(){var t=this;this.tableLoading=!0,this.selectTableData(this.oriEvaluationData),setTimeout(function(){t.tableLoading=!1},250)}}},d=p,h=(a("c666"),a("4096"),a("2877")),f=Object(h["a"])(d,i,n,!1,null,"26def6c1",null);e["default"]=f.exports},"8fe4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("EvaluationDataDetail",{attrs:{"product-data":t.flashPay}})},n=[],o=a("760d"),r={name:"FlashPayEvaluationDataDetail",components:{EvaluationDataDetail:o["default"]},data:function(){return{flashPay:{titleList:[{prop:"totalCheck_totalRegister",label:"总实名数/总注册数"},{prop:"totalAuth_totalCheck",label:"总开户绑卡数/总实名数"},{prop:"totalAuth_totalAccount",label:"总开户绑卡数/开户总数"},{prop:"totalRegister_totalPv",label:"总注册数/PV数"},{prop:"totalCheck_totalPv",label:"总实名数/PV数"},{prop:"totalAuth_totalPv",label:"总开户绑卡数/PV数"}],columns:[{prop:"date",label:"日期"},{prop:"totalCheck_totalRegister",label:"总实名数/总注册数"},{prop:"totalAuth_totalCheck",label:"总开户绑卡数/总实名数"},{prop:"totalAuth_totalAccount",label:"总开户绑卡数/开户总数"},{prop:"totalRegister_totalPv",label:"总注册数/PV数"},{prop:"totalCheck_totalPv",label:"总实名数/PV数"},{prop:"totalAuth_totalPv",label:"总开户绑卡数/PV数"}],productCode:"10010",color:["#975FE4"],linear:["#EBDCFF","#FCFAFF"]}}}},s=r,l=a("2877"),c=Object(l["a"])(s,i,n,!1,null,null,null);e["default"]=c.exports},c666:function(t,e,a){"use strict";var i=a("6751"),n=a.n(i);n.a}}]);