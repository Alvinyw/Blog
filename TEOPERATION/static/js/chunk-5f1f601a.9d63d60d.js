(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f1f601a"],{"1e5c":function(e,t,r){},"4f33":function(e,t,r){"use strict";var o=r("1e5c"),n=r.n(o);n.a},"6fa7":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"queryCondition",staticClass:"customer-form queryCondition",attrs:{"label-width":"100px",rules:e.rules,model:e.queryCondition}},[r("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},[r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"客户编码",prop:"code","label-width":"80px"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"19","show-word-limit":""},model:{value:e.queryCondition.code,callback:function(t){e.$set(e.queryCondition,"code",t)},expression:"queryCondition.code"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"注册手机号",prop:"phone",error:e.phoneNumberError}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"11","show-word-limit":""},on:{change:function(t){e.phoneNumberError=""}},model:{value:e.queryCondition.phone,callback:function(t){e.$set(e.queryCondition,"phone",t)},expression:"queryCondition.phone"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.queryCondition.name,callback:function(t){e.$set(e.queryCondition,"name",t)},expression:"queryCondition.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"身份证号",prop:"id","label-width":"80px",error:e.idNumberError}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"20","show-word-limit":""},on:{change:function(t){e.idNumberError=""}},model:{value:e.queryCondition.id,callback:function(t){e.$set(e.queryCondition,"id",t)},expression:"queryCondition.id"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"产品分类",prop:"productType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearchProduct},on:{change:e.getProduceList},model:{value:e.queryCondition.productType,callback:function(t){e.$set(e.queryCondition,"productType",t)},expression:"queryCondition.productType"}},e._l(e.$settings.product.types,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productCode",error:e.productNameError}},[r("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.isSearchProduct,expression:"isSearchProduct"}],staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请先选择产品类型",disabled:e.isSearchProduct},on:{change:function(t){e.productNameError=""}},model:{value:e.queryCondition.productCode,callback:function(t){e.$set(e.queryCondition,"productCode",t)},expression:"queryCondition.productCode"}},e._l(e.productNameList,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"所属商户",prop:"merchantId","label-width":"80px"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearchMerchant},model:{value:e.queryCondition.merchantId,callback:function(t){e.$set(e.queryCondition,"merchantId",t)},expression:"queryCondition.merchantId"}},e._l(e.merchantList,function(e){return r("el-option",{key:e.id,attrs:{label:e.shortName,value:e.id}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"创建时间",prop:"beginTime"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.createdTime,callback:function(t){e.createdTime=t},expression:"createdTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"queryBtn",staticStyle:{"text-align":"right"},attrs:{size:"large"}},[r("el-button",{on:{click:function(t){return e.resetForm("queryCondition")}}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.onSearch("queryCondition")}}},[e._v("查询")])],1)],1)],1)],1)},n=[],i=(r("c5f6"),r("96cf"),r("3b8d")),a={name:"CustomerForm",props:{loading:{type:Boolean,default:function(){return!1}}},data:function(){return{rules:{},queryCondition:{code:"",name:"",phone:"",id:"",merchantId:"",beginTime:"",endTime:"",productType:"",productCode:""},isSearchMerchant:!1,merchantList:[],isSearchProduct:!1,productNameList:[],productNameError:"",phoneNumberError:"",idNumberError:""}},computed:{createdTime:{get:function(){return[this.queryCondition.beginTime,this.queryCondition.endTime]},set:function(e){this.queryCondition.beginTime=e?e[0]:"",this.queryCondition.endTime=e?e[1]:""}}},mounted:function(){this.fetchData()},methods:{validatePhoneNumber:function(e){return!e||/^[1][34578]\d{9}$/.test(e)&&/^[1-9]\d*$/.test(e)&&11===e.length?(this.phoneNumberError="",!0):(this.phoneNumberError="手机号码不符合规范",!1)},validateIdNo:function(e){return e&&(!/\d{17}[\d|x]|\d{15}/.test(e)||15!==e.length&&18!==e.length)?(this.idNumberError="身份证号码不符合规范",!1):(this.idNumberError="",!0)},fetchData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getMerchantList(),t=this.$session.getQueryConditions(),t&&(this.queryCondition=t,r=t.productType,o=t.productCode,r&&(this.getProduceList(r),this.queryCondition.productCode=o));case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getMerchantList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isSearchMerchant=!0,e.prev=1,e.next=4,this.$api.merchant.getAllMerchant();case 4:t=e.sent,this.isSearchMerchant=!1,200===Number(t["code"])?this.merchantList=t["data"]||[]:this.$message.error(t["message"]),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.isSearchMerchant=!1,this.$message.error(e.t0["message"]);case 13:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}(),getProduceList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.queryCondition.productCode="",this.isSearchProduct=!0,e.next=4,this.$api.product.getProductByType({type:t});case 4:r=e.sent,this.isSearchProduct=!1,200===Number(r["code"])?this.productNameList=r["data"]:this.$message.error(r["message"]);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(e){this.$refs[e].resetFields(),this.$refs[e].clearValidate()},onSearch:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("表单验证不合法"),!1;t.$emit("onSubmit",t.queryCondition)})}}},s=a,c=(r("4f33"),r("2877")),l=Object(c["a"])(s,o,n,!1,null,"2a364282",null);t["default"]=l.exports}}]);