(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e68f192","chunk-4e68f192"],{"2a06":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",staticClass:"dynamic-form",attrs:{"label-width":"70px","label-position":"left",model:e.form}},[r("el-row",[r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"产品分类",prop:"category",rules:{required:!0,message:"请选择产品类型"}}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearch},on:{change:e.getProduceList},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.productCategoryList,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"产品名称",prop:"productCode",rules:{required:!0,message:"请选择产品名称"}}},[r("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.productNameLoading,expression:"productNameLoading"}],staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearch},on:{change:e.getReports},model:{value:e.form.productCode,callback:function(t){e.$set(e.form,"productCode",t)},expression:"form.productCode"}},e._l(e.productNameList,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),e._v(" "),e.isMerchant&&e.cooperationProductList.length?r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"合作产品",prop:"coopId",rules:[{required:!0,message:"请选择合作产品"}]}},[r("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.reportLoading,expression:"reportLoading"}],staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearch},model:{value:e.form.coopId,callback:function(t){e.$set(e.form,"coopId",t)},expression:"form.coopId"}},e._l(e.cooperationProductList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1):e._e(),e._v(" "),r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"数据报表",prop:"report",rules:{required:!0,message:"请选择数据报表"}}},[r("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.reportLoading,expression:"reportLoading"}],staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearch},on:{change:e.getQueries},model:{value:e.form.report,callback:function(t){e.$set(e.form,"report",t)},expression:"form.report"}},e._l(e.reportNameList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.queriesLoading,expression:"queriesLoading"}]},e._l(e.form.queries,function(t,a){return r("el-col",{key:t.key,staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[1===Number(t["fieldType"])?r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:t.name,prop:"queries."+a+".value",rules:t.fieldRequired?[{required:!0,message:t.name+"不能为空"}]:null}},[r("el-input",{attrs:{maxlength:"50","show-word-limit":"",placeholder:"请输入",disabled:e.isSearch},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}})],1):2===Number(t["fieldType"])?r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:t.name,prop:"queries."+a+".value",rules:t.fieldRequired?[{required:!0,validator:e.intValidator}]:null}},[r("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入",disabled:e.isSearch},model:{value:t.value,callback:function(r){e.$set(t,"value",e._n(r))},expression:"item.value"}})],1):3===Number(t["fieldType"])?r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:t.name,prop:"queries."+a+".value",rules:t.fieldRequired?[{required:!0,validator:e.decimalValidator}]:null}},[r("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入",disabled:e.isSearch},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}})],1):4===Number(t["fieldType"])?r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:t.name,prop:"queries."+a+".value",rules:t.fieldRequired?[{required:!0,message:t.name+"不能为空"}]:null}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择日期","value-format":"yyyy-MM-dd",editable:!1,disabled:e.isSearch},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}})],1):5===Number(t["fieldType"])?r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:t.name,prop:"queries."+a+".value",rules:t.fieldRequired?[{required:!0,message:"请选择"+t.name}]:null}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:e.isSearch},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}},e._l(t["enumValue"],function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):6===Number(t["fieldType"])?r("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{prop:"queries."+a+".value",label:t.name,rules:t.fieldRequired?[{required:!0,message:"请选择"+t.name}]:null}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"请选择","value-format":"yyyy",editable:!1,disabled:e.isSearch},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}})],1):e._e()],1)}),1),e._v(" "),r("el-row",{staticStyle:{"margin-right":"30px"}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.isEditable,expression:"isEditable === 0"}],staticStyle:{float:"right"}},[r("el-button",{on:{click:function(t){return e.onReset("form")}}},[e._v("重置")]),e._v(" "),r("el-button",{staticStyle:{"min-width":"28px","margin-left":"20px"},attrs:{type:"primary",loading:e.submitLoading,disabled:!e.ifShowSerachBtn},on:{click:function(t){return e.onSearch("form")}}},[e._v("查询")])],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isSearch,expression:"isSearch"}],staticStyle:{float:"right"}},[r("el-button",{staticStyle:{"min-width":"28px"},attrs:{type:"primary"},on:{click:function(t){return e.$emit("onReturnMonth")}}},[e._v("返回月报表")])],1)],1)],1)},i=[],o=r("4240"),s=o["a"],n=(r("e682"),r("2877")),_=Object(n["a"])(s,a,i,!1,null,null,null);t["a"]=_.exports},4240:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_no_api_site_open_operation_web_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("db72"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_1__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_2__),D_no_api_site_open_operation_web_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("3b8d"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_5__);__webpack_exports__["a"]={name:"DynamicForm",props:{isEditable:{type:Number,required:!0},submitLoading:{type:Boolean,required:!0},type:{type:Number,required:!0}},data:function(){var e=function(e,t,r){""===t?r(new Error("内容不能为空")):/^[1-9]\d*$/.test(Number(t))?r():r(new Error("请输入正整数"))},t=function(e,t,r){""===t?r(new Error("内容不能为空")):new RegExp(/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g).test(t)?r():r(new Error("请输入数字，可输入小数"))};return{form:{category:"",productCode:"",report:"",queries:[],coopId:"",dimension:""},productNameList:[],productNameLoading:!1,reportLoading:!1,queriesLoading:!1,reportNameList:[],productCategoryList:[{name:"应用产品",code:1},{code:2,name:"服务产品"}],apiAddress:"",tbHeaderData:[],cooperationProductList:[],intValidator:e,decimalValidator:t}},computed:{isSearch:function(){return 1===this.isEditable},isMerchant:function(){return 1===this.type},merchantId:function(){return this.$route.query.merchantId||""},facilitatorId:function(){return this.$route.query.facilitatorId||""},ifShowSerachBtn:function(){return this.tbHeaderData.length>0&&""!==this.apiAddress}},methods:{getProduceList:function(){var e=Object(D_no_api_site_open_operation_web_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.form.productCode="",this.productNameList=[],this.form.report="",this.reportNameList=[],this.form.coopId="",this.cooperationProductList=[],this.form["queries"]=[],r={},this.productNameLoading=!0,a=this.isMerchant,i=this.merchantId,o=this.facilitatorId,!a){e.next=16;break}return e.next=13,this.$api.merchant.merchantProducts({merchantId:i,type:Number(t)});case 13:r=e.sent,e.next=19;break;case 16:return e.next=18,this.$api.facilitator.facilitatorProducts({id:o,type:Number(t)});case 18:r=e.sent;case 19:r["data"]&&r["data"].length>0&&(this.productNameList=r["data"].map(function(e){return{code:e["code"],name:e["name"]}})),this.productNameLoading=!1;case 21:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getReports:function(){var e=Object(D_no_api_site_open_operation_web_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark(function e(t){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.form.report="",this.reportNameList=[],this.form.coopId="",this.cooperationProductList=[],this.form["queries"]=[],t){e.next=7;break}return e.abrupt("return",!1);case 7:if(r={},this.reportLoading=!0,a=this.isMerchant,i=this.merchantId,!a){e.next=18;break}return e.next=13,this.$api.product.getMerchantReporterType({type:2,productCode:t,merchantId:i});case 13:r=e.sent,this.reportNameList=r.data&&r.data[0].reports||[],this.cooperationProductList=r.data&&r.data[0].coops||[],e.next=23;break;case 18:return e.next=20,this.$api.product.getFacilitatorReporterType({productCode:t});case 20:r=e.sent,this.reportNameList=r.data?r.data:[],this.cooperationProductList=[];case 23:this.reportLoading=!1;case 24:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getQueries:function(){var _getQueries=Object(D_no_api_site_open_operation_web_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__["a"])(regeneratorRuntime.mark(function _callee3(id){var _this=this;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(this.form["queries"]=[],id){_context3.next=3;break}return _context3.abrupt("return",!1);case 3:this.form.dimension=this.reportNameList.filter(function(e){return Number(e.id)===Number(id)})[0].dimension,this.queriesLoading=!0,this.$api.product.getReporterQueries({id:id}).then(function(res){var _res$data$=res["data"][0],apiAddress=_res$data$.apiAddress,reporterColumnDTOlist=_res$data$.reporterColumnDTOlist,reporterSearchConditionDTOList=_res$data$.reporterSearchConditionDTOList;_this.tbHeaderData=reporterColumnDTOlist,_this.$emit("onHeader",reporterColumnDTOlist);var isHasQueries=reporterSearchConditionDTOList.length>0;_this.apiAddress=apiAddress,_this.form["queries"]=isHasQueries?reporterSearchConditionDTOList:[],_this.form["queries"]&&_this.form["queries"].length>0&&(_this.form["queries"]=_this.form["queries"].map(function(item){return item["enumValue"]=""===item["enumValue"]?[]:eval(JSON.parse(item["enumValue"])),item})),_this.queriesLoading=!1}).catch(function(){_this.queriesLoading=!1});case 6:case"end":return _context3.stop()}},_callee3,this)}));function getQueries(e){return _getQueries.apply(this,arguments)}return getQueries}(),onSearch:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var r={},a=t.apiAddress,i=t.form,o=i.productCode,s=(i.report,i.queries),n=i.coopId,_=i.dimension;s.length>0&&s.map(function(e){r[e["field"]]=e["value"]}),t.isMerchant?t.$emit("onSubmit",Object(D_no_api_site_open_operation_web_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},r,{apiAddress:a,productCode:o,coopId:n,dimension:_})):t.$emit("onSubmit",Object(D_no_api_site_open_operation_web_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},r,{apiAddress:a,productCode:o,dimension:_}))})},onReset:function(e){this.$refs[e].resetFields(),this.productNameList=[],this.reportNameList=[],this.form["queries"]=[],this.apiAddress="",this.$emit("onHeader",[])}}}},b097:function(e,t,r){},e682:function(e,t,r){"use strict";var a=r("b097"),i=r.n(a);i.a}}]);