(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-merchant"],{"00c2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"merchantForm"},[a("el-form",{ref:"merchantInfo",attrs:{"label-position":"top",model:e.merchantInfo,rules:e.merchantInfoRules}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isChildMerchant,expression:"isChildMerchant"}],staticClass:"section parentInfo"},[a("p",{staticClass:"title"},[e._v("商户信息")]),e._v(" "),a("div",{staticClass:"info"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"lt"},[e._v("商户编码：")]),e._v(" "),a("div",{staticClass:"rt"},[e._v(e._s(this.$route.query.parentId))])]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"lt"},[e._v("商户简称：")]),e._v(" "),a("div",{staticClass:"rt"},[e._v(e._s(this.$route.query.shortName))])])],1)],1)]),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e.isChildMerchant?a("span",[e._v("子")]):e._e(),e._v("商户基本信息\n      ")]),e._v(" "),a("div",{staticClass:"basicInfo info"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户全称",prop:"name"}},[a("el-input",{attrs:{maxlength:"50","show-word-limit":"",placeholder:"请输入",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.name,callback:function(t){e.$set(e.merchantInfo,"name",t)},expression:"merchantInfo.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户简称",prop:"shortName"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.shortName,callback:function(t){e.$set(e.merchantInfo,"shortName",t)},expression:"merchantInfo.shortName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditCode"}},[a("el-input",{attrs:{maxlength:"18","show-word-limit":"",placeholder:"请输入",disabled:e.ifMerchantEdit&&""!==e.defaultCreditCode},model:{value:e.merchantInfo.creditCode,callback:function(t){e.$set(e.merchantInfo,"creditCode",t)},expression:"merchantInfo.creditCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"注册资本（万元）",prop:"registeredCapital"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.registeredCapital,callback:function(t){e.$set(e.merchantInfo,"registeredCapital",t)},expression:"merchantInfo.registeredCapital"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"营业期限",prop:"businessPeriodFrom"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始时间","end-placeholder":"结束时间",disabled:e.ifAautoComplete},model:{value:e.businessPeriod,callback:function(t){e.businessPeriod=t},expression:"businessPeriod"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"法定代表人",prop:"legalPerson"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"20","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.legalPerson,callback:function(t){e.$set(e.merchantInfo,"legalPerson",t)},expression:"merchantInfo.legalPerson"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"法人证件类型",prop:"legalPersonCardType"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.legalPersonCardType,callback:function(t){e.$set(e.merchantInfo,"legalPersonCardType",t)},expression:"merchantInfo.legalPersonCardType"}},[a("el-option",{attrs:{label:"身份证",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"通行证",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"护照",value:"3"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"法人证件号码",prop:"legalPersonCardId"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.legalPersonCardId,callback:function(t){e.$set(e.merchantInfo,"legalPersonCardId",t)},expression:"merchantInfo.legalPersonCardId"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"noPadding",attrs:{span:24}},[a("el-form-item",{attrs:{label:"经营范围",prop:"businessScope"}},[a("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",rows:2,placeholder:"请输入",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.businessScope,callback:function(t){e.$set(e.merchantInfo,"businessScope",t)},expression:"merchantInfo.businessScope"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户行业类别",prop:"businessType"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.ifAautoComplete},on:{change:e.changeBusinessType,focus:e.focusBusinessType},model:{value:e.merchantInfo.businessType,callback:function(t){e.$set(e.merchantInfo,"businessType",t)},expression:"merchantInfo.businessType"}},e._l(e.businessTypeAry,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户行业细分",prop:"businessTypeChild"}},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoadingBusinessTypeChild,expression:"isLoadingBusinessTypeChild"}],attrs:{placeholder:"请先选择商户行业类别",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.businessTypeChild,callback:function(t){e.$set(e.merchantInfo,"businessTypeChild",t)},expression:"merchantInfo.businessTypeChild"}},e._l(e.businessChildTypeAry,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开户银行",prop:"bank"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.bank,callback:function(t){e.$set(e.merchantInfo,"bank",t)},expression:"merchantInfo.bank"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开户账户",prop:"bankAccount"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.bankAccount,callback:function(t){e.$set(e.merchantInfo,"bankAccount",t)},expression:"merchantInfo.bankAccount"}})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"col2"},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"注册地址",prop:"registeredAddress"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.registeredAddress,callback:function(t){e.$set(e.merchantInfo,"registeredAddress",t)},expression:"merchantInfo.registeredAddress"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办公地址",prop:"officeAddress"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.officeAddress,callback:function(t){e.$set(e.merchantInfo,"officeAddress",t)},expression:"merchantInfo.officeAddress"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"员工人员规模",prop:"employeeSize"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.employeeSize,callback:function(t){e.$set(e.merchantInfo,"employeeSize",t)},expression:"merchantInfo.employeeSize"}},[a("el-option",{attrs:{label:"50 人以下",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"50 - 100",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"100 - 1000",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"1000 以上",value:"4"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"公司联系电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"区号+8位数电话+转机号",maxlength:"20","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.phone,callback:function(t){e.$set(e.merchantInfo,"phone",t)},expression:"merchantInfo.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"网站名称",prop:"websiteName"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"20","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.websiteName,callback:function(t){e.$set(e.merchantInfo,"websiteName",t)},expression:"merchantInfo.websiteName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"网站地址",prop:"website"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"100","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.website,callback:function(t){e.$set(e.merchantInfo,"website",t)},expression:"merchantInfo.website"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ICP备案号",prop:"icp"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.icp,callback:function(t){e.$set(e.merchantInfo,"icp",t)},expression:"merchantInfo.icp"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"一线客服方",prop:"serviceType"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.serviceType,callback:function(t){e.$set(e.merchantInfo,"serviceType",t)},expression:"merchantInfo.serviceType"}},[a("el-option",{attrs:{label:"自有客服",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"商户客服",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客服电话",prop:"servicePhone"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"20","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.servicePhone,callback:function(t){e.$set(e.merchantInfo,"servicePhone",t)},expression:"merchantInfo.servicePhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否上市",prop:"publicCompany"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.publicCompany,callback:function(t){e.$set(e.merchantInfo,"publicCompany",t)},expression:"merchantInfo.publicCompany"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合作产品/服务类型",prop:"cooperationProduction"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.cooperationProduction,callback:function(t){e.$set(e.merchantInfo,"cooperationProduction",t)},expression:"merchantInfo.cooperationProduction"}})],1)],1)],1)],1)]),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("联系信息")]),e._v(" "),a("div",{staticClass:"contactInfo info"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户管理员姓名",prop:"admin"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"20","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.admin,callback:function(t){e.$set(e.merchantInfo,"admin",t)},expression:"merchantInfo.admin"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户管理员手机号",prop:"adminPhone"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"11","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.adminPhone,callback:function(t){e.$set(e.merchantInfo,"adminPhone",t)},expression:"merchantInfo.adminPhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商户管理员邮箱",prop:"adminEmail"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.adminEmail,callback:function(t){e.$set(e.merchantInfo,"adminEmail",t)},expression:"merchantInfo.adminEmail"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商务联系人姓名",prop:"businessPerson"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"20","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.businessPerson,callback:function(t){e.$set(e.merchantInfo,"businessPerson",t)},expression:"merchantInfo.businessPerson"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商务联系人手机号",prop:"businessPersonPhone"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"11","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.businessPersonPhone,callback:function(t){e.$set(e.merchantInfo,"businessPersonPhone",t)},expression:"merchantInfo.businessPersonPhone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商务联系人邮箱",prop:"businessPersonEmail"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"50","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.businessPersonEmail,callback:function(t){e.$set(e.merchantInfo,"businessPersonEmail",t)},expression:"merchantInfo.businessPersonEmail"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"业务拓展经理姓名",prop:"businessDeveloper"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"20","show-word-limit":"",disabled:e.ifAautoComplete},model:{value:e.merchantInfo.businessDeveloper,callback:function(t){e.$set(e.merchantInfo,"businessDeveloper",t)},expression:"merchantInfo.businessDeveloper"}})],1)],1)],1)],1)])]),e._v(" "),a("div",{staticClass:"section btmSec"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ifShowCancelBtn,expression:"ifShowCancelBtn"}],on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ifShowResetBtn,expression:"ifShowResetBtn"}],on:{click:e.resetForm}},[e._v("重 置")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ifShowSaveBtn,expression:"ifShowSaveBtn"}],attrs:{type:"primary",disabled:e.isSubmitDisable,loading:e.isSaving},on:{click:e.saveForm}},[e._v("保 存")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.isSubmitDisable,loading:e.isSubmitting},on:{click:e.submitForm}},[e._v("提 交")])],1)],1)},i=[],o=(a("7f7f"),a("6b54"),a("ac6a"),a("456d"),{name:"MerchantForm",props:{defaultMerchantInfo:{type:Object,default:function(){return{}}},ifMerchantEdit:Boolean,ifShowCancelBtn:Boolean,ifShowResetBtn:Boolean,ifShowSaveBtn:Boolean,isChildMerchant:Boolean,defaultCreditCode:{type:String,default:function(){return""}},defaultAdminEmail:{type:String,default:function(){return""}}},data:function(){var e=this,t=function(t,a,n){""===a?n(new Error("请输入统一社会信用代码")):""!==e.defaultCreditCode&&e.defaultCreditCode===a?n():e.$api.merchant.checkCreditCode(a).then(function(t){if(e.merchantInfo.parentId)var a=e.merchantInfo.parentId;e.merchantInfo=e.formateShowInfo(t.data[0]),e.merchantInfo.parentId=a,e.ifAautoComplete=!0,e.$message.success("输入的统一社会信用代码已存在，已自动补全其他信息。"),n()}).catch(function(t){if(e.ifAautoComplete){var i=a;e.resetForm(),e.merchantInfo.creditCode=i,e.ifAautoComplete=!1}n()})},a=function(t,a,n){""===a?n(new Error("请输入商户管理员邮箱")):""!==e.defaultAdminEmail&&e.defaultAdminEmail===a?n():e.isChildMerchant?n():e.$api.user.checkAdminEmail(a).then(function(e){n()}).catch(function(e){n(new Error("输入的商户管理员邮箱已存在！"))})};return{isSaving:!1,isSubmitting:!1,isSubmitDisable:!0,labelPosition:"right",ifAautoComplete:!1,businessTypeAry:[],businessChildTypeAry:[],isLoadingBusinessTypeChild:!1,merchantInfo:{},merchantInfoRules:{name:[{required:!0,message:"请输入商户名称"}],shortName:[{required:!0,message:"请输入商户简称"}],creditCode:[{required:!0,message:"请输入统一社会信用代码"},{validator:t,trigger:"blur"}],registeredCapital:[{required:!0,message:"请输入注册资本"},{validator:this.$validater.strNumber}],businessPeriodFrom:[{required:!0,message:"请选择营业开始时间",trigger:["blur","change"]}],businessPeriodEnd:[{required:!0,message:"请选择营业结束时间",trigger:["blur","change"]}],businessScope:[{required:!0,message:"请填写经营范围"}],publicCompany:[{required:!0,message:"请选择是否上市",trigger:"change"}],registeredAddress:[{required:!0,message:"请填写注册地址"}],officeAddress:[{required:!0,message:"请填写办公地址"}],businessType:[{required:!0,message:"请选择行业类别",trigger:["blur","change"]}],businessTypeChild:[{required:!0,message:"请选择行业类别",trigger:["blur","change"]}],employeeSize:[{required:!0,message:"请选择员工人数规模",trigger:"change"}],cooperationProduction:[{required:!0,message:"请输入合作产品/服务类型"}],admin:[{required:!0,message:"请填写商户管理员姓名"}],adminPhone:[{required:!0,message:"请填写商户管理员手机号"},{validator:this.$validater.strNumber}],adminEmail:[{required:!0,validator:a,trigger:"blur"},{type:"email",message:"邮箱地址格式不正确"}],businessPerson:[{required:!0,message:"请填写商务联系人姓名"}],businessPersonPhone:[{required:!0,message:"请填写商务联系人手机号"},{validator:this.$validater.strNumber}],businessPersonEmail:[{required:!0,message:"请填写商务联系人邮箱"},{type:"email",message:"邮箱地址格式不正确"}],businessDeveloper:[{required:!0,message:"请填写业务拓展经理姓名"}],serviceType:[{required:!0,message:"请选择一线客服方",trigger:"change"}],servicePhone:[{required:!0,message:"请填写客服电话"},{validator:this.$validater.strNumber}]}}},computed:{businessPeriod:{get:function(){return[this.merchantInfo.businessPeriodFrom?this.merchantInfo.businessPeriodFrom:"",this.merchantInfo.businessPeriodEnd?this.merchantInfo.businessPeriodEnd:""]},set:function(e){this.merchantInfo.businessPeriodFrom=e?e[0]:"",this.merchantInfo.businessPeriodEnd=e?e[1]:""}}},watch:{defaultMerchantInfo:function(e){this.merchantInfo=this.formateShowInfo(e),this.merchantInfo.businessType&&(this.focusBusinessType(),this.changeBusinessType(this.merchantInfo.businessType,!1))},merchantInfo:{handler:function(e,t){this.isSubmitDisable=this.$lib.isObjEqual(e,this.defaultMerchantInfo)},deep:!0}},mounted:function(){0===Object.keys(this.merchantInfo).length&&(this.merchantInfo=this.formateShowInfo(this.defaultMerchantInfo))},updated:function(){this.$refs["merchantInfo"].clearValidate()},methods:{submitForm:function(){var e=this;this.$refs["merchantInfo"].validate(function(t){if(!t)return!1;e.isSubmitting=!0,e.$api.merchant.submitMerchantInfo(e.formateSubmitInfo(e.merchantInfo)).then(function(t){e.isSubmitting=!1,e.$router.go(-1)}).catch(function(t){e.isSubmitting=!1,e.$message.error(t.message)})})},saveForm:function(){var e=this;this.isSaving=!0,this.$api.merchant.saveMerchantInfo(this.formateSubmitInfo(this.merchantInfo)).then(function(t){e.isSaving=!1,e.$router.go(-1)}).catch(function(t){e.isSaving=!1,e.$message.error(t.message)})},handleCancel:function(){this.$router.go(-1)},resetForm:function(){this.merchantInfo=this.formateShowInfo(this.defaultMerchantInfo)},formateSubmitInfo:function(e){var t=JSON.parse(JSON.stringify(e));return t["publicCompany"]=parseInt(t["publicCompany"]),t.id&&(t.id=t.merchantInfoId),this.isChildMerchant&&(t.parentId=this.$route.query.parentId),t},formateShowInfo:function(e){var t=JSON.parse(JSON.stringify(e));return t.employeeSize=t.employeeSize?t.employeeSize.toString():t.employeeSize,t.publicCompany=1===e.publicCompany?"1":0===e.publicCompany?"0":"",t.serviceType=1===e.serviceType?"1":0===e.serviceType?"0":"",t.legalPersonCardType=t.legalPersonCardType?t.legalPersonCardType.toString():t.legalPersonCardType,t},focusBusinessType:function(){var e=this;this.businessTypeAry.length<1&&this.$api.merchant.getBusinessType().then(function(t){var a=t.data.map(function(e){return{code:e.code,name:e.name}});e.businessTypeAry=a})},changeBusinessType:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isLoadingBusinessTypeChild=!0,this.$api.merchant.getBusinessTypeChild(e).then(function(e){var n=e.data.map(function(e){return{code:e.code,name:e.name}});t.businessChildTypeAry=n,a&&(t.merchantInfo.businessTypeChild=""),t.isLoadingBusinessTypeChild=!1}).catch(function(e){t.$message.error(e.message),t.isLoadingBusinessTypeChild=!1})}}}),r=o,s=(a("7aaa"),a("56ca"),a("2877")),l=Object(s["a"])(r,n,i,!1,null,"67cc817a",null);t["default"]=l.exports},"0130":function(e,t,a){"use strict";var n=a("76d2"),i=a.n(n);i.a},"0266":function(e,t,a){"use strict";var n=a("53ad"),i=a.n(n);i.a},"049d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"merchantRight_info"}},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:1===e.merchantRightInfo.state,expression:"merchantRightInfo.state === 1"}],attrs:{title:"审核中！",type:"warning","show-icon":""}}),e._v(" "),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:3===e.merchantRightInfo.state,expression:"merchantRightInfo.state === 3"}],attrs:{title:"审核拒绝！",type:"error",description:"审核意见："+e.merchantRightInfo.approveRemark,"show-icon":""}}),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("产品信息")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("产品类型:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.productTypeName))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("产品名称:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.productName))])])],1)],1),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("商户信息")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户编码:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.merchantId))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户名称:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.merchantName))])])],1)],1),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("资源申请工单信息")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("对接模式:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e._f("filterProductConnectType")(e.merchantRightInfo.connectType)))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("工单状态:")]),e._v(" "),a("span",{staticClass:"val",domProps:{innerHTML:e._s(e.$merchant.getMerchantRightAuditState(e.merchantRightInfo.state))}})]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户计费方式:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e._f("filterPaymentType")(e.merchantRightInfo.paymentType)))])])],1),e._v(" "),1===e.merchantRightInfo.productType?a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("是否使用自营品牌:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.brandName?"是":"否"))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("品牌 LOGO:")]),e._v(" "),a("span",{staticClass:"val"},[a("el-image",{staticStyle:{width:"120px",height:"40px",border:"1px solid #eee","background-color":"#f5f5f5"},attrs:{src:e.merchantRightInfo.brandLogo,"preview-src-list":[e.merchantRightInfo.brandLogo],fit:"scale-down"}})],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("品牌名称:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.brandName))])])],1):e._e(),e._v(" "),a("el-row",[1===e.merchantRightInfo.productType?a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("主题颜色:")]),e._v(" "),a("span",{staticClass:"val"},[e._v("\n          "+e._s(e.merchantRightInfo.productFirstColor)+"\n          "),a("el-color-picker",{staticClass:"colorPre",attrs:{disabled:""},model:{value:e.merchantRightInfo.productFirstColor,callback:function(t){e.$set(e.merchantRightInfo,"productFirstColor",t)},expression:"merchantRightInfo.productFirstColor"}})],1)]):e._e(),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("计费定价:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.settlementPrice)+" "+e._s(4===Number(e.merchantRightInfo.paymentType)?"元/次":"%"))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("申请时间:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantRightInfo.createDatetime))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户可见报表:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.reportsString))])])],1)],1)],1)},i=[],o=(a("7f7f"),a("ac6a"),{name:"MerchantRightInfo",props:{merchantRightInfo:{type:Object,default:function(){return{}}}},data:function(){return{reportsString:""}},watch:{merchantRightInfo:function(e){var t=this;e.rightReports&&e.rightReports.length>0?e.rightReports.forEach(function(e){""===t.reportsString?t.reportsString+=e.name:t.reportsString+=", "+e.name}):e.productReports&&e.productReports.length>0?e.productReports.forEach(function(e){""===t.reportsString?t.reportsString+=e.name:t.reportsString+=", "+e.name}):this.reportsString=""}}}),r=o,s=(a("8a98"),a("0130"),a("2877")),l=Object(s["a"])(r,n,i,!1,null,"5bd6aaeb",null);t["default"]=l.exports},"0552":function(e,t,a){},1973:function(e,t,a){"use strict";var n=a("cb9f"),i=a.n(n);i.a},"245a":function(e,t,a){"use strict";var n=a("6182"),i=a.n(n);i.a},"282b":function(e,t,a){"use strict";var n=a("f607"),i=a.n(n);i.a},"28ba":function(e,t,a){},"2d87":function(e,t,a){"use strict";var n=a("4a0d"),i=a.n(n);i.a},3768:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btmFixed",attrs:{id:"merchantAudit_index"}},[a("MerchantRightInfo",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMerchantRightInfo,expression:"loadingMerchantRightInfo"}],attrs:{"merchant-right-info":e.merchantRightInfo}}),e._v(" "),e.$api.buttonAuth("merchantRight/audit")&&1===e.merchantRightInfo.state?a("div",{staticClass:"section btnGrp btmSec"},[a("el-button",{on:{click:function(t){e.ifShowRefuseDialog=!0}}},[e._v("审核拒绝")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ifShowPassDialog=!0}}},[e._v("审核通过")])],1):e._e(),e._v(" "),a("AuditDialog",{attrs:{"if-show":e.ifShowRefuseDialog,"operation-code":"4"},on:{onRefuse:e.handleMerchantRightRefuse,onHide:function(t){e.ifShowRefuseDialog=!1}}}),e._v(" "),a("el-dialog",{attrs:{title:"审核意见",visible:e.ifShowPassDialog,width:"30%","custom-class":"auditDialog"},on:{"update:visible":function(t){e.ifShowPassDialog=t},closed:e.handleClosePassDialog}},[a("el-form",{ref:"passForm",attrs:{model:e.auditForm,rules:e.auditFormRules}},[a("el-form-item",{staticClass:"mb0",attrs:{prop:"settlementPrice",label:"商户计费定价",rules:[{required:!0,message:"请输入商户计费定价"},{validator:this.$validater.price,trigger:"blur"}],"label-width":"110px"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.auditForm.settlementPrice,callback:function(t){e.$set(e.auditForm,"settlementPrice",t)},expression:"auditForm.settlementPrice"}},[a("template",{slot:"append"},[e._v(e._s(4===e.merchantRightInfo.paymentType?"元/次":"%"))])],2)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClosePassDialog}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleMerchantRightPass}},[e._v("提 交")])],1)],1)],1)},i=[],o=a("db72"),r=a("2f62"),s=a("049d"),l=a("5f38"),c={name:"EditIndex",components:{MerchantRightInfo:s["default"],AuditDialog:l["a"]},data:function(){return{merchantRightInfo:{},ifShowRefuseDialog:!1,ifShowPassDialog:!1,loadingMerchantRightInfo:!1,auditForm:{settlementPrice:""},auditFormRules:{}}},computed:Object(o["a"])({},Object(r["b"])(["userId"])),beforeRouteEnter:function(e,t,a){a(function(t){t.getMerchantRightInfo(e.query.id)})},beforeRouteUpdate:function(e,t,a){this.getMerchantRightInfo(this.$route.query.id).then(function(){a()})},methods:{handleMerchantRightRefuse:function(e){var t=this;this.$api.merchant.merchantRightRefuse(Object(o["a"])({},e,{code:this.merchantRightInfo.id})).then(function(e){t.ifShowRefuseDialog=!1,t.$router.go(-1)}).catch(function(e){t.$message.error(e.message)})},handleMerchantRightPass:function(){var e=this;this.$refs["passForm"].validate(function(t){if(!t)return!1;e.$api.merchant.merchantRightPass({code:e.merchantRightInfo.id,approveById:e.userId,settlementPrice:e.auditForm.settlementPrice}).then(function(t){e.ifShowPassDialog=!1,e.$router.go(-1)}).catch(function(t){e.$message.error(t.message)})})},handleClosePassDialog:function(){this.$refs["passForm"].resetFields(),this.$refs["passForm"].clearValidate(),this.auditForm.settlementPrice=this.merchantRightInfo.settlementPrice},getMerchantRightInfo:function(e){var t=this;return this.loadingMerchantRightInfo=!0,this.$api.merchant.getMerchantRightById(e).then(function(e){t.merchantRightInfo=e.data[0],t.auditForm.settlementPrice=e.data[0].settlementPrice,t.loadingMerchantRightInfo=!1}).catch(function(e){t.$message.error(e.message),t.loadingMerchantRightInfo=!1})}}},u=c,d=a("2877"),h=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=h.exports},"3af5":function(e,t,a){},"3da3":function(e,t,a){},"3e93":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"merchantDetail_index"}},[a("MerchantRightInfo",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMerchantRightInfo,expression:"loadingMerchantRightInfo"}],attrs:{"merchant-right-info":e.merchantRightInfo}}),e._v(" "),a("div",{staticClass:"section btmSec"})],1)},i=[],o=a("049d"),r={name:"MerchantDetail",components:{MerchantRightInfo:o["default"]},data:function(){return{merchantRightInfo:{},loadingMerchantRightInfo:!1}},beforeRouteEnter:function(e,t,a){a(function(t){t.getMerchantRightInfo(e.query.id)})},beforeRouteUpdate:function(e,t,a){this.getMerchantRightInfo(this.$route.query.id).then(function(){a()})},methods:{getMerchantRightInfo:function(e){var t=this;return this.loadingMerchantRightInfo=!0,this.$api.merchant.getMerchantRightById(e).then(function(e){t.merchantRightInfo=e.data[0],t.loadingMerchantRightInfo=!1}).catch(function(e){t.$message.error(e.message),t.loadingMerchantRightInfo=!1})}}},s=r,l=(a("871a"),a("ed8e"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,"43f6f6ea",null);t["default"]=c.exports},"42ca":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btmFixed",attrs:{id:"MercahntAudit_index"}},[a("MerchantInfo",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMerchantInfo,expression:"loadingMerchantInfo"}],attrs:{"merchant-data":e.merchantData,"get-merchant-info":e.getMerchantInfo}}),e._v(" "),e.$api.buttonAuth("merchant/audit")&&2===e.merchantInfo.state?a("div",{staticClass:"section btnGrp btmSec"},[a("AuditBtnGrp",{on:{passAudit:e.handlePassAudit,refuseAudit:function(t){return e.handleOtherAudit(4)},backAudit:function(t){return e.handleOtherAudit(5)}}})],1):e._e(),e._v(" "),a("AuditDialog",{attrs:{"if-show":e.ifShowAuditDialog,"operation-code":e.operationCode.toString()},on:{onBack:e.onBack,onRefuse:e.onRefuse,onHide:function(t){e.ifShowAuditDialog=!1}}}),e._v(" "),a("ConfirmDialog",{attrs:{appear:e.ifShowPassDialog,content:"是否提交审核通过请求"},on:{onCancle:function(t){e.ifShowPassDialog=!1},onConfirm:e.onPass}})],1)},i=[],o=a("db72"),r=a("470b"),s=a("007c"),l=a("5f38"),c=a("11d3"),u={name:"MerchantAudit",components:{MerchantInfo:r["default"],AuditBtnGrp:s["a"],AuditDialog:l["a"],ConfirmDialog:c["a"]},data:function(){return{loadingMerchantInfo:!1,operationCode:"",merchantInfo:{},merchantData:{},ifShowAuditDialog:!1,ifShowPassDialog:!1}},mounted:function(){this.getMerchantInfo()},methods:{getMerchantInfo:function(){var e=this;return this.loadingMerchantInfo=!0,this.$api.merchant.getMerchantById(this.$route.query.merchantId).then(function(t){e.merchantData=t.data[0],e.merchantInfo=e.merchantData.merchant[0],e.loadingMerchantInfo=!1}).catch(function(){e.loadingMerchantInfo=!1})},handlePassAudit:function(){this.ifShowPassDialog=!0,this.operationCode=3},handleOtherAudit:function(e){this.ifShowAuditDialog=!0,this.operationCode=e},onPass:function(){var e=this;this.$api.merchant.merchantPass({code:this.merchantInfo.id,approveById:this.userId,approveRemark:""}).then(function(t){e.$message.success("审核通过"),e.ifShowPassDialog=!1,e.$router.go(-1)}).catch(function(t){e.$message.error(t.message)})},successSubmitAudit:function(e){this.$message.success(e),this.ifShowAuditDialog=!1,this.$router.go(-1)},onRefuse:function(e){var t=this;this.$api.merchant.merchantRefuse(Object(o["a"])({},e,{code:this.merchantInfo.id})).then(function(e){t.successSubmitAudit("审核拒绝")}).catch(function(e){t.$message.error(e.message)})},onBack:function(e){var t=this;this.$api.merchant.merchantReturn(Object(o["a"])({},e,{code:this.merchantInfo.id})).then(function(e){t.successSubmitAudit("审核退回")}).catch(function(e){t.$message.error("审核失败")})}}},d=u,h=a("2877"),f=Object(h["a"])(d,n,i,!1,null,"1ff9f63e",null);t["default"]=f.exports},"46cd":function(e,t,a){},"470b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"merchantDetail"},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:1===e.merchantInfo.state,expression:"merchantInfo.state === 1"}],attrs:{title:"提交中！",type:"warning","show-icon":""}}),e._v(" "),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:2===e.merchantInfo.state,expression:"merchantInfo.state === 2"}],attrs:{title:"审核中！",type:"warning","show-icon":""}}),e._v(" "),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:4===e.merchantInfo.state,expression:"merchantInfo.state === 4"}],attrs:{title:"审核拒绝！",type:"error",description:"审核意见："+e.merchantInfo.approveRemark,"show-icon":""}}),e._v(" "),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:5===e.merchantInfo.state,expression:"merchantInfo.state === 5"}],attrs:{title:"审核退回！",type:"error",description:"审核意见："+e.merchantInfo.approveRemark,"show-icon":""}}),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("商户基本信息")]),e._v(" "),a("div",{staticClass:"basicInfo info"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户编码:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.id))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户全称:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.name))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户简称:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.shortName))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("统一社会信用代码:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.creditCode))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("注册资本:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.registeredCapital)+"万元")])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("营业期限:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.businessPeriodFrom)+" ~ "+e._s(e.merchantInfo.businessPeriodEnd))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("法定代表人:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.legalPerson))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("法人证件类型:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e._f("filterLegalPersonCardType")(e.merchantInfo.legalPersonCardType)))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("法人证件号码:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.legalPersonCardId))])]),e._v(" "),a("el-col",{staticClass:"noPadding",attrs:{span:24}},[a("span",{staticClass:"key"},[e._v("经营范围:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.businessScope))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户行业类别:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.businessTypeName)+" ~ "+e._s(e.merchantInfo.businessTypeChildName))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("开户银行:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.bank))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("开户账户:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.bankAccount))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("是否上市:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(1===e.merchantInfo.publicCompany?"是":"否"))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("注册地址:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.registeredAddress))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("办公地址:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.officeAddress))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("员工人员规模:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e._f("filterEmployeeSize")(e.merchantInfo.employeeSize)))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("公司联系电话:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.phone))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("网站名称:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.websiteName))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("网站地址:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.website))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("一线客服方:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e._f("filterServiceType")(e.merchantInfo.serviceType)))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("客服电话:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.servicePhone))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("ICP备案号:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.icp))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("合作产品/服务类型:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.cooperationProduction))])])],1)],1)]),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("联系信息")]),e._v(" "),a("div",{staticClass:"contactInfo info"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户管理员姓名:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.admin))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户管理员手机号:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.adminPhone))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户管理员邮箱:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.adminEmail))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商务联系人姓名:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.businessPerson))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商务联系人手机号:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.businessPersonPhone))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商务联系人邮箱:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.businessPersonEmail))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("业务拓展经理姓名:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantInfo.businessDeveloper))])])],1)],1)]),e._v(" "),a("ChildMerchantList",{directives:[{name:"show",rawName:"v-show",value:3===e.merchantInfo.state,expression:"merchantInfo.state === 3"}],attrs:{"merchant-info":e.merchantInfo,"child-merchant-list":e.childMerchantList},on:{getMerchantInfo:e.getMerchantInfo}}),e._v(" "),a("ProductList",{directives:[{name:"show",rawName:"v-show",value:3===e.merchantInfo.state,expression:"merchantInfo.state === 3"}],attrs:{"merchant-info":e.merchantInfo,"merchant-resources":e.merchantResources,"get-merchant-info":e.getMerchantInfo}})],1)},i=[],o=a("db72"),r=(a("c5f6"),a("2f62")),s=a("63d5"),l=a("7a2d"),c={name:"MerchantInfo",components:{ChildMerchantList:s["default"],ProductList:l["default"]},filters:{filterServiceType:function(e){return 1===Number(e)?"自有客服":0===Number(e)?"商户客服":""},filterLegalPersonCardType:function(e){var t;switch(Number(e)){case 1:t="身份证";break;case 2:t="通行证";break;case 3:t="护照";break;default:t="";break}return t},filterEmployeeSize:function(e){var t;switch(Number(e)){case 1:t="50 人以下";break;case 2:t="20 - 100 人";break;case 3:t="100 - 1000 人";break;case 4:t="1000 人以上";break;default:t="";break}return t}},props:{merchantData:{type:Object,default:function(){return{merchant:[],merchantChildren:[],merchantResources:[]}}},getMerchantInfo:{type:Function,default:function(){}}},data:function(){return{merchantInfo:{},childMerchantList:[],merchantResources:[]}},computed:Object(o["a"])({},Object(r["b"])(["userId"])),watch:{merchantData:function(e){this.setMerchantInfo(e)},$route:function(e,t){this.getMerchantInfo()}},methods:{setMerchantInfo:function(e){this.merchantInfo=e.merchant[0],this.childMerchantList=e.merchantChildren,this.merchantResources=e.merchantResources},handleTecConfig:function(e){this.$router.push({path:"/access/technologyConfig",query:{merchantId:e}})}}},u=c,d=(a("8e0e"),a("a907"),a("2877")),h=Object(d["a"])(u,n,i,!1,null,"39194a6e",null);t["default"]=h.exports},"4a0d":function(e,t,a){},"4b6e":function(e,t,a){"use strict";var n=a("f7e5"),i=a.n(n);i.a},"4dd4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btmFixed",attrs:{id:"merchantDetail_index"}},[a("MerchantInfo",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMerchantInfo,expression:"loadingMerchantInfo"}],attrs:{"merchant-data":e.merchantData,"get-merchant-info":e.getMerchantInfo}}),e._v(" "),e.$api.buttonAuth("merchant/edit")&&e.ifShowEditBtn?a("div",{staticClass:"section btmSec"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEditMerchant(e.$route.query.merchantId)}}},[e._v("编 辑")])],1):e._e()],1)},i=[],o=a("470b"),r={name:"MerchantDetail",components:{MerchantInfo:o["default"]},data:function(){return{loadingMerchantInfo:!1,merchantData:{},ifShowEditBtn:!1}},watch:{merchantData:function(e){e.merchant&&(this.ifShowEditBtn=2!==e.merchant[0].state)}},mounted:function(){this.getMerchantInfo()},methods:{getMerchantInfo:function(){var e=this;return this.loadingMerchantInfo=!0,this.$api.merchant.getMerchantById(this.$route.query.merchantId,1).then(function(t){e.merchantData=t.data[0],e.loadingMerchantInfo=!1}).catch(function(){e.loadingMerchantInfo=!1})},handleEditMerchant:function(e){this.$router.push({path:"/access/edit",query:{merchantId:e}})}}},s=r,l=a("2877"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"53ad":function(e,t,a){},5454:function(e,t,a){},"56ca":function(e,t,a){"use strict";var n=a("f14c"),i=a.n(n);i.a},6182:function(e,t,a){},"63d5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section"},[n("p",{staticClass:"title"},[e._v("子商户列表")]),e._v(" "),n("div",{staticClass:"mainContent"},[n("div",{staticClass:"opGrp"},[n("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.addChildMerchant}},[e._v("新增")]),e._v(" "),n("EnableBtnGrp",{attrs:{"show-enable-btn":!0,"show-disable-btn":!0,count:e.multipleSelection.length},on:{onEnable:e.batchEnabled,onDisable:e.batchDisabled}})],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.childMerchantList,"header-cell-style":{background:"#f5f5f5",color:"#333"},"cell-style":{padding:"10px 0"}},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",selectable:e.ifSelectable,"class-name":"selectionCol",width:"30"}}),e._v(" "),n("el-table-column",{attrs:{prop:"shortName",label:"子商户简称","min-width":"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchant/detail")?n("router-link",{attrs:{to:{path:"/access/detail",query:{merchantId:t.row.id}}}},[n("span",{attrs:{title:t.row.shortName}},[e._v(e._s(t.row.shortName))])]):n("span",{attrs:{title:t.row.shortName}},[e._v(e._s(t.row.shortName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"businessPerson",label:"商务联系人","min-width":"100px"}}),e._v(" "),n("el-table-column",{attrs:{prop:"businessPersonPhone",label:"商务联系人电话","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"enabled",label:"使用状态","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{innerHTML:e._s(e.$app.getEnabledState(t.row.enabled))}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"state",label:"审核状态","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{innerHTML:e._s(e.$app.getAuditState(t.row.state))}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"createDatetime",label:"创建时间","min-width":"145"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"145"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:2!==t.row.state,expression:"scope.row.state !== 2"}],attrs:{type:"text"},on:{click:function(a){return e.handleEditMerchant(t.row.id)}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.row.state,expression:"scope.row.state === 2"}],attrs:{type:"text"},on:{click:function(a){return e.handleMerchantAudit(t.row.id)}}},[e._v("审核")]),e._v(" "),e.$api.buttonAuth("merchant/createAccount")&&3===t.row.state&&!t.row.hasUserAccount?n("el-button",{attrs:{type:"text"},on:{click:function(a){return e.createAccount(t.row)}}},[e._v("生成账号")]):e._e(),e._v(" "),e.$api.buttonAuth("merchant/manage")&&3===t.row.state?n("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleManage(t.row)}}},[e._v("管理")]):e._e()]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"生成账号",visible:e.ifShowCreateAccountDialog,width:"560px","custom-class":"merchantAccess-createAccountDialog"},on:{"update:visible":function(t){e.ifShowCreateAccountDialog=t}}},[n("div",{staticClass:"tip-content"},[n("img",{attrs:{src:a("29b2"),alt:""}}),e._v(" "),n("p",[e._v("您的 "+e._s(e.currentMerchatInfo.adminEmail)+" 账号已存在，请修改子商户详情的商户管理员信息")])]),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ifShowCreateAccountDialog=!1}}},[e._v("确认")])],1)]),e._v(" "),n("MerchantManage",{attrs:{"if-show-manage-dialog":e.ifShowManageDialog,"current-merchat-id":e.currentMerchatInfo.id},on:{"update:ifShowManageDialog":function(t){e.ifShowManageDialog=t},"update:if-show-manage-dialog":function(t){e.ifShowManageDialog=t},"update:currentMerchatId":function(t){return e.$set(e.currentMerchatInfo,"id",t)},"update:current-merchat-id":function(t){return e.$set(e.currentMerchatInfo,"id",t)},callBack:e.refreshData}})],1)},i=[],o=(a("c5f6"),a("96cf"),a("3b8d")),r=(a("ac6a"),a("db72")),s=a("2f62"),l=a("f5ed"),c={name:"ChildMerchantList",components:{MerchantManage:l["default"]},props:{merchantInfo:{type:Object,default:function(){return{}}},childMerchantList:{type:Array,default:function(){return[]}}},data:function(){return{multipleSelection:[],currentMerchatInfo:{},ifShowManageDialog:!1,ifShowCreateAccountDialog:!1}},computed:Object(r["a"])({},Object(s["b"])(["userId"])),methods:{refreshData:function(){this.$emit("getMerchantInfo",this.merchantInfo.id)},ifSelectable:function(e,t){return 3===e.state},addChildMerchant:function(){this.$router.push({path:"/access/add",query:{parentId:this.merchantInfo.id,shortName:this.merchantInfo.shortName,isChildMerchant:!0}})},handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.multipleSelection=t},handleMerchantAudit:function(e){this.$router.push({path:"/access/audit",query:{merchantId:e}})},handleEditMerchant:function(e){this.$router.push({path:"/access/edit",query:{merchantId:e}})},handleManage:function(e){this.ifShowManageDialog=!0,this.currentMerchatInfo=e},createAccount:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currentMerchatInfo=t,e.next=3,this.$api.merchant.genarateUserAccount({id:t.id});case 3:a=e.sent,e.t0=Number(a.code),e.next=200===e.t0?7:421===e.t0?10:12;break;case 7:return this.refreshData(),this.$message.success(a.message),e.abrupt("break",14);case 10:return this.ifShowCreateAccountDialog=!0,e.abrupt("break",14);case 12:return this.$message.error(a.message),e.abrupt("break",14);case 14:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),batchEnabled:function(){var e=this;this.$api.merchant.merchantEnable({updateById:this.userId,ids:this.multipleSelection}).then(function(t){e.refreshData(),e.$message.success("成功启用子商户！")}).catch(function(t){e.$message.error(t.message)})},batchDisabled:function(){var e=this;this.$api.merchant.merchantDisable({updateById:this.userId,ids:this.multipleSelection}).then(function(t){e.refreshData(),e.$message.success("成功停用子商户！")}).catch(function(t){e.$message.error(t.message)})}}},u=c,d=(a("935d"),a("2877")),h=Object(d["a"])(u,n,i,!1,null,"4424df61",null);t["default"]=h.exports},6823:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"商户账户充值",visible:e.ifShowDialog,width:"30%","custom-class":"merchantAccess_chargeDialog"},on:{"update:visible":function(t){e.ifShowDialog=t}}},[a("el-form",{ref:"chargeForm",attrs:{model:e.chargeForm,rules:e.chargeFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"money",label:"充值金额"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"11","show-word-limit":"",clearable:""},model:{value:e.chargeForm.money,callback:function(t){e.$set(e.chargeForm,"money",t)},expression:"chargeForm.money"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),a("el-form-item",{staticClass:"mb0",attrs:{prop:"password",label:"密码确认"}},[a("el-input",{attrs:{placeholder:"请输入","show-password":"",clearable:""},model:{value:e.chargeForm.password,callback:function(t){e.$set(e.chargeForm,"password",t)},expression:"chargeForm.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ifShowDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{loading:e.isSubmitting,type:"primary"},on:{click:e.submitCharge}},[e._v("提 交")])],1)],1)},i=[],o=(a("6b54"),{name:"MerchantCharge",props:{ifShowChargeDialog:{type:Boolean,default:!1},currentMerchatInfo:{type:Object,default:function(){return{id:""}}}},data:function(){var e=this,t=function(t,a,n){e.chargeForm.money=e.toDecimal2(a);var i=e.chargeForm.money.length;i>11?setTimeout(function(){n(new Error("最多输入8位整数和两位小数！"))},50):n()};return{isSubmitting:!1,chargeForm:{merchantId:"",money:"",password:"",userId:this.$store.getters.userId},chargeFormRules:{money:[{required:!0,message:"请输入充值金额"},{validator:this.$validater.price},{validator:t,trigger:"blur"}],password:[{required:!0,message:"请输入密码"}]}}},computed:{ifShowDialog:{get:function(){return this.ifShowChargeDialog},set:function(e){this.resetForm(),this.$emit("update:ifShowChargeDialog",e)}}},methods:{submitCharge:function(){var e=this;this.$refs["chargeForm"].validate(function(t){if(!t)return!1;e.isSubmitting=!0,e.chargeForm.merchantId=e.currentMerchatInfo.id,e.$api.account.accountCharge(e.chargeForm).then(function(t){e.isSubmitting=!1,e.ifShowDialog=!1,e.$emit("getMerchantInfo")}).catch(function(t){e.isSubmitting=!1,e.$message.error(t.message)})})},resetForm:function(){this.$refs["chargeForm"].resetFields()},toDecimal2:function(e){var t=parseFloat(e);if(isNaN(t))return!1;t=Math.round(100*e)/100;var a=t.toString(),n=a.indexOf(".");n<0&&(n=a.length,a+=".");while(a.length<=n+2)a+="0";return a}}}),r=o,s=a("2877"),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},"687e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.ifShowDialog,width:"40%",top:"10vh","custom-class":"merchantRight_reporterConfig"},on:{"update:visible":function(t){e.ifShowDialog=t}}},[a("div",{staticStyle:{"font-size":"18px",color:"#333"},attrs:{slot:"title"},slot:"title"},[e._v("管理")]),e._v(" "),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,rules:e.formRule,"label-width":"115px"}},[a("el-form-item",{attrs:{prop:"paymentType",label:"商户计费方式"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.form.paymentType,callback:function(t){e.$set(e.form,"paymentType",t)},expression:"form.paymentType"}},e._l(e.curPaymentTypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"settlementPrice",label:"商户计费定价"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.settlementPrice,callback:function(t){e.$set(e.form,"settlementPrice",t)},expression:"form.settlementPrice"}},[a("template",{slot:"append"},[e._v(e._s(4===e.form.paymentType?"元/次":"%"))])],2)],1),e._v(" "),a("el-form-item",{attrs:{prop:"reportIds",label:"商户可见报表"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.reportIds,callback:function(t){e.$set(e.form,"reportIds",t)},expression:"form.reportIds"}},e._l(e.productReports,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isUpdating,expression:"isUpdating"}]},e._l(e.form.coops,function(t,n){return a("div",{key:n,staticClass:"item"},[a("el-form-item",{attrs:{label:"合作产品","label-width":"95px",prop:"coops."+n+".cooperationName",rules:{required:!0,message:"合作产品不能为空"}}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.cooperationName,callback:function(a){e.$set(t,"cooperationName",a)},expression:"item.cooperationName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务商商户ID",prop:"coops."+n+".facilitatorMerchantId","label-width":"140px",rules:[{required:!0,message:"服务商商户ID不能为空"}]}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.facilitatorMerchantId,callback:function(a){e.$set(t,"facilitatorMerchantId",a)},expression:"item.facilitatorMerchantId"}}),e._v(" "),a("PopoverConfirm",{attrs:{"popover-class":"test","trigger-text":"<i class='el-icon-remove-outline'></i>"},on:{onConfirm:function(a){return e.removeOption(t)}}})],1)],1)}),0),e._v(" "),a("div",{staticClass:"btnSec"},[a("el-button",{attrs:{size:"small"},on:{click:e.addOption}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增\n      ")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onReset}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.isSubmitting,disabled:e.isSubmitDisable},on:{click:e.onSubmit}},[e._v("提 交")])],1)],1)},i=[],o=a("db72"),r=(a("ac6a"),a("6b54"),a("c5f6"),a("7514"),a("96cf"),a("3b8d")),s={name:"MerchantRightManage",props:{currentMerchantRight:{type:Object,default:function(){return{}}},ifShowManageDialog:{type:Boolean,default:!1}},data:function(){return{formLoading:!1,isUpdating:!1,isSubmitting:!1,isSubmitDisable:!0,form:{id:"",paymentType:"",settlementPrice:"",reportIds:[],coops:[]},formRule:{settlementPrice:[{required:!0,message:"请输入商户计费定价"},{validator:this.$validater.price,trigger:"blur"}]},formOriValue:{},curPaymentTypes:[]}},computed:{ifShowDialog:{get:function(){return this.ifShowManageDialog},set:function(e){this.$emit("update:ifShowManageDialog",e)}},productReports:function(){return this.currentMerchantRight["productReports"]}},watch:{form:{deep:!0,handler:function(e,t){this.isSubmitDisable=this.$lib.isObjEqual(e,this.formOriValue)}},ifShowDialog:function(e){e&&this.initData(),e||this.isSubmitDisable||this.$emit("onRefreshData")}},methods:{addOption:function(){this.form.coops.push({id:"",cooperationName:"",facilitatorMerchantId:""})},removeOption:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=!1,this.formOriValue.coops.length>0&&(a=this.formOriValue.coops.find(function(e){return e.id===t.id})),!a){e.next=19;break}return e.prev=3,this.isUpdating=!0,e.next=7,this.$api.merchant.merchantRightTechConfigDelete({id:t["id"]});case 7:if(n=e.sent,this.isUpdating=!1,200===Number(n.code)){e.next=12;break}return this.$message.error(n.message),e.abrupt("return",!1);case 12:this.$emit("onRefreshData"),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](3),this.isUpdating=!1,this.$message.error(e.t0.message);case 19:i=this.form.coops.indexOf(t),-1!==i&&(this.form.coops.splice(i,1),this.formOriValue=JSON.parse(JSON.stringify(this.form)));case 21:case"end":return e.stop()}},e,this,[[3,15]])}));function t(t){return e.apply(this,arguments)}return t}(),initData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a,n,i,o,r,s,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.formLoading=!0,t=this.currentMerchantRight,a=t.id,n=t.paymentType,i=t.settlementPrice,o=t.rightReports,r=t.coops,s=t.cooperationType,this.form.id=a,this.form.paymentType=n,this.curPaymentTypes=s?this.$app.getPaymentTypesByCoopertaionType(s):[],this.form.settlementPrice=i?i.toString():i,this.form.reportIds=[],o.forEach(function(e){l.form.reportIds.push(e.id)}),this.form.coops=[],r.forEach(function(e){l.form.coops.push(e)}),this.formLoading=!1,this.formOriValue=JSON.parse(JSON.stringify(this.form));case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onClear:function(){this.$refs["form"]&&this.$refs["form"].resetFields()},onReset:function(){this.form=Object.assign({},this.formOriValue)},onSubmit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return e.formLoading=!0,e.isSubmitting=!0,t.next=6,e.$api.merchant.merchantRightManage(Object(o["a"])({userId:e.$session.getUserData()["id"]},e.form));case 6:if(n=t.sent,e.formLoading=!1,e.isSubmitting=!1,200===Number(n["code"])){t.next=11;break}return t.abrupt("return",!1);case 11:e.ifShowDialog=!1;case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}},l=s,c=(a("711d"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=u.exports},"711d":function(e,t,a){"use strict";var n=a("e295"),i=a.n(n);i.a},"76d2":function(e,t,a){},7785:function(e,t,a){"use strict";var n=a("e1bd"),i=a.n(n);i.a},"7a2d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("对接产品列表")]),e._v(" "),a("div",{staticClass:"mainContent"},[a("div",{staticClass:"opGrp"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){e.ifShowChooseDialog=!0}}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.merchantResources,"header-cell-style":{background:"#f5f5f5",color:"#333"},"cell-style":{padding:"10px 0"}}},[a("el-table-column",{attrs:{prop:"functionCode",label:"工单编号","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchantRight/detail")?a("router-link",{attrs:{to:{path:"/apply/detail",query:{id:t.row.id}}}},[e._v(e._s(t.row.id))]):a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"产品名称","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.productName}},[e._v(e._s(t.row.productName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"productType",label:"产品类型","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterProductType")(t.row.productType)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"connectType",label:"对接模式","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterProductConnectType")(t.row.connectType)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"paymentType",label:"计费方式","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterPaymentType")(t.row.paymentType)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"enabled",label:"使用状态","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.$app.getEnabledState(t.row.enabled))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"审核状态","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.$merchant.getMerchantRightAuditState(t.row.state))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createDatetime",label:"申请时间","min-width":"140px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchantRight/manage")&&2===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleReporterConfig(t.row)}}},[e._v("管理")]):e._e()]}}])})],1)],1),e._v(" "),a("ChooseProduct",{attrs:{"if-show-choose-dialog":e.ifShowChooseDialog,"merchant-info":e.merchantInfo,"merchant-resources":e.merchantResources,"get-merchant-info":e.getMerchantInfo},on:{"update:ifShowChooseDialog":function(t){e.ifShowChooseDialog=t},"update:if-show-choose-dialog":function(t){e.ifShowChooseDialog=t}}}),e._v(" "),a("MerchantRightManage",{attrs:{"if-show-manage-dialog":e.ifShowManageDialog,"current-merchant-right":e.currentMerchantRight},on:{"update:ifShowManageDialog":function(t){e.ifShowManageDialog=t},"update:if-show-manage-dialog":function(t){e.ifShowManageDialog=t},onRefreshData:e.getMerchantInfo}})],1)},i=[],o=a("dc90"),r=a("687e"),s={name:"ProductList",components:{ChooseProduct:o["default"],MerchantRightManage:r["default"]},props:{merchantInfo:{type:Object,default:function(){return{}}},merchantResources:{type:Array,default:function(){return[]}},getMerchantInfo:{type:Function,default:function(){}}},data:function(){return{ifShowChooseDialog:!1,currentMerchantRight:{},ifShowManageDialog:!1}},methods:{handleReporterConfig:function(e){this.ifShowManageDialog=!0,this.currentMerchantRight=e}}},l=s,c=(a("282b"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"37977771",null);t["default"]=u.exports},"7aaa":function(e,t,a){"use strict";var n=a("a070"),i=a.n(n);i.a},8073:function(e,t,a){},"83d7":function(e,t,a){"use strict";var n=a("a51b"),i=a.n(n);i.a},"866e":function(e,t,a){"use strict";var n=a("8b4e"),i=a.n(n);i.a},"871a":function(e,t,a){"use strict";var n=a("ab06"),i=a.n(n);i.a},"8a98":function(e,t,a){"use strict";var n=a("ac56"),i=a.n(n);i.a},"8b4e":function(e,t,a){},"8e0e":function(e,t,a){"use strict";var n=a("8073"),i=a.n(n);i.a},9047:function(e,t,a){},"935d":function(e,t,a){"use strict";var n=a("5454"),i=a.n(n);i.a},a070:function(e,t,a){},a35f:function(e,t,a){"use strict";var n=a("9047"),i=a.n(n);i.a},a51b:function(e,t,a){},a56d:function(e,t,a){"use strict";var n=a("3da3"),i=a.n(n);i.a},a907:function(e,t,a){"use strict";var n=a("cb59"),i=a.n(n);i.a},ab06:function(e,t,a){},ac56:function(e,t,a){},b9d7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingdevConfigInfo,expression:"loadingdevConfigInfo"}],attrs:{id:"merchantAccess_tecConfig"}},[a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("商户基本信息")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"key"},[e._v("商户编码：")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantId))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"key"},[e._v("商户简称：")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.merchantShortName))])])],1)],1),e._v(" "),a("div",{staticClass:"section"},[a("p",{staticClass:"title"},[e._v("生产环境开发者配置")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"key"},[e._v("开发者ID(access_ID):")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.proConfigInfo.accessId))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"key"},[e._v("开发者密钥(access_Secret):")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.proConfigInfo.accessSecret))])])],1)],1),e._v(" "),a("div",{staticClass:"section mb0"},[a("p",{staticClass:"title"},[e._v("联调环境开发者配置")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"key"},[e._v("开发者ID(access_ID):")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.devConfigInfo.accessId))])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"key"},[e._v("开发者密钥(access_Secret):")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.devConfigInfo.accessSecret))])])],1)],1)])},i=[],o=(a("7f7f"),{name:"editIndex",data:function(){return{merchantId:this.$route.query.merchantId,merchantName:this.$route.query.name,merchantShortName:this.$route.query.shortName,loadingdevConfigInfo:!1,proConfigInfo:{},devConfigInfo:{},merchantCodeConfig:{merchantId:this.$route.query.merchantId,merchantCode:""}}},beforeRouteEnter:function(e,t,a){a(function(e){e.getDevConfigInfo()})},beforeRouteUpdate:function(e,t,a){this.getDevConfigInfo().then(function(){a()})},methods:{setDevConfigInfo:function(e){this.proConfigInfo=e[1],this.devConfigInfo=e[0],this.loadingdevConfigInfo=!1},getDevConfigInfo:function(){var e=this;return this.loadingdevConfigInfo=!0,this.$api.merchant.getMerchantDevConfig(this.$route.query.merchantId).then(function(t){e.setDevConfigInfo(t.data[0].configList),e.merchantCodeConfig.merchantCode=t.data[0].merchantCode?t.data[0].merchantCode:""})}}}),r=o,s=(a("7785"),a("2877")),l=Object(s["a"])(r,n,i,!1,null,"b48ad0a0",null);t["default"]=l.exports},bd35:function(e,t,a){"use strict";var n=a("e2e1"),i=a.n(n);i.a},bd70:function(e,t,a){"use strict";var n=a("3af5"),i=a.n(n);i.a},c345:function(e,t,a){"use strict";a.r(t);var n=[{limitNode:"1",limitDimension:"1",limitSize:"",startDatetime:"",endDatetime:"",selectedTime:"",state:"1"},{limitNode:"2",limitDimension:"1",limitSize:"",startDatetime:"",endDatetime:"",selectedTime:"",state:"1"}];t["default"]=n},c566:function(e,t,a){"use strict";var n=a("46cd"),i=a.n(n);i.a},c5c0:function(e,t,a){"use strict";var n=a("28ba"),i=a.n(n);i.a},cb59:function(e,t,a){},cb9f:function(e,t,a){},ce22:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("UserManage",{attrs:{"only-merchant-user":!0}})},i=[],o=a("3c67"),r={name:"SystemUserManagement",components:{UserManage:o["default"]}},s=r,l=a("2877"),c=Object(l["a"])(s,n,i,!1,null,"d8cf9e84",null);t["default"]=c.exports},ce8f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.ifShowDialog,width:"40%",top:"5vh","custom-class":"merchantAccessDetail_serviceProductConfig"},on:{"update:visible":function(t){e.ifShowDialog=t}}},[a("div",{staticStyle:{"font-size":"18px",color:"#333"},attrs:{slot:"title"},slot:"title"},[e._v("产品申请配置")]),e._v(" "),a("div",{staticClass:"topTip"},[a("span",{staticStyle:{color:"#333","margin-left":"0","font-weight":"bold"}},[e._v("添加产品")]),e._v(" "),a("span",[e._v("产品类型: "+e._s(e._f("filterProductType")(e.currentSelectedProduct.type)))]),e._v(" "),a("span",[e._v("产品名称: "+e._s(e.currentSelectedProduct.name))])]),e._v(" "),a("el-form",{ref:"resourceForm",attrs:{model:e.resourceForm,rules:e.resourceFormRule,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"对接方式",prop:"connectType",required:""}},[a("el-radio",{attrs:{label:e.resourceForm.connectType,border:""},model:{value:e.resourceForm.connectType,callback:function(t){e.$set(e.resourceForm,"connectType",t)},expression:"resourceForm.connectType"}},[e._v(e._s(e._f("filterProductConnectType")(e.resourceForm.connectType)))])],1),e._v(" "),a("el-form-item",{staticClass:"strong",attrs:{label:"产品定价",prop:"settlementPrice",required:""}},[e._v(e._s(e.resourceForm.settlementPrice)+" 元/次")]),e._v(" "),a("el-form-item",{attrs:{label:"计费方式",prop:"paymentType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.resourceForm.paymentType,callback:function(t){e.$set(e.resourceForm,"paymentType",t)},expression:"resourceForm.paymentType"}},e._l(e.paymentTypesAry,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetProductResourceForm}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{loading:e.isSubmitting,type:"primary"},on:{click:e.submitProductConfig}},[e._v("提 交")])],1)],1)},i=[],o=a("db72"),r=a("2f62"),s={name:"ServiceProductConfig",props:{merchantInfo:{type:Object,default:function(){return{}}},ifShowConfigDialog:{type:Boolean,default:!1},currentSelectedProduct:{type:Object,default:function(){return{}}},getMerchantInfo:{type:Function,default:function(){}}},data:function(){return{isSubmitting:!1,resourceForm:{functionCode:"",productType:"",connectType:"",source:"2",merchantId:"",paymentType:"",settlementPrice:"",createById:this.$store.getters.userId},resourceFormRule:{paymentType:[{required:!0,message:"请选择计费方式"}]},paymentTypesAry:[]}},computed:Object(o["a"])({},Object(r["b"])(["userId","user"]),{ifShowDialog:{get:function(){return this.ifShowConfigDialog},set:function(e){this.$emit("update:ifShowConfigDialog",e)}}}),watch:{currentSelectedProduct:function(e){this.resourceForm.functionCode=e.code,this.resourceForm.productType=e.type,this.resourceForm.connectType=e.connectType,this.resourceForm.settlementPrice=e.settlementPrice,this.paymentTypesAry=this.$app.getFilterPaymentTypes(e.paymentTypes)},merchantInfo:function(e){this.resourceForm.merchantId=e.id}},methods:{resetProductResourceForm:function(){this.$refs["resourceForm"].resetFields(),this.$refs["resourceForm"].clearValidate()},submitProductConfig:function(){var e=this;this.$refs["resourceForm"].validate(function(t){if(!t)return!1;e.isSubmitting=!0,e.$api.merchant.insertMerchantRight(e.resourceForm).then(function(t){e.getMerchantInfo(),e.ifShowDialog=!1,e.isSubmitting=!1}).catch(function(t){e.isSubmitting=!1,e.$message.error(t.message)})})}}},l=s,c=(a("de0e"),a("c566"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"d211a1da",null);t["default"]=u.exports},d158:function(e,t,a){},d5dc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.ifShowDialog,width:"40%",top:"5vh","custom-class":"merchantAccessDetail_applicationProductConfig"},on:{"update:visible":function(t){e.ifShowDialog=t}}},[a("div",{staticStyle:{"font-size":"18px",color:"#333"},attrs:{slot:"title"},slot:"title"},[e._v("产品申请配置")]),e._v(" "),a("div",{staticClass:"topTip"},[a("span",{staticStyle:{color:"#333","margin-left":"0","font-weight":"bold"}},[e._v("添加产品")]),e._v(" "),a("span",[e._v("产品类型: "+e._s(e._f("filterProductType")(e.currentSelectedProduct.type)))]),e._v(" "),a("span",[e._v("产品名称: "+e._s(e.currentSelectedProduct.name))])]),e._v(" "),a("el-form",{ref:"resourceForm",attrs:{model:e.resourceForm,rules:e.resourceFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"对接方式:",prop:"connectType","label-width":e.resourceFormLabelWidth}},[a("el-radio",{attrs:{label:"1",border:""},model:{value:e.resourceForm.connectType,callback:function(t){e.$set(e.resourceForm,"connectType",t)},expression:"resourceForm.connectType"}},[e._v("H5")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否使用自营品牌:","label-width":e.resourceFormLabelWidth,required:""}},[a("el-radio",{attrs:{label:"1",border:""},on:{change:e.changeIfUseSelfOwnedBrand},model:{value:e.ifUseSelfOwnedBrand,callback:function(t){e.ifUseSelfOwnedBrand=t},expression:"ifUseSelfOwnedBrand"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",border:""},on:{change:e.changeIfUseSelfOwnedBrand},model:{value:e.ifUseSelfOwnedBrand,callback:function(t){e.ifUseSelfOwnedBrand=t},expression:"ifUseSelfOwnedBrand"}},[e._v("否")])],1),e._v(" "),"1"===e.ifUseSelfOwnedBrand?a("div",[a("el-form-item",{staticClass:"uploadLogo",attrs:{label:"品牌LOGO:","label-width":e.resourceFormLabelWidth,prop:"brandLogo"}},[a("div",{staticStyle:{width:"400px"}},[a("ImageUpload",{attrs:{type:["image/png"],"image-url":e.resourceForm.brandLogo,text2:"请上传PNG格式，且小于1M的LOGO图片"},on:{"update:imageUrl":function(t){return e.$set(e.resourceForm,"brandLogo",t)},"update:image-url":function(t){return e.$set(e.resourceForm,"brandLogo",t)}}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"品牌名称:",prop:"brandName","label-width":e.resourceFormLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.resourceForm.brandName,callback:function(t){e.$set(e.resourceForm,"brandName",t)},expression:"resourceForm.brandName"}})],1),e._v(" "),a("el-form-item",{staticClass:"colorWrap",attrs:{label:"主题颜色:",prop:"productFirstColor","label-width":e.resourceFormLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.resourceForm.productFirstColor,callback:function(t){e.$set(e.resourceForm,"productFirstColor",t)},expression:"resourceForm.productFirstColor"}}),e._v(" "),a("el-color-picker",{model:{value:e.resourceForm.productFirstColor,callback:function(t){e.$set(e.resourceForm,"productFirstColor",t)},expression:"resourceForm.productFirstColor"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"结算方式:",prop:"paymentType","label-width":e.resourceFormLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.resourceForm.paymentType,callback:function(t){e.$set(e.resourceForm,"paymentType",t)},expression:"resourceForm.paymentType"}},e._l(e.$app.getFilterPaymentTypes(e.currentSelectedProduct.paymentTypes),function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetProductResourceForm}},[e._v("重 置")]),e._v(" "),a("el-button",{attrs:{loading:e.isSubmitting,type:"primary"},on:{click:e.submitProductConfig}},[e._v("提 交")])],1)],1)},i=[],o={name:"ApplicationProductConfig",props:{merchantInfo:{type:Object,default:function(){return{}}},ifShowConfigDialog:{type:Boolean,default:!1},currentSelectedProduct:{type:Object,default:function(){return{}}},getMerchantInfo:{type:Function,default:function(){return!0}}},data:function(){return{resourceForm:{functionCode:"",productType:"",connectType:"1",productFirstColor:"",brandName:"",brandLogo:"",source:"2",merchantId:"",paymentType:"",createById:this.$store.getters.userId},resourceFormLabelWidth:"150px",ifUseSelfOwnedBrand:"1",fileList:[],logoName:"",isUploadingImage:!1,isSubmitting:!1,resourceFormRules:{connectType:[{required:!0,message:"请选择对接模式",trigger:"blur"}],brandLogo:[{required:!0,message:"请上传品牌Logo",trigger:"change"}],brandName:[{required:!0,message:"请输入品牌名称"}],productFirstColor:[{required:!0,message:"请输入主题主要颜色"}],paymentType:[{required:!0,message:"请选择结算方式"}]}}},computed:{ifShowDialog:{get:function(){return this.ifShowConfigDialog},set:function(e){this.$emit("update:ifShowConfigDialog",e)}}},watch:{currentSelectedProduct:function(e){this.resourceForm.productType=e.type,this.resourceForm.functionCode=e.code},merchantInfo:function(e){this.resourceForm.merchantId=e.id},"resourceForm.brandLogo":function(e){e&&this.$refs["resourceForm"].clearValidate(["brandLogo"])}},methods:{changeIfUseSelfOwnedBrand:function(e){"0"===e&&(this.resetProductResourceForm(),this.resourceForm.productFirstColor="",this.resourceForm.brandName="",this.resourceForm.brandLogo="")},resetProductResourceForm:function(){this.$refs["resourceForm"].resetFields()},submitProductConfig:function(){var e=this;this.$refs["resourceForm"].validate(function(t){if(!t)return!1;e.isSubmitting=!0,e.$api.merchant.insertMerchantRight(e.resourceForm).then(function(t){e.getMerchantInfo(),e.ifShowDialog=!1,e.isSubmitting=!1,e.$refs["resourceForm"].resetFields(),e.$message.success(t.message)}).catch(function(t){e.isSubmitting=!1,e.$message.error(t.message)})})}}},r=o,s=(a("866e"),a("0266"),a("2877")),l=Object(s["a"])(r,n,i,!1,null,"72a7f4cf",null);t["default"]=l.exports},dc40:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.ifShowDialog,width:"40%",top:"5vh","custom-class":"merchantRight_reporterConfig"},on:{"update:visible":function(t){e.ifShowDialog=t}}},[a("div",{staticStyle:{"font-size":"18px",color:"#333"},attrs:{slot:"title"},slot:"title"},[e._v("技术配置")]),e._v(" "),e.operationProducts.length?a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isUpdating,expression:"isUpdating"}],ref:"form",attrs:{model:e.form,rules:e.formRule}},[e._l(e.form.options,function(t,n){return a("div",{key:n,staticClass:"item"},[a("el-form-item",{attrs:{label:"合作产品",prop:"options."+n+".id","label-width":"95px",rules:{required:!0,message:"合作产品不能为空"}}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.handleProductSelect},model:{value:t.id,callback:function(a){e.$set(t,"id",a)},expression:"item.id"}},e._l(e.operationProducts,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.checked}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"服务商商户ID",prop:"options."+n+".facilitatorMerchantId","label-width":"140px",rules:[{required:!0,message:"服务商商户ID不能为空"}]}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.facilitatorMerchantId,callback:function(a){e.$set(t,"facilitatorMerchantId",a)},expression:"item.facilitatorMerchantId"}}),e._v(" "),a("PopoverConfirm",{attrs:{"popover-class":"test",triggerText:"<i class='el-icon-remove-outline'></i>"},on:{onConfirm:function(a){return e.removeOption(t)}}})],1)],1)}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.form.options.length<e.operationProducts.length,expression:"form.options.length < operationProducts.length"}],staticClass:"btnSec"},[a("el-button",{attrs:{size:"small"},on:{click:e.addOption}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增\n      ")])],1)],2):a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isUpdating,expression:"isUpdating"}],staticStyle:{"text-align":"center"}},[e._v("未配置合作产品！")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.isSubmitting,type:"primary",disabled:e.isSubmitDisable},on:{click:e.onSubmit}},[e._v("提 交")])],1)],1)},i=[],o=(a("96cf"),a("3b8d")),r=(a("7514"),a("ac6a"),{name:"MerchantRightTechConfig",props:{currentMerchantRight:{type:Object,default:function(){return{}}},ifShowTechConfigDialog:{type:Boolean,default:!1}},data:function(){return{isSubmitting:!1,isUpdating:!1,isSubmitDisable:!0,operationProducts:[],formOriValue:{},form:{options:[]},formRule:{}}},computed:{ifShowDialog:{get:function(){return this.ifShowTechConfigDialog},set:function(e){this.$emit("update:ifShowTechConfigDialog",e)}}},watch:{form:{handler:function(e,t){this.isSubmitDisable=this.$lib.isObjEqual(e,this.formOriValue)||0===e.options.length},deep:!0},ifShowDialog:function(e){e?this.getTechConfigList():(this.operationProducts=[],this.form.options=[])}},methods:{getTechConfigList:function(){var e=this;this.isUpdating=!0,this.$api.merchant.merchantRightTechConfigQuery({id:this.currentMerchantRight.id}).then(function(t){e.isUpdating=!1,e.initData(t.data)}).catch(function(t){e.isUpdating=!1,e.$message.error(t.message)})},initData:function(e){var t=this,a=e||[];this.operationProducts=[],this.form.options=[],a.forEach(function(e){t.operationProducts.push({value:e.id,label:e.cooperationName,checked:!!e.facilitatorMerchantId}),e.facilitatorMerchantId&&t.form.options.push({id:e.id,facilitatorMerchantId:e.facilitatorMerchantId})}),0===this.form.options.length&&this.form.options.push({id:"",facilitatorMerchantId:""}),this.formOriValue=JSON.parse(JSON.stringify(this.form))},updateOperationProduct:function(){var e=this;this.operationProducts.forEach(function(t){var a=e.form.options.find(function(e){return e.id===t.value});t.checked=!!a})},handleProductSelect:function(e){this.updateOperationProduct()},removeOption:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=this.formOriValue.options.find(function(e){return e.id===t.id}),!t.id||!a){e.next=10;break}return this.isUpdating=!0,e.next=5,this.$api.merchant.merchantRightTechConfigDelete({id:t.id});case 5:if(n=e.sent,this.isUpdating=!1,"200"===n.code){e.next=10;break}return this.$message.error(n.message),e.abrupt("return",!1);case 10:i=this.form.options.indexOf(t),-1!==i&&this.form.options.splice(i,1),this.updateOperationProduct();case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addOption:function(){this.form.options.length<this.operationProducts.length&&this.form.options.push({id:"",facilitatorMerchantId:""})},onSubmit:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.isSubmitting=!0,e.$api.merchant.merchantRightTechConfigAdd(e.form.options).then(function(t){e.ifShowDialog=!1,e.isSubmitting=!1}).catch(function(t){e.isSubmitting=!1,e.$message.error(t.message)})})}}}),s=r,l=(a("a56d"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},dc90:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{visible:e.ifShowDialog,width:"50%",top:"5vh","max-height":"50%","custom-class":"merchantAccess_chooseProduct"},on:{"update:visible":function(t){e.ifShowDialog=t}}},[n("div",{staticStyle:{"font-size":"18px",color:"#333"},attrs:{slot:"title"},slot:"title"},[e._v("选择产品")]),e._v(" "),n("div",{attrs:{slot:"default"},slot:"default"},[n("el-form",{ref:"queryCondition",attrs:{model:e.queryCondition,rules:e.queryProductRules}},[n("el-row",[n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{maxlength:"19","show-word-limit":"",placeholder:"产品编号",clearable:""},model:{value:e.queryCondition.code,callback:function(t){e.$set(e.queryCondition,"code",t)},expression:"queryCondition.code"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{prop:"type"}},[n("el-select",{attrs:{placeholder:"产品类型",clearable:""},model:{value:e.queryCondition.type,callback:function(t){e.$set(e.queryCondition,"type",t)},expression:"queryCondition.type"}},e._l(e.$settings.product.types,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{attrs:{placeholder:"产品名称",clearable:""},model:{value:e.queryCondition.name,callback:function(t){e.$set(e.queryCondition,"name",t)},expression:"queryCondition.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{loading:e.isSearching},on:{click:e.queryProductList}},[e._v("查 询")]),e._v(" "),n("el-button",{staticClass:"btn_refreshProductList",on:{click:e.refreshProductList}},[n("img",{attrs:{src:a("1576"),alt:"刷新 API 列表"}})])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingAllProductList,expression:"loadingAllProductList"}],staticStyle:{width:"100%"},attrs:{data:e.allProductList,"header-cell-style":{background:"#f5f5f5",color:"#333"},"cell-style":{padding:"10px 0"}}},[n("el-table-column",{attrs:{prop:"code",label:"产品编号","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("product/detail")?n("router-link",{attrs:{to:{path:"/manage/detail",query:{code:t.row.code}}}},[e._v(e._s(t.row.code))]):n("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"产品类型","min-width":"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterProductType")(t.row.type)))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"产品名称","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.name}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"产品概述","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{attrs:{title:t.row.remark}},[e._v(e._s(t.row.remark))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"accessType",label:"请求方式","min-width":"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterProductAccessType")(t.row.accessType)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleChooseProduct(t.row)}}},[e._v("选 择")])]}}])})],1)],1)]),e._v(" "),n("ApplicationProductConfig",{attrs:{"if-show-config-dialog":e.ifShowApplicationProductConfigDialog,"current-selected-product":e.currentSelectedProduct,"merchant-info":e.merchantInfo,"get-merchant-info":e.getMerchantInfo},on:{"update:ifShowConfigDialog":function(t){e.ifShowApplicationProductConfigDialog=t},"update:if-show-config-dialog":function(t){e.ifShowApplicationProductConfigDialog=t}}}),e._v(" "),n("ServiceProductConfig",{attrs:{"if-show-config-dialog":e.ifShowServiceProductConfigDialog,"current-selected-product":e.currentSelectedProduct,"merchant-info":e.merchantInfo,"get-merchant-info":e.getMerchantInfo},on:{"update:ifShowConfigDialog":function(t){e.ifShowServiceProductConfigDialog=t},"update:if-show-config-dialog":function(t){e.ifShowServiceProductConfigDialog=t}}})],1)},i=[],o=(a("ac6a"),a("d5dc")),r=a("ce8f"),s={name:"ChooseProduct",components:{ApplicationProductConfig:o["default"],ServiceProductConfig:r["default"]},props:{merchantInfo:{type:Object,default:function(){return{}}},ifShowChooseDialog:{type:Boolean,default:!1},merchantResources:{type:Array,default:function(){return[]}},getMerchantInfo:{type:Function,default:function(){}}},data:function(){return{queryCondition:{code:"",type:"",name:""},queryProductRules:{code:[{validator:this.$validater.strNumber}]},loadingAllProductList:!1,allProductList:[],isSearching:!1,ifShowApplicationProductConfigDialog:!1,ifShowServiceProductConfigDialog:!1,currentSelectedProduct:{}}},computed:{ifShowDialog:{get:function(){return this.ifShowChooseDialog},set:function(e){this.$emit("update:ifShowChooseDialog",e)}}},watch:{ifShowDialog:function(e){e?this.getProductList():this.$refs["queryCondition"].resetFields()}},methods:{queryProductList:function(){this.isSearching=!0,this.getProductList()},refreshProductList:function(){this.resetQueryCondition(),this.getProductList()},resetQueryCondition:function(){this.$refs["queryCondition"].resetFields(),this.$refs["queryCondition"].clearValidate()},getProductList:function(){var e=this;this.loadingAllProductList=!0,this.$api.product.getEnableProduct(this.queryCondition).then(function(t){e.allProductList=e.filterProductList(t.data||[]),e.loadingAllProductList=!1,e.isSearching=!1})},filterProductList:function(e){var t=this.merchantResources?this.merchantResources:[],a=[];return t.forEach(function(e){a.push(e.functionCode)}),e.filter(function(e){return-1===a.indexOf(e.code)})},handleChooseProduct:function(e){var t=this;this.currentSelectedProduct=e,this.ifShowDialog=!1,setTimeout(function(){1===e.type?t.ifShowApplicationProductConfigDialog=!0:t.ifShowServiceProductConfigDialog=!0},400)}}},l=s,c=(a("bd35"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"2ec4c33f",null);t["default"]=u.exports},de0e:function(e,t,a){"use strict";var n=a("0552"),i=a.n(n);i.a},e1bd:function(e,t,a){},e268:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btmFixed",attrs:{id:"merchantEdit_index"}},[a("div",{staticClass:"section"},[a("div",{staticClass:"title"},[e._v("商户编码："+e._s(this.$route.query.merchantId))])]),e._v(" "),a("MerchantForm",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMerchantInfo,expression:"loadingMerchantInfo"}],attrs:{"if-merchant-edit":e.ifMerchantEdit,"default-merchant-info":e.merchantInfo,"if-show-cancel-btn":e.ifShowCancelBtn,"if-show-reset-btn":e.ifShowResetBtn,"if-show-save-btn":e.ifShowSaveBtn,"default-credit-code":e.defaultCreditCode,"default-admin-email":e.defaultAdminEmail}})],1)},i=[],o=a("00c2"),r=a("8492"),s={name:"Index",components:{MerchantForm:o["default"]},data:function(){return{ifMerchantEdit:!0,ifShowCancelBtn:!0,ifShowResetBtn:!1,ifShowSaveBtn:!1,loadingMerchantInfo:!1,defaultCreditCode:"",defaultAdminEmail:"",merchantInfo:{}}},beforeRouteEnter:function(e,t,a){a(function(t){return t.getMerchantInfo(e.query.merchantId)})},beforeRouteUpdate:function(e,t,a){this.getMerchantInfo(this.$route.query.merchantId).then(function(){a()})},methods:{setMerchantInfo:function(e){this.merchantInfo=this.formateInfo(e),this.defaultCreditCode=this.merchantInfo.creditCode,this.defaultAdminEmail=this.merchantInfo.adminEmail,this.loadingMerchantInfo=!1},getMerchantInfo:function(e){var t=this;return this.loadingMerchantInfo=!0,Object(r["getMerchantById"])(e).then(function(e){t.setMerchantInfo(e.data[0].merchant[0])})},formateInfo:function(e){var t=JSON.parse(JSON.stringify(e));return t}}},l=s,c=(a("83d7"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"5a789534",null);t["default"]=u.exports},e295:function(e,t,a){},e2e1:function(e,t,a){},e30f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m"},[a("el-form",{ref:"queryCondition",staticClass:"queryCondition section",attrs:{model:e.queryCondition,rules:e.merchantRightQueryRules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户名称",prop:"name","label-width":"70px"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"50","show-word-limit":""},model:{value:e.queryCondition.name,callback:function(t){e.$set(e.queryCondition,"name",t)},expression:"queryCondition.name"}})],1)],1),e._v(" "),a("ProductTypeCodeSelect",{attrs:{type:e.queryCondition.productType,code:e.queryCondition.functionCode},on:{"update:type":function(t){return e.$set(e.queryCondition,"productType",t)},"update:code":function(t){return e.$set(e.queryCondition,"functionCode",t)}}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核状态",prop:"state","label-width":"70px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryCondition.state,callback:function(t){e.$set(e.queryCondition,"state",t)},expression:"queryCondition.state"}},e._l(e.$settings.merchant.merchantRightAuditStates,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"使用状态",prop:"enabled"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryCondition.enabled,callback:function(t){e.$set(e.queryCondition,"enabled",t)},expression:"queryCondition.enabled"}},[a("el-option",{attrs:{label:"启用",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"false"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建时间",prop:"beginTime"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.resourceCreatedTime,callback:function(t){e.resourceCreatedTime=t},expression:"resourceCreatedTime"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"queryBtn",staticStyle:{"text-align":"right"},attrs:{size:"large"}},[a("el-button",{on:{click:function(t){return e.resetForm("queryCondition")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{loading:e.isSearching,type:"primary"},on:{click:function(t){return e.searchMerchantRightInfo("queryCondition")}}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"merchantInfoTable section mb0"},[e.$api.buttonAuth("merchantRight/enable")||e.$api.buttonAuth("merchantRight/disable")?a("EnableBtnGrp",{attrs:{"show-enable-btn":e.$api.buttonAuth("merchantRight/enable"),"show-disable-btn":e.$api.buttonAuth("merchantRight/disable"),count:e.multipleSelection.length},on:{onEnable:e.batchEnabled,onDisable:e.batchDisabled}}):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMerchantInfo,expression:"loadingMerchantInfo"}],staticStyle:{width:"100%"},attrs:{data:e.merchantInfo,"header-cell-style":{background:"#f5f5f5",color:"#333"},"cell-style":{padding:"10px 0"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","class-name":"selectionCol",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"工单编号","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchantRight/detail")?a("router-link",{attrs:{to:{path:"/apply/detail",query:{id:t.row.id}}}},[e._v(e._s(t.row.id))]):a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shortName",label:"商户简称","min-width":"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchant/detail")?a("router-link",{attrs:{to:{path:"/access/detail",query:{merchantId:t.row.merchantId}}}},[a("span",{attrs:{title:t.row.shortName}},[e._v(e._s(t.row.shortName))])]):a("span",{attrs:{title:t.row.shortName}},[e._v(e._s(t.row.shortName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"产品名称","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.productName}},[e._v(e._s(t.row.productName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"productType",label:"产品类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("filterProductType")(t.row.productType)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"source",label:"来源","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1===t.row.source?"商户":"运营"))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"enabled",label:"使用状态","min-width":"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.$app.getEnabledState(t.row.enabled))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"审核状态","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.$merchant.getMerchantRightAuditState(t.row.state))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createDatetime",label:"申请时间","min-width":"140px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchantRight/audit")&&1===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleMerchantRightAudit(t.row.id)}}},[e._v("审核")]):e._e(),e._v(" "),e.$api.buttonAuth("merchantRight/manage")&&2===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleManage(t.row)}}},[e._v("管理")]):e._e()]}}])})],1),e._v(" "),a("DataPagination",{attrs:{"pagination-data":e.paginationData},on:{"update:paginationData":function(t){e.paginationData=t},"update:pagination-data":function(t){e.paginationData=t},resetData:e.getMerchantRightInfo}})],1),e._v(" "),a("MerchantRightManage",{attrs:{"if-show-manage-dialog":e.ifShowManageDialog,"current-merchant-right":e.currentMerchantRight},on:{"update:ifShowManageDialog":function(t){e.ifShowManageDialog=t},"update:if-show-manage-dialog":function(t){e.ifShowManageDialog=t},onRefreshData:e.getMerchantRightInfo}})],1)},i=[],o=(a("ac6a"),a("db72")),r=a("4360"),s=a("687e"),l={name:"ApplyIndex",components:{MerchantRightManage:s["default"]},data:function(){return{paginationData:{pageIndex:1,pageSize:10,dataCount:0},loadingMerchantInfo:!1,queryCondition:{name:"",state:"",beginTime:"",endTime:"",enabled:"",productType:"",functionCode:"",userId:r["a"].getters.userId},merchantRightQueryRules:{},merchantInfo:[],multipleSelection:[],isSearching:!1,currentMerchantRight:{},ifShowManageDialog:!1,ifShowTechConfigDialog:!1}},computed:{resourceCreatedTime:{get:function(){return[this.queryCondition.beginTime,this.queryCondition.endTime]},set:function(e){this.queryCondition.beginTime=e?e[0]:"",this.queryCondition.endTime=e?e[1]:""}}},beforeRouteEnter:function(e,t,a){a(function(e){return e.getMerchantRightInfo()})},beforeRouteUpdate:function(e,t,a){this.getMerchantRightInfo().then(function(){a()})},mounted:function(){var e=this.$session.getQueryConditions();e&&(this.queryCondition=e)},methods:{setMerchantRightInfo:function(e){this.merchantInfo=e.data,this.paginationData.dataCount=e.count,this.loadingMerchantInfo=!1},getMerchantRightInfo:function(){var e=this;return this.loadingMerchantInfo=!0,this.$api.merchant.getMerchantRight(Object(o["a"])({},this.paginationData,{conditions:this.queryCondition})).then(function(t){e.setMerchantRightInfo(t)}).catch(function(t){e.$message.error(t.message)})},searchMerchantRightInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.isSearching=!0,t.getMerchantRightInfo().then(function(e){t.isSearching=!1}).catch(function(){t.isSearching=!1,t.loadingMerchantInfo=!1}),t.$session.setQueryConditions(t.queryCondition)})},resetForm:function(e){this.$refs[e].resetFields(),this.$refs[e].clearValidate(),this.queryCondition.productType="",this.queryCondition.functionCode=""},handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.multipleSelection=t},handleMerchantRightAudit:function(e){this.$router.push({path:"/apply/audit",query:{id:e}})},batchEnabled:function(){var e=this;this.$api.merchant.merchantRightEnable({updateById:this.userId,ids:this.multipleSelection}).then(function(t){e.getMerchantRightInfo()}).catch(function(t){e.$message.error(t.message)})},batchDisabled:function(){var e=this;this.$api.merchant.merchantRightDisable({updateById:this.userId,ids:this.multipleSelection}).then(function(t){e.getMerchantRightInfo()}).catch(function(t){e.$message.error(t.message)})},handleManage:function(e){console.log("[handleManage] data",e["coops"]),this.ifShowManageDialog=!0,this.currentMerchantRight=e},handleTechConfig:function(e){this.ifShowTechConfigDialog=!0,this.currentMerchantRight=e}}},c=l,u=(a("bd70"),a("4b6e"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"766c7493",null);t["default"]=d.exports},e562:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m"},[a("el-form",{ref:"queryCondition",staticClass:"queryCondition section querySec",attrs:{model:e.queryCondition,rules:e.merchantQueryRules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户名称",prop:"name","label-width":"70px"}},[a("el-input",{attrs:{maxlength:"50","show-word-limit":"",clearable:"",placeholder:"请输入"},model:{value:e.queryCondition.name,callback:function(t){e.$set(e.queryCondition,"name",t)},expression:"queryCondition.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商务联系人",prop:"businessPerson","label-width":"120px"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":"",clearable:"",placeholder:"请输入"},model:{value:e.queryCondition.businessPerson,callback:function(t){e.$set(e.queryCondition,"businessPerson",t)},expression:"queryCondition.businessPerson"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"使用状态",prop:"enabled","label-width":"120px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryCondition.enabled,callback:function(t){e.$set(e.queryCondition,"enabled",t)},expression:"queryCondition.enabled"}},[a("el-option",{attrs:{label:"启用",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"false"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核状态",prop:"state","label-width":"70px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.queryCondition.state,callback:function(t){e.$set(e.queryCondition,"state",t)},expression:"queryCondition.state"}},e._l(e.$settings.app.auditStates,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"推广BD",prop:"businessDeveloper","label-width":"120px"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":"",clearable:"",placeholder:"请输入"},model:{value:e.queryCondition.businessDeveloper,callback:function(t){e.$set(e.queryCondition,"businessDeveloper",t)},expression:"queryCondition.businessDeveloper"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建时间",prop:"beginTime","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.merchantCreatedTime,callback:function(t){e.merchantCreatedTime=t},expression:"merchantCreatedTime"}})],1)],1)],1),e._v(" "),a("el-row",{staticClass:"btnGrp"},[a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"queryBtn",attrs:{size:"large","label-width":"0"}},[e.$api.buttonAuth("merchant/add")?a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddMerchant}},[e._v("新增")]):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:20}},[a("el-form-item",{staticClass:"queryBtn",staticStyle:{"text-align":"right"},attrs:{size:"large"}},[a("el-button",{on:{click:function(t){return e.resetForm("queryCondition")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{loading:e.inQuering,type:"primary"},on:{click:function(t){return e.searchMerchantInfo("queryCondition")}}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"merchantInfoTable section mb0"},[e.$api.buttonAuth("merchant/enable")||e.$api.buttonAuth("merchant/disable")?a("EnableBtnGrp",{attrs:{"show-enable-btn":e.$api.buttonAuth("merchant/enable"),"show-disable-btn":e.$api.buttonAuth("merchant/disable"),count:e.multipleSelection.length},on:{onEnable:e.batchEnabled,onDisable:e.batchDisabled}}):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMerchantInfo,expression:" loadingMerchantInfo"}],staticStyle:{width:"100%"},attrs:{data:e.merchantInfo,"header-cell-style":{background:"#f5f5f5",color:"#333"},"cell-style":{padding:"10px 0"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:e.ifSelectable,"class-name":"selectionCol",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shortName",label:"商户简称","min-width":"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchant/detail")?a("router-link",{attrs:{to:{path:"/access/detail",query:{merchantId:t.row.id}}}},[a("span",{attrs:{title:t.row.shortName}},[e._v(e._s(t.row.shortName))])]):a("span",{attrs:{title:t.row.shortName}},[e._v(e._s(t.row.shortName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"账户余额（元）","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.balance?t.row.balance:0))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"businessPerson",label:"商务联系人","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.businessPerson}},[e._v(e._s(t.row.businessPerson))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"businessPersonPhone",label:"商务联系人电话","min-width":"130px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enabled",label:"使用状态","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.$app.getEnabledState(t.row.enabled))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"审核状态","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.$app.getAuditState(t.row.state))}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createUserName",label:"推广BD","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.createUserName}},[e._v(e._s(t.row.createUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createDatetime",label:"创建时间","min-width":"140px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"235"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$api.buttonAuth("merchant/edit")&&2!==t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEditMerchant(t.row.id)}}},[e._v("编辑")]):e._e(),e._v(" "),e.$api.buttonAuth("merchant/audit")&&2===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleMerchantAudit(t.row.id)}}},[e._v("审核")]):e._e(),e._v(" "),e.$api.buttonAuth("merchant/technologyConfig")&&3===t.row.state&&1===t.row.enabled?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleTecConfig(t.row.id,t.row.name,t.row.shortName)}}},[e._v("技术配置")]):e._e(),e._v(" "),e.$api.buttonAuth("merchant/charge")&&3===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleCharge(t.row)}}},[e._v("充值")]):e._e(),e._v(" "),e.$api.buttonAuth("merchant/statistic")?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleStatisticMerchant(t.row)}}},[e._v("数据统计")]):e._e(),e._v(" "),e.$api.buttonAuth("merchant/manage")&&3===t.row.state?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleManage(t.row)}}},[e._v("管理")]):e._e()]}}])})],1),e._v(" "),a("DataPagination",{attrs:{"pagination-data":e.paginationData},on:{"update:paginationData":function(t){e.paginationData=t},"update:pagination-data":function(t){e.paginationData=t},resetData:e.getMerchantInfo}})],1),e._v(" "),a("MerchantCharge",{attrs:{"if-show-charge-dialog":e.ifShowChargeDialog,"current-merchat-info":e.currentMerchatInfo},on:{"update:ifShowChargeDialog":function(t){e.ifShowChargeDialog=t},"update:if-show-charge-dialog":function(t){e.ifShowChargeDialog=t},"update:currentMerchatInfo":function(t){e.currentMerchatInfo=t},"update:current-merchat-info":function(t){e.currentMerchatInfo=t},getMerchantInfo:e.getMerchantInfo}}),e._v(" "),a("MerchantManage",{attrs:{"if-show-manage-dialog":e.ifShowManageDialog,"current-merchat-id":e.currentMerchatInfo.id},on:{"update:ifShowManageDialog":function(t){e.ifShowManageDialog=t},"update:if-show-manage-dialog":function(t){e.ifShowManageDialog=t},"update:currentMerchatId":function(t){return e.$set(e.currentMerchatInfo,"id",t)},"update:current-merchat-id":function(t){return e.$set(e.currentMerchatInfo,"id",t)},callBack:e.getMerchantInfo}})],1)},i=[],o=(a("ac6a"),a("db72")),r=a("4360"),s=a("2f62"),l=a("6823"),c=a("f5ed"),u={name:"MerchantAccessIndex",components:{MerchantCharge:l["default"],MerchantManage:c["default"]},data:function(){return{paginationData:{pageIndex:1,pageSize:10,dataCount:0},loadingMerchantInfo:!1,queryCondition:{name:"",businessPerson:"",businessDeveloper:"",state:"",enabled:"",userId:r["a"].getters.userId,beginTime:"",endTime:""},merchantQueryRules:{},merchantInfo:[],multipleSelection:[],currentMerchatInfo:{},inQuering:!1,ifShowChargeDialog:!1,ifShowManageDialog:!1}},computed:Object(o["a"])({},Object(s["b"])(["userId"]),{merchantCreatedTime:{get:function(){return[this.queryCondition.beginTime,this.queryCondition.endTime]},set:function(e){this.queryCondition.beginTime=e?e[0]:"",this.queryCondition.endTime=e?e[1]:""}}}),mounted:function(){var e=this.$session.getQueryConditions();e&&(this.queryCondition=e),this.getMerchantInfo()},methods:{ifSelectable:function(e,t){return 3===e.state},setMerchantInfo:function(e){this.merchantInfo=e.data,this.paginationData.dataCount=e.count,this.loadingMerchantInfo=!1},getMerchantInfo:function(){var e=this;return this.loadingMerchantInfo=!0,this.$api.merchant.getMerchant(Object(o["a"])({},this.paginationData,{conditions:this.queryCondition})).then(function(t){e.inQuering=!1,e.setMerchantInfo(t)}).catch(function(t){e.inQuering=!1,e.$message.error(t.message)})},searchMerchantInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.inQuering=!0,t.getMerchantInfo(),t.$session.setQueryConditions(t.queryCondition)})},resetForm:function(e){this.$refs[e].resetFields(),this.$refs[e].clearValidate()},handleAddMerchant:function(){this.$router.push({path:"/access/add"})},handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.multipleSelection=t},handleEditMerchant:function(e){this.$router.push({path:"/access/edit",query:{merchantId:e}})},handleMerchantAudit:function(e){this.$router.push({path:"/access/audit",query:{merchantId:e}})},handleTecConfig:function(e,t,a){this.$router.push({path:"/access/technologyConfig",query:{merchantId:e,name:t,shortName:a}})},batchEnabled:function(){var e=this;this.$api.merchant.merchantEnable({updateById:this.userId,ids:this.multipleSelection}).then(function(t){e.getMerchantInfo()}).catch(function(t){e.$message.error(t.message)})},batchDisabled:function(){var e=this;this.$api.merchant.merchantDisable({updateById:this.userId,ids:this.multipleSelection}).then(function(t){e.getMerchantInfo()}).catch(function(t){e.$message.error(t.message)})},handleCharge:function(e){this.ifShowChargeDialog=!0,this.currentMerchatInfo=e},handleManage:function(e){this.ifShowManageDialog=!0,this.currentMerchatInfo=e},handleStatisticMerchant:function(e){var t=e.id,a=e.shortName;this.$router.push({path:"/access/statistic",query:{merchantId:t,name:a}})}}},d=u,h=(a("245a"),a("2d87"),a("2877")),f=Object(h["a"])(d,n,i,!1,null,"2df4bef0",null);t["default"]=f.exports},ed8e:function(e,t,a){"use strict";var n=a("d158"),i=a.n(n);i.a},f14c:function(e,t,a){},f17e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statistic-page"},[a("div",{staticClass:"section"},[a("h4",{staticClass:"title"},[e._v("商户信息")]),e._v(" "),a("div",{staticClass:"basicInfo info"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户编码:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.$route.query.merchantId))])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"key"},[e._v("商户简称:")]),e._v(" "),a("span",{staticClass:"val"},[e._v(e._s(e.$route.query.name))])])],1)],1)]),e._v(" "),a("div",{staticClass:"section"},[a("h4",{staticClass:"title"},[e._v("数据报表")]),e._v(" "),a("div",{staticStyle:{padding:"30px 0 20px 30px"}},[a("DynamicForm",{attrs:{type:1,"is-editable":e.tableType,"submit-loading":e.searchLoading},on:{onHeader:e.onHeader,onSubmit:e.onSubmit,onReturnMonth:e.onReturn}}),e._v(" "),a("el-row",{staticStyle:{"margin-right":"30px","margin-top":"60px"}},[a("el-button",{staticClass:"export-button",staticStyle:{float:"right"},attrs:{loading:e.exportLoading,disabled:e.exportLoading||e.tableList.length<1},on:{click:e.onExport}},[e._v("导出")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tableHeader.length>0,expression:"tableHeader.length > 0"},{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}]},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tableHeader.length>0,expression:"tableHeader.length > 0"}],class:e.tableList.length>0?"no-data":"",staticStyle:{width:"auto",margin:"0 30px"},style:{"padding-bottom":e.tableHeader.length>0?"30px":"0px"},attrs:{border:!0,data:e.tableList,"cell-style":{padding:"10px 0","padding-left":"20px"},"header-cell-style":{background:"#f5f5f5",color:"#333","padding-left":"20px"}}},[a("el-table-column",{attrs:{prop:e.dateHeader["fieldName"],label:e.dateHeader["name"]},scopedSlots:e._u([{key:"default",fn:function(t){return[0===e.tableType&&e.expandFlag?a("span",{staticClass:"date-link",attrs:{title:t.row.date},on:{click:function(a){return e.onDate(t.row)}}},[e._v(e._s(t.row.date))]):a("span",{attrs:{title:t.row.date}},[e._v(e._s(t.row.date))])]}}])}),e._v(" "),e._l(e.otherHeader,function(t,n){return a("el-table-column",{key:n,attrs:{prop:t["fieldName"],label:t["name"]},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",{attrs:{title:n.row[t["fieldName"]]}},[e._v(e._s(n.row[t["fieldName"]]))])]}}],null,!0)})})],2),e._v(" "),a("DataPagination",{directives:[{name:"show",rawName:"v-show",value:e.tableHeader.length>0,expression:"tableHeader.length > 0"}],attrs:{"is-session":!1,"page-sizes":[20,40,60],"pagination-data":e.paginationData},on:{"update:paginationData":function(t){e.paginationData=t},"update:pagination-data":function(t){e.paginationData=t},resetData:e.onResetData}})],1)])])},i=[],o=(a("96cf"),a("3b8d")),r=(a("7f7f"),a("ac6a"),a("db72")),s=(a("c5f6"),a("2a06")),l={name:"MerchantStatistic",components:{DynamicForm:s["a"]},data:function(){return{paginationData:{pageIndex:1,pageSize:20,dataCount:0},condition:{},searchLoading:!1,tableLoading:!1,exportLoading:!1,month:"",headers:[],tableType:0,tableHeader:[],tableList:[],apiAddress:"",expandFlag:!0}},computed:{dateHeader:function(){return this.tableHeader.length>0?this.tableHeader[0]:{}},otherHeader:function(){return this.tableHeader.length>1?this.tableHeader.slice(1):[]}},mounted:function(){this.tableList=[]},methods:{formatDate:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,i=n<10?"0".concat(n):n;return"".concat(a,"-").concat(i)},setPaging:function(e){if(!e)return[];var t=this.paginationData,a=t.pageSize,n=t.pageIndex;if(e.length>a){var i=(Number(n)-1)*Number(a),o=i+Number(a);return e.slice(i,o)}return e},getDayStatistic:function(){var e=this;if(!this["apiAddress"])return{};this.tableLoading=!0;var t=this.condition,a=t.productCode,n=t.dimension,i=this.$route.query.merchantId,o=this.paginationData,r=o.pageSize,s=o.pageIndex;this.$api.product.getReporterList(this.apiAddress,{productCode:a,dimension:n,date:this.month,id:i,merchantId:i,pageSize:r,pageIndex:s}).then(function(t){var a=e.setPaging(t["data"]);e.tableHeader=e.headers||[],e.tableList=a||[],e.tableLoading=!1,e.paginationData["dataCount"]=t["count"]}).catch(function(t){e.tableLoading=!1,e.$message.error(t.message)})},getMonthStatistic:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this["apiAddress"])return{};this.tableLoading=!0,this.searchLoading=t;var a=this.$route.query.merchantId,n=this.paginationData,i=n.pageSize,o=n.pageIndex;this.$api.product.getReporterList(this.apiAddress,Object(r["a"])({},this.condition,{id:a,pageSize:i,pageIndex:o})).then(function(t){e.expandFlag=t["expandFlag"],e.paginationData["dataCount"]=t["count"];var a=e.setPaging(t["data"]);e.setMonthTable(a),e.tableLoading=!1,e.searchLoading=!1}).catch(function(t){e.tableLoading=!1,e.searchLoading=!1,e.$message.error(t.message)})},setMonthTable:function(e){var t=this;this.tableHeader=this.headers||[],this.tableList=[],e&&e.length>0&&(this.tableList=e.map(function(e){return e["date"]=e["date"]||e["statisticsDate"]||e["transTime"],e["date"]=t.expandFlag?t.formatDate(e["date"]):e["date"],e}))},onHeader:function(e){this.tableHeader=[],this.tableList=[],this.headers=e.map(function(e){return e["date"]=e["date"]||e["statisticsDate"]||e["transTime"],e})},onSubmit:function(e){this.condition=e,this.apiAddress=e["apiAddress"],delete this.condition["apiAddress"],this.resetPagination(),this.getMonthStatistic()},onReturn:function(){this.month="",this.tableType=0,this.resetPagination(),this.getMonthStatistic(!1)},onDate:function(e){this.tableType=1,this.month=e["date"],this.resetPagination(),this.getDayStatistic()},onExport:function(){var e=this;this.exportLoading=!0;var t=[],n=[],i={date:this.month,productCode:this.condition["productCode"]},s=this.$route.query.merchantId,l=0===this.tableType?this.condition:i;this.tableHeader.forEach(function(e){n.push(e.fieldName),t.push(e.name)}),Promise.all([a.e("chunk-016e524e"),a.e("chunk-58293907")]).then(a.bind(null,"4bf8d")).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.$api.product.getReporterList(e.apiAddress,Object(r["a"])({},l,{id:s})).then(function(a){i.export_json_to_excel({header:t,data:e.formatJson(n,a["data"]||[]),filename:"exportExcel",autoWidth:!0,bookType:"xlsx"}),e.exportLoading=!1}).catch(function(t){e.exportLoading=!1,e.$message.error(t.message)});case 1:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}())},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},resetPagination:function(){this.paginationData["pageIndex"]=1,this.paginationData["dataCount"]=0},onResetData:function(){1===this.tableType?this.getDayStatistic():this.getMonthStatistic()}}},c=l,u=(a("a35f"),a("2877")),d=Object(u["a"])(c,n,i,!1,null,"d0d7bfca",null);t["default"]=d.exports},f5ed:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"管理",visible:e.ifShowDialog,top:"5vh",width:"30%","custom-class":"merchantAccess-manageDialog"},on:{"update:visible":function(t){e.ifShowDialog=t}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoadingData,expression:"isLoadingData"}],ref:"form",attrs:{model:e.form,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"控量设置:",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.kongLiangSheZhi,callback:function(t){e.kongLiangSheZhi=t},expression:"kongLiangSheZhi"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:Number(e.kongLiangSheZhi),expression:"Number(kongLiangSheZhi)"}]},[e._l(e.form.nodes,function(t,n){return[a("div",{key:n,staticClass:"limit-sec"},[a("p",{staticClass:"lbl"},[e._v("\n            控量环节 "+e._s(n+1)+"\n            "),a("span",[e._v(e._s(e._f("filterLimitNode")(t.limitNode)))])]),e._v(" "),a("el-form-item",{attrs:{label:"控量状态:",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.state,callback:function(a){e.$set(t,"state",a)},expression:"item.state"}},[a("el-option",{attrs:{label:"开启",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"关闭",value:"0"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.state),expression:"Number(item.state)"}]},[a("el-form-item",{attrs:{label:"控量维度:",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.onDimensionChange(t)}},model:{value:t.limitDimension,callback:function(a){e.$set(t,"limitDimension",a)},expression:"item.limitDimension"}},[a("el-option",{attrs:{label:"无限制",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"人数",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"金额",value:"3"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1!==Number(t.limitDimension),expression:"Number(item.limitDimension) !== 1"}]},[a("el-form-item",{attrs:{label:"控量规模:",required:""}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"10","show-word-limit":"",clearable:""},on:{change:function(a){return e.onLimitSizeChange(t)}},model:{value:t.limitSize,callback:function(a){e.$set(t,"limitSize",a)},expression:"item.limitSize"}},[a("template",{slot:"append"},[e._v(e._s(2===Number(t.limitDimension)?"人":"元"))])],2),e._v(" "),a("p",{staticClass:"errMsg",attrs:{id:"limitDimension_"+t.limitNode}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有效时间:",required:""}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"~",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始时间","end-placeholder":"结束时间","default-time":[e.curDateHMS,"23:59:59"]},on:{change:function(a){return e.onSelectedTimeChange(t)}},model:{value:t.selectedTime,callback:function(a){e.$set(t,"selectedTime",a)},expression:"item.selectedTime"}}),e._v(" "),a("p",{staticClass:"errMsg",attrs:{id:"selectedTime_"+t.limitNode}})],1)],1)],1)],1)]})],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{loading:e.isSubmitting,type:"primary",disabled:e.isSubmitDisable},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)},i=[],o=(a("3b2b"),a("a481"),a("6b54"),a("ac6a"),a("c5f6"),a("c345")),r={name:"MerchantManage",filters:{filterLimitNode:function(e){var t;switch(Number(e)){case 1:t="授信";break;case 2:t="借贷";break;default:t="";break}return t}},props:{ifShowManageDialog:{type:Boolean,default:!1},currentMerchatId:{type:String,default:""}},data:function(){return{isLoadingData:!1,isSubmitting:!1,kongLiangSheZhi:"0",orikongLiangSheZhi:"",oriForm:{},oriNodes:"",form:{nodes:JSON.parse(JSON.stringify(o["default"])),merchantId:"",userId:this.$store.getters.userId},passVaild:{},isSubmitDisable:!0}},computed:{ifShowDialog:{get:function(){return this.ifShowManageDialog},set:function(e){this.$emit("update:ifShowManageDialog",e)}},curDateHMS:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},watch:{ifShowDialog:function(e){var t=this;e?(this.form.nodes=JSON.parse(JSON.stringify(o["default"])),this.getLimitData()):(this.oriNodes="",this.passVaild={},this.form.nodes.forEach(function(e){t.setErrorMsg("limitDimension_"+e.limitNode,!1,""),t.setErrorMsg("selectedTime_"+e.limitNode,!1,"")}))},currentMerchatId:function(e){this.form.merchantId=e},kongLiangSheZhi:function(e){e!==this.orikongLiangSheZhi?this.isSubmitDisable=!1:this.resetForm()},form:{handler:function(e,t){this.isSubmitDisable=this.$lib.isObjEqual(e,this.oriForm)},deep:!0}},methods:{setLimitData:function(e){var t=this,a=e;a?(this.kongLiangSheZhi="1",this.orikongLiangSheZhi="1",this.oriNodes=JSON.parse(JSON.stringify(a))):(this.kongLiangSheZhi="0",this.orikongLiangSheZhi="0",a=JSON.parse(JSON.stringify(o["default"]))),a.forEach(function(e){t.form.nodes.forEach(function(t){Number(t.limitNode)===Number(e.limitNode)&&(t.limitDimension=e.limitDimension.toString(),t.limitSize=e.limitSize,e.startDatetime&&e.endDatetime&&(t.selectedTime=[new Date(e.startDatetime.replace(/-/g,"/")),new Date(e.endDatetime.replace(/-/g,"/"))]),t.state="1")})}),Number(this.kongLiangSheZhi)&&this.form.nodes.forEach(function(e){e.state="0",a.forEach(function(t){Number(e.limitNode)===Number(t.limitNode)&&(e.state="1")})}),this.oriForm=JSON.parse(JSON.stringify(this.form))},getLimitData:function(){var e=this;this.isLoadingData=!0,this.$api.merchant.getMerchantLimit(this.currentMerchatId).then(function(t){e.setLimitData(t.data),e.isLoadingData=!1}).catch(function(t){e.isLoadingData=!1,e.$message.error(t.message)})},setErrorMsg:function(e,t,a){document.getElementById(e).style.opacity=t?"1":"0",document.getElementById(e).innerHTML=a},onDimensionChange:function(e){e.limitSize=null,e.selectedTime="",e.startDatetime="",e.endDatetime=""},onLimitSizeChange:function(e){var t=e.limitSize,a="limitDimension_"+e.limitNode;this.passVaild[a]=!1,t?new RegExp(/[^\d]/g).test(t)?this.setErrorMsg(a,!0,"请输入正整数"):(this.setErrorMsg(a,!1,""),this.passVaild[a]=!0):this.setErrorMsg(a,!0,"请输入控量规模")},onSelectedTimeChange:function(e){var t=e.selectedTime,a="selectedTime_"+e.limitNode;this.passVaild[a]=!1,t?(this.setErrorMsg(a,!1,""),this.passVaild[a]=!0,e.startDatetime=this.$lib.formatDate(t[0].length>20?new Date(t[0]):new Date(t[0].replace(/-/g,"/"))),e.endDatetime=this.$lib.formatDate(t[1].length>20?new Date(t[1]):new Date(t[1].replace(/-/g,"/")))):this.setErrorMsg(a,!0,"请选择有效时间")},onSubmit:function(){var e=this,t=!0,a=JSON.parse(JSON.stringify(this.form)),n={};for(var i in a.nodes=a.nodes.filter(function(e){return Number(e.state)}),a.nodes.forEach(function(t,a){1===Number(t.limitDimension)?(t.limitSize="",t.selectedTime="",t.startDatetime="",t.endDatetime=""):(e.onLimitSizeChange(t),e.onSelectedTimeChange(t))}),a.nodes.forEach(function(t){if(1!==Number(t.limitDimension)){var a="limitDimension_"+t.limitNode,i="selectedTime_"+t.limitNode;n[a]=e.passVaild[a],n[i]=e.passVaild[i]}}),Number(this.kongLiangSheZhi)||(a.nodes=[],n={}),n)this.passVaild[i]||(t=!1);t&&(this.$api.merchant.submitMerchantLimit(a).then(function(t){e.isSubmitting=!1,e.ifShowDialog=!1,e.$emit("callBack")}).catch(function(t){e.isSubmitting=!1,e.$message.error(t.message)}),this.$emit("submitQuery",this.condition))},resetForm:function(){var e=this;this.setLimitData(this.oriNodes),this.form.nodes.forEach(function(t){e.setErrorMsg("limitDimension_"+t.limitNode,!1,""),e.setErrorMsg("selectedTime_"+t.limitNode,!1,"")})}}},s=r,l=(a("c5c0"),a("1973"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,"5bcdc8b2",null);t["default"]=c.exports},f607:function(e,t,a){},f682:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btmFixed"},[a("MerchantForm",{attrs:{"default-merchant-info":e.merchantInfo,"if-show-cancel-btn":e.ifShowCancelBtn,"if-show-reset-btn":e.ifShowResetBtn,"if-show-save-btn":e.ifShowSaveBtn,"is-child-merchant":e.isChildMerchant}})],1)},i=[],o=a("00c2"),r={name:"MerchantAccessAdd",components:{MerchantForm:o["default"]},data:function(){return{ifShowCancelBtn:!1,ifShowResetBtn:!0,ifShowSaveBtn:!0,isChildMerchant:!1,merchantInfo:{name:"",shortName:"",creditCode:"",registeredCapital:"",businessPeriodFrom:"",businessPeriodEnd:"",businessScope:"",publicCompany:"",registeredAddress:"",officeAddress:"",businessType:"",businessTypeChild:"",employeeSize:"",cooperationProduction:"",admin:"",adminPhone:"",adminEmail:"",businessPerson:"",businessPersonPhone:"",businessPersonEmail:"",businessDeveloper:"",createById:this.$store.getters.userId,legalPerson:"",legalPersonCardType:"",legalPersonCardId:"",bank:"",bankAccount:"",phone:"",websiteName:"",website:"",icp:"",serviceType:1,servicePhone:"",createDatetime:"",updateById:"",updateDatatime:""}}},mounted:function(){this.$route.query.parentId&&(this.merchantInfo.parentId=this.$route.query.parentId),this.isChildMerchant=Boolean(this.$route.query.isChildMerchant)}},s=r,l=a("2877"),c=Object(l["a"])(s,n,i,!1,null,"48dcad3a",null);t["default"]=c.exports},f7e5:function(e,t,a){}}]);