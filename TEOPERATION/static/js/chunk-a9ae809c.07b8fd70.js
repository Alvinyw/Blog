(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9ae809c","chunk-3b476a49","chunk-3b476a49","chunk-3b476a49","chunk-3b476a49"],{"0390":function(e,t,r){"use strict";var n=r("02f4")(!0);e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"28a5":function(e,t,r){"use strict";var n=r("aae3"),a=r("cb7c"),i=r("ebd6"),o=r("0390"),s=r("9def"),u=r("5f1b"),l=r("520a"),c=r("79e5"),d=Math.min,m=[].push,f="split",p="length",g="lastIndex",h=4294967295,b=!c(function(){RegExp(h,"y")});r("214f")("split",2,function(e,t,r,c){var v;return v="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[p]||2!="ab"[f](/(?:ab)*/)[p]||4!="."[f](/(.?)(.?)/)[p]||"."[f](/()()/)[p]>1||""[f](/.?/)[p]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!n(e))return r.call(a,e,t);var i,o,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,f=void 0===t?h:t>>>0,b=new RegExp(e.source,c+"g");while(i=l.call(b,a)){if(o=b[g],o>d&&(u.push(a.slice(d,i.index)),i[p]>1&&i.index<a[p]&&m.apply(u,i.slice(1)),s=i[0][p],d=o,u[p]>=f))break;b[g]===i.index&&b[g]++}return d===a[p]?!s&&b.test("")||u.push(""):u.push(a.slice(d)),u[p]>f?u.slice(0,f):u}:"0"[f](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var a=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,a,n):v.call(String(a),r,n)},function(e,t){var n=c(v,e,this,t,v!==r);if(n.done)return n.value;var l=a(e),m=String(this),f=i(l,RegExp),p=l.unicode,g=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(b?"y":"g"),y=new f(b?l:"^(?:"+l.source+")",g),x=void 0===t?h:t>>>0;if(0===x)return[];if(0===m.length)return null===u(y,m)?[m]:[];var k=0,w=0,$=[];while(w<m.length){y.lastIndex=b?w:0;var E,S=u(y,b?m:m.slice(w));if(null===S||(E=d(s(y.lastIndex+(b?0:w)),m.length))===k)w=o(m,w,p);else{if($.push(m.slice(k,w)),$.length===x)return $;for(var q=1;q<=S.length-1;q++)if($.push(S[q]),$.length===x)return $;w=k=E}}return $.push(m.slice(k)),$}]})},"4a4b":function(e,t,r){},c527:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,width:"30%",top:"5vh","custom-class":"ad-modal"},on:{"update:visible":function(t){e.visible=t}}},[r("div",{staticStyle:{"font-size":"18px",color:"#333"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.isAdd?"新增广告":"编辑广告"))]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"产品类型",prop:"productType"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择",disabled:!e.isAdd},on:{change:e.onChangeProductType},model:{value:e.form.productType,callback:function(t){e.$set(e.form,"productType",t)},expression:"form.productType"}},e._l(e.$settings.product.types,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"产品名称",prop:"productCode"}},[r("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.productAryLoading,expression:"productAryLoading"}],attrs:{clearable:"",placeholder:"请先选择产品类型",disabled:!e.isAdd},model:{value:e.form.productCode,callback:function(t){e.$set(e.form,"productCode",t)},expression:"form.productCode"}},e._l(e.productAry,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"广告名称",prop:"name",error:e.nameErrorMsg}},[r("el-input",{attrs:{maxlength:"20","show-word-limit":"",clearable:"",placeholder:"请输入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"跳转链接",prop:"url"}},[r("el-input",{attrs:{maxlength:"100","show-word-limit":"",clearable:"",placeholder:"请输入"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sequence",error:e.sequenceErrorMsg}},[r("el-input-number",{attrs:{"controls-position":"right",min:0,max:99,placeholder:"请输入"},on:{focus:function(){e.sequenceErrorMsg=""}},model:{value:e.form.sequence,callback:function(t){e.$set(e.form,"sequence",t)},expression:"form.sequence"}})],1),e._v(" "),r("el-form-item",{staticClass:"item_backgroundImageUrl",attrs:{label:"背景图",prop:"backgroundImageUrl"}},[r("ImageUpload",{attrs:{"image-url":e.form.backgroundImageUrl,text1:"上传背景图",text2:"请上传PNG/JPG格式，尺寸1920*640，小于1M的图片"},on:{"update:imageUrl":function(t){return e.$set(e.form,"backgroundImageUrl",t)},"update:image-url":function(t){return e.$set(e.form,"backgroundImageUrl",t)}}})],1),e._v(" "),r("el-form-item",{staticClass:"mb0",attrs:{label:"文案图",prop:"imageUrl"}},[r("ImageUpload",{attrs:{"image-url":e.form.imageUrl,type:["image/png"],text1:"上传文案图",text2:"请上传PNG格式，尺寸1920*640，小于500k的图片"},on:{"update:imageUrl":function(t){return e.$set(e.form,"imageUrl",t)},"update:image-url":function(t){return e.$set(e.form,"imageUrl",t)}}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.onReset}},[e._v("重 置")]),e._v(" "),r("el-button",{attrs:{type:"primary",disabled:e.isSubmitDisable,loading:e.isSubmitting},on:{click:e.onSubmit}},[e._v("提 交")])],1)],1)},a=[],i=(r("28a5"),r("96cf"),r("3b8d")),o={name:"AddOrEdit",props:{ifShowModel:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!0},currentFormData:{type:Object,default:function(){return{id:"",createById:"",updateById:"",productType:"",productCode:"",name:"",url:"",sequence:"",backgroundImageUrl:"",imageUrl:""}}}},data:function(){var e=function(e,t,r){t&&!/^(https?:)/.test(t)?r(new Error("输入的URL必须带协议头http/https")):r()};return{productAry:[],productAryLoading:!1,form:{},rules:{productType:[{required:!0,message:"请选择产品类型"}],productCode:[{required:!0,message:"请选择产品名称"}],name:[{required:!0,message:"请输入广告名称"}],url:[{validator:e,trigger:"blur"}],sequence:[{required:!0,message:"请输入排序"}],imageUrl:[{required:!0,message:"请上传文案图"}]},nameErrorMsg:"",sequenceErrorMsg:"",defaultFormData:{},isSubmitting:!1,isSubmitDisable:!0}},computed:{visible:{get:function(){return this.ifShowModel},set:function(e){this.$emit("update:ifShowModel",e)}}},watch:{visible:function(){this.$refs["form"]&&this.onReset()},currentFormData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object.assign({},t),!n.id){e.next=4;break}return e.next=4,this.$api.product.getProductTypeByBannerId(n.id).then(function(e){n.productType=e.data?e.data[0].productType:""}).catch(function(e){a.$message.error(e.message)});case 4:if(!n.productType){e.next=7;break}return e.next=7,this.onChangeProductType(n.productType);case 7:this.form=n,this.defaultFormData=JSON.parse(JSON.stringify(this.form));case 9:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),form:{handler:function(e,t){this.isSubmitDisable=this.$lib.isObjEqual(e,this.defaultFormData)},deep:!0},"form.name":function(){this.nameErrorMsg=""},"form.sequence":function(){this.sequenceErrorMsg=""},"form.imageUrl":function(e){e&&this.$refs["form"]&&this.$refs["form"].clearValidate("imageUrl")}},methods:{onChangeProductType:function(e){var t=this;this.productAry=[],this.form.productCode="",this.productAryLoading=!0,this.$api.product.getProductByType({type:e}).then(function(e){t.productAry=e.data,t.productAryLoading=!1})},onReset:function(){this.$refs["form"].resetFields(),this.form=JSON.parse(JSON.stringify(this.defaultFormData))},onSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.nameErrorMsg&&!this.sequenceErrorMsg){e.next=2;break}return e.abrupt("return",!1);case 2:this.$refs["form"].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}if(t.isSubmitting=!0,!t.isAdd){e.next=7;break}return e.next=5,t.$api.product.bannerAdd(t.form).then(function(){t.visible=!1,t.$emit("refreshData")}).catch(function(e){t.formateErrorMsg(e)});case 5:e.next=9;break;case 7:return e.next=9,t.$api.product.bannerEdit(t.form).then(function(){t.visible=!1,t.$emit("refreshData")}).catch(function(e){t.formateErrorMsg(e)});case 9:t.isSubmitting=!1,e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),formateErrorMsg:function(e){var t=e.message.split(",");t.length>1?(this.nameErrorMsg="null"!==t[0]?t[0]:"",this.sequenceErrorMsg="null"!==t[1]?t[1]:""):this.$message.error(e.message)}}},s=o,u=(r("e808"),r("2877")),l=Object(u["a"])(s,n,a,!1,null,null,null);t["default"]=l.exports},e808:function(e,t,r){"use strict";var n=r("4a4b"),a=r.n(n);a.a}}]);