(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fdebc88","chunk-5f1f601a","chunk-2e47ed28"],{"1e5c":function(e,t,r){},"1fb6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"customer-list section mb0"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"header-cell-style":{background:"#f5f5f5",color:"#333"}}},[r("el-table-column",{attrs:{prop:"customerId",label:"客户编码","min-width":"120","class-name":"code-column"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:{path:"/customer/detail",query:{customerId:t.row.customerId}}}},[e._v(e._s(t.row.customerId))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"registerMobile",label:"注册手机号","min-width":"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"客户名称","min-width":"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{attrs:{title:t.row.name}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"idNo",label:"身份证号","min-width":"145"}}),e._v(" "),r("el-table-column",{attrs:{prop:"merchantName",label:"所属商户","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{attrs:{title:t.row.merchantName}},[e._v(e._s(t.row.merchantName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"childMerchantName",label:"所属子商户","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{attrs:{title:t.row.childMerchantName}},[e._v(e._s(t.row.childMerchantName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"productName",label:"注册产品","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{attrs:{title:t.row.productName}},[e._v(e._s(t.row.productName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"createDatetime",label:"注册时间",width:"140"}})],1),e._v(" "),r("DataPagination",{attrs:{"pagination-data":e.page},on:{"update:paginationData":function(t){e.page=t},"update:pagination-data":function(t){e.page=t},resetData:function(t){return e.$emit("resetData")}}})],1)},a=[],i={name:"CustomerList",props:{list:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:function(){return!1}},paginationData:{type:Object,default:function(){return{pageIndex:1,pageSize:10,dataCount:0}}}},computed:{page:{get:function(){return this.paginationData},set:function(e){}}}},o=i,s=(r("bf61"),r("2877")),u=Object(s["a"])(o,n,a,!1,null,null,null);t["default"]=u.exports},"4f33":function(e,t,r){"use strict";var n=r("1e5c"),a=r.n(n);a.a},6891:function(e,t,r){"use strict";var n=r("68f6"),a=r.n(n);a.a},"68f6":function(e,t,r){},"6fa7":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"queryCondition",staticClass:"customer-form queryCondition",attrs:{"label-width":"100px",rules:e.rules,model:e.queryCondition}},[r("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},[r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"客户编码",prop:"code","label-width":"80px"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"19","show-word-limit":""},model:{value:e.queryCondition.code,callback:function(t){e.$set(e.queryCondition,"code",t)},expression:"queryCondition.code"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"注册手机号",prop:"phone",error:e.phoneNumberError}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"11","show-word-limit":""},on:{change:function(t){e.phoneNumberError=""}},model:{value:e.queryCondition.phone,callback:function(t){e.$set(e.queryCondition,"phone",t)},expression:"queryCondition.phone"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.queryCondition.name,callback:function(t){e.$set(e.queryCondition,"name",t)},expression:"queryCondition.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"身份证号",prop:"id","label-width":"80px",error:e.idNumberError}},[r("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:"20","show-word-limit":""},on:{change:function(t){e.idNumberError=""}},model:{value:e.queryCondition.id,callback:function(t){e.$set(e.queryCondition,"id",t)},expression:"queryCondition.id"}})],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"产品分类",prop:"productType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearchProduct},on:{change:e.getProduceList},model:{value:e.queryCondition.productType,callback:function(t){e.$set(e.queryCondition,"productType",t)},expression:"queryCondition.productType"}},e._l(e.$settings.product.types,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productCode",error:e.productNameError}},[r("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.isSearchProduct,expression:"isSearchProduct"}],staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请先选择产品类型",disabled:e.isSearchProduct},on:{change:function(t){e.productNameError=""}},model:{value:e.queryCondition.productCode,callback:function(t){e.$set(e.queryCondition,"productCode",t)},expression:"queryCondition.productCode"}},e._l(e.productNameList,function(e){return r("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"所属商户",prop:"merchantId","label-width":"80px"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择",disabled:e.isSearchMerchant},model:{value:e.queryCondition.merchantId,callback:function(t){e.$set(e.queryCondition,"merchantId",t)},expression:"queryCondition.merchantId"}},e._l(e.merchantList,function(e){return r("el-option",{key:e.id,attrs:{label:e.shortName,value:e.id}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{sm:12,md:8}},[r("el-form-item",{attrs:{label:"创建时间",prop:"beginTime"}},[r("el-date-picker",{attrs:{type:"daterange","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.createdTime,callback:function(t){e.createdTime=t},expression:"createdTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"queryBtn",staticStyle:{"text-align":"right"},attrs:{size:"large"}},[r("el-button",{on:{click:function(t){return e.resetForm("queryCondition")}}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.onSearch("queryCondition")}}},[e._v("查询")])],1)],1)],1)],1)},a=[],i=(r("c5f6"),r("96cf"),r("3b8d")),o={name:"CustomerForm",props:{loading:{type:Boolean,default:function(){return!1}}},data:function(){return{rules:{},queryCondition:{code:"",name:"",phone:"",id:"",merchantId:"",beginTime:"",endTime:"",productType:"",productCode:""},isSearchMerchant:!1,merchantList:[],isSearchProduct:!1,productNameList:[],productNameError:"",phoneNumberError:"",idNumberError:""}},computed:{createdTime:{get:function(){return[this.queryCondition.beginTime,this.queryCondition.endTime]},set:function(e){this.queryCondition.beginTime=e?e[0]:"",this.queryCondition.endTime=e?e[1]:""}}},mounted:function(){this.fetchData()},methods:{validatePhoneNumber:function(e){return!e||/^[1][34578]\d{9}$/.test(e)&&/^[1-9]\d*$/.test(e)&&11===e.length?(this.phoneNumberError="",!0):(this.phoneNumberError="手机号码不符合规范",!1)},validateIdNo:function(e){return e&&(!/\d{17}[\d|x]|\d{15}/.test(e)||15!==e.length&&18!==e.length)?(this.idNumberError="身份证号码不符合规范",!1):(this.idNumberError="",!0)},fetchData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getMerchantList(),t=this.$session.getQueryConditions(),t&&(this.queryCondition=t,r=t.productType,n=t.productCode,r&&(this.getProduceList(r),this.queryCondition.productCode=n));case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getMerchantList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isSearchMerchant=!0,e.prev=1,e.next=4,this.$api.merchant.getAllMerchant();case 4:t=e.sent,this.isSearchMerchant=!1,200===Number(t["code"])?this.merchantList=t["data"]||[]:this.$message.error(t["message"]),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.isSearchMerchant=!1,this.$message.error(e.t0["message"]);case 13:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}(),getProduceList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.queryCondition.productCode="",this.isSearchProduct=!0,e.next=4,this.$api.product.getProductByType({type:t});case 4:r=e.sent,this.isSearchProduct=!1,200===Number(r["code"])?this.productNameList=r["data"]:this.$message.error(r["message"]);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(e){this.$refs[e].resetFields(),this.$refs[e].clearValidate()},onSearch:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("表单验证不合法"),!1;t.$emit("onSubmit",t.queryCondition)})}}},s=o,u=(r("4f33"),r("2877")),c=Object(u["a"])(s,n,a,!1,null,"2a364282",null);t["default"]=c.exports},"8d10":function(e,t,r){},bbe1:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m customer-index"},[r("CustomerForm",{staticClass:"section",attrs:{loading:e.isQuering},on:{onSubmit:e.onSearch}}),e._v(" "),r("CustomerList",{staticClass:"section",attrs:{list:e.customerList,loading:e.tableLoading,"pagination-data":e.paginationData},on:{"update:paginationData":function(t){e.paginationData=t},"update:pagination-data":function(t){e.paginationData=t},resetData:e.getCustomerList}})],1)},a=[],i=(r("c5f6"),r("7f7f"),r("96cf"),r("3b8d")),o=r("db72"),s=r("2f62"),u=r("6fa7"),c=r("1fb6"),l={name:"CustomerIndex",components:{CustomerForm:u["default"],CustomerList:c["default"]},data:function(){return{isQuering:!1,queryCondition:{code:"",name:"",id:"",merchantId:"",beginTime:"",endTime:"",productType:"",productCode:""},tableLoading:!1,customerList:[],paginationData:{pageIndex:1,pageSize:10,dataCount:0}}},computed:Object(o["a"])({},Object(s["b"])(["userId"])),mounted:function(){var e=this.$session.getQueryConditions();e&&(this.queryCondition=e),this.getCustomerList()},methods:{getCustomerList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,i,o,s,u,c,l,d,m,p,h,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isQuering=!0,this.tableLoading=!0,e.prev=2,r=this.paginationData,n=r.pageIndex,a=r.pageSize,i=this.queryCondition,o=i.code,s=i.name,u=i.phone,c=i.id,l=i.merchantId,d=i.beginTime,m=i.endTime,p=i.productCode,h=i.productType,e.next=7,this.$api.customer.getCustomerList({conditions:{customerId:o,customerName:s,idNo:c,phone:u,merchantId:l,beginTime:d,endTime:m,productCode:p,productType:h},pageIndex:n,pageSize:a,start:0});case 7:if(f=e.sent,this.isQuering=!1,this.tableLoading=!1,200===Number(f["code"])){e.next=13;break}return this.$message.error(f["message"]),e.abrupt("return",!1);case 13:this.customerList=f["data"]||[],this.paginationData.dataCount=f["count"],e.next=23;break;case 17:return e.prev=17,e.t0=e["catch"](2),this.isQuering=!1,this.tableLoading=!1,this.$message.error(e.t0["message"]),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,this,[[2,17]])}));function t(t){return e.apply(this,arguments)}return t}(),onSearch:function(e){this.queryCondition=e,this.paginationData.pageIndex=1,this.getCustomerList(),this.$session.setQueryConditions(e)}}},d=l,m=(r("6891"),r("2877")),p=Object(m["a"])(d,n,a,!1,null,"39753066",null);t["default"]=p.exports},bf61:function(e,t,r){"use strict";var n=r("8d10"),a=r.n(n);a.a}}]);