(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-234cfb75"],{1420:function(t,e,n){},"5aaa":function(t,e,n){"use strict";var a=n("1420"),r=n.n(a);r.a},"623d":function(t,e,n){(function(e,n){t.exports=n()})("undefined"!==typeof self&&self,function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=1)}([function(t,e,n){"use strict";var a;let r={showCanvasMarsk:!0};var i=function(t){t.preventDefault()};class s{constructor(t){this.el=t,this.canvas=document.getElementById(this.el),this.cxt=this.canvas.getContext("2d"),this.stage_info=this.canvas.getBoundingClientRect(),this.cxt.translate(.5,.5),this.cxt.imageSmoothingEnabled=!1,this.reset=!1}init(t){var e=this;this.canvas.addEventListener("touchstart",function(t){document.addEventListener("touchstart",i,!1),r["showCanvasMarsk"]&&(r["showCanvasMarsk"]=!1),e.drawBegin(t)}),this.canvas.addEventListener("touchend",function(t){document.addEventListener("touchend",i,!1),e.drawEnd()}),this.clear(t)}drawBegin(t){window.console.log("fun--drawBegin");var e=this;window.getSelection()?window.getSelection().removeAllRanges():document.selection.empty(),this.cxt.lineWidth=3,this.cxt.strokeStyle="#333",this.reset&&(this.cxt.beginPath(),this.reset=!1),this.cxt.moveTo(t.changedTouches[0].clientX-this.stage_info.left,t.changedTouches[0].clientY-this.stage_info.top),this.canvas.addEventListener("touchmove",function(){e.drawing(event)})}drawing(t){this.clear(),this.cxt.lineTo(t.changedTouches[0].clientX-this.stage_info.left,t.changedTouches[0].clientY-this.stage_info.top),this.cxt.stroke()}drawEnd(){window.console.log("fun--drawEnd"),document.removeEventListener("touchstart",i,!1),document.removeEventListener("touchend",i,!1),document.removeEventListener("touchmove",i,!1)}clear(t){this.cxt.clearRect(0,0,this.canvas.width,this.canvas.height)}save(){return window.console.log("fun--save"),this.canvas.toDataURL("image/png")}}e["a"]={name:"TestBb",props:{onSuccessBack:{type:Function,default(){return()=>{return!0}}}},data(){return{reSignText:"重签",confirmSignText:"确认签名",tipText:"我已阅读全部开户文件，了解相关风险并自愿开户",obj:r}},mounted(){this.obj["showCanvasMarsk"]=!0;const t=this,e=document.querySelectorAll("canvas[id='signatureCanvas']")[0],n=document.querySelectorAll("div[class='rt canvasMarsk']")[0];setTimeout(function(){t.setCanvasSize(e,n)},10),setTimeout(function(){a=new s("signatureCanvas"),a.init()},500)},methods:{setCanvasSize(t,e){window.devicePixelRatio?(console.log("setCanvasSize 1"),t.style.height=e.offsetHeight+"px",t.style.width=e.clientWidth+"px",t.height=e.offsetHeight*window.devicePixelRatio,t.width=e.clientWidth*window.devicePixelRatio,t.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio)):(console.log("setCanvasSize 2"),t.height=e.offsetHeight,t.width=e.clientWidth)},clear:function(t){a.reset||(console.log("clear",(new Date).getTime()),a.clear(),r["showCanvasMarsk"]=!0,a.reset=!0)},save(){if(console.log("save",(new Date).getTime()),r["showCanvasMarsk"])return;const t=a.save();this.imgRotate(t)},handleSuccess(t){sessionStorage.setItem("img_ElectronicSignature",t),console.log("img_ElectronicSignature",t),this.$emit("onSuccessBack",t)},imgRotate(t,e="left"){const n=this;var a,r,i=document.createElement("canvas"),s=0;i.getContext("2d")&&(a=i.getContext("2d"),r=new Image,r.src=t,r.onload=function(){"left"===e?s++:s--,a.clearRect(0,0,i.width,i.height),i.width=r.height,i.height=r.width;var t={x:Math.round(i.width/2),y:Math.round(i.height/2)};a.translate(t.x,t.y),a.rotate(-90*s*Math.PI/180),s%2!==0?a.translate(-t.y,-t.x):a.translate(-t.x,-t.y),a.drawImage(r,0,0),n.handleSuccess(i.toDataURL("image/png"))})}},computed:{idInfo(){return{form:{name:"张三"}}},line1(){return`请安下方图示 【橫向】手写个人【正楷签名】签名：${this.idInfo["form"]["name"]}`},line2(){return"注意：竖向签名或签名潦草均不能通过审核"}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(2);e["default"]=a["a"]},function(t,e,n){"use strict";var a=n(0),r=n(9),i=!1;function s(t){i||n(3)}var o=n(8),c=!1,u=s,l="data-v-f3ef6b12",d=null,f=o(a["a"],r["a"],c,u,l,d);f.options.__file="src/component/index.vue",e["a"]=f.exports},function(t,e,n){var a=n(4);"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(6)("5606315e",a,!1,{})},function(t,e,n){e=t.exports=n(5)(!1),e.push([t.i,"\n.signatureBox[data-v-f3ef6b12]{position:relative;width:100%;height:100%;box-sizing:border-box;overflow:hidden\n}\n.signatureBox .lt[data-v-f3ef6b12]{float:right;height:100%;display:flex;flex-direction:column\n}\n.signatureBox .lt button[data-v-f3ef6b12]{flex:auto;margin-bottom:20px;width:50px;color:#409eff;background:#ecf5ff;border:1px solid #409eff;outline:none\n}\n.signatureBox .lt button .write_rl[data-v-f3ef6b12]{width:16px;text-align:center;margin:0 auto;transform:rotate(180deg);transform-origin:center center\n}\n.signatureBox .lt button .write_rl span[data-v-f3ef6b12]{display:block;transform:rotate(90deg);transform-origin:center center;font-size:20px;font-weight:bold\n}\n.signatureBox .lt button[data-v-f3ef6b12]:first-child{color:#fff;background-color:#409eff;border-color:#409eff\n}\n.signatureBox .lt button[data-v-f3ef6b12]:last-child{margin-bottom:0\n}\n.signatureBox .md[data-v-f3ef6b12]{float:left;height:100%;display:flex;justify-content:center;align-items:center;padding-left:10px\n}\n.signatureBox .md .write_rl[data-v-f3ef6b12]{width:16px;transform:rotate(180deg);transform-origin:center center\n}\n.signatureBox .md .write_rl span[data-v-f3ef6b12]{display:block;transform:rotate(90deg);transform-origin:center center;color:#999;font-size:12px;line-height:1.2\n}\n.signatureBox .canvasMarsk[data-v-f3ef6b12]{position:absolute;top:0;left:0;width:260px;height:100%;display:flex;align-items:center;justify-content:center;background:#fff\n}\n.signatureBox .canvasMarsk .write_rl[data-v-f3ef6b12]{width:50px;margin-right:0;color:#999;font-size:50px;font-family:DINBold;text-align:center\n}\n.signatureBox .canvasMarsk .tips[data-v-f3ef6b12]{width:20px;color:#999;font-size:18px;position:absolute;left:20px\n}\n.signatureBox .canvasMarsk .tips span[data-v-f3ef6b12]{line-height:1.1\n}\n.signatureBox .canvasMarsk .tips[data-v-f3ef6b12]:last-child{left:50px\n}\n.signatureBox .canvasMarsk .write_rl[data-v-f3ef6b12],.signatureBox .canvasMarsk .tips[data-v-f3ef6b12]{transform:rotate(180deg);transform-origin:center center\n}\n.signatureBox .canvasMarsk .write_rl span[data-v-f3ef6b12],.signatureBox .canvasMarsk .tips span[data-v-f3ef6b12]{display:block;transform:rotate(90deg);transform-origin:center center\n}\n.signatureBox #signatureCanvas[data-v-f3ef6b12]{float:left;background:#fff;box-shadow:0px 0px 9px 0px rgba(0,0,0,0.04);border-radius:4px;cursor:default;position:relative;z-index:2\n}\n",""])},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"===typeof btoa){var i=a(r),s=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(s).concat([i]).join("\n")}return[n].join("\n")}function a(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+e;return"/*# "+n+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var a=n(e,t);return e[2]?"@media "+e[2]+"{"+a+"}":a}).join("")},e.i=function(t,n){"string"===typeof t&&(t=[[null,t,""]]);for(var a={},r=0;r<this.length;r++){var i=this[r][0];"number"===typeof i&&(a[i]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"===typeof s[0]&&a[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){var a="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r=n(7),i={},s=a&&(document.head||document.getElementsByTagName("head")[0]),o=null,c=0,u=!1,l=function(){},d=null,f="data-vue-ssr-id",h="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function v(t){for(var e=0;e<t.length;e++){var n=t[e],a=i[n.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](n.parts[r]);for(;r<n.parts.length;r++)a.parts.push(g(n.parts[r]));a.parts.length>n.parts.length&&(a.parts.length=n.parts.length)}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(g(n.parts[r]));i[n.id]={id:n.id,refs:1,parts:s}}}}function p(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function g(t){var e,n,a=document.querySelector("style["+f+'~="'+t.id+'"]');if(a){if(u)return l;a.parentNode.removeChild(a)}if(h){var r=c++;a=o||(o=p()),e=x.bind(null,a,r,!1),n=x.bind(null,a,r,!0)}else a=p(),e=w.bind(null,a),n=function(){a.parentNode.removeChild(a)};return e(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap)return;e(t=a)}else n()}}t.exports=function(t,e,n,a){u=n,d=a||{};var s=r(t,e);return v(s),function(e){for(var n=[],a=0;a<s.length;a++){var o=s[a],c=i[o.id];c.refs--,n.push(c)}e?(s=r(t,e),v(s)):s=[];for(a=0;a<n.length;a++){c=n[a];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function x(t,e,n,a){var r=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=m(e,r);else{var i=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function w(t,e){var n=e.css,a=e.media,r=e.sourceMap;if(a&&t.setAttribute("media",a),d.ssrId&&t.setAttribute(f,e.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},function(t,e){t.exports=function(t,e){for(var n=[],a={},r=0;r<e.length;r++){var i=e[r],s=i[0],o=i[1],c=i[2],u=i[3],l={id:t+":"+r,css:o,media:c,sourceMap:u};a[s]?a[s].parts.push(l):n.push(a[s]={id:s,parts:[l]})}return n}},function(t,e){t.exports=function(t,e,n,a,r,i){var s,o=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(s=t,o=t.default);var u,l="function"===typeof o?o.options:o;if(e&&(l.render=e.render,l.staticRenderFns=e.staticRenderFns,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId=r),i?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},l._ssrRegister=u):a&&(u=a),u){var d=l.functional,f=d?l.render:l.beforeCreate;d?(l._injectStyles=u,l.render=function(t,e){return u.call(e),f(t,e)}):l.beforeCreate=f?[].concat(f,u):[u]}return{esModule:s,exports:o,options:l}}},function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signatureBox"},[n("canvas",{style:t.obj["showCanvasMarsk"]?"background: transparent":"background: #fff",attrs:{id:"signatureCanvas"}},[t._v("Canvas画板")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.obj["showCanvasMarsk"],expression:"obj['showCanvasMarsk']"}],staticClass:"rt canvasMarsk"},[n("div",{staticClass:"write_rl"},t._l(t.idInfo["form"]["name"].split(""),function(e,a){return n("span",{key:a},[t._v("\n        "+t._s(e)+"\n      ")])}),0),t._v(" "),n("p",{staticClass:"tips"},t._l(t.line1.split(""),function(e,a){return n("span",{key:a},[t._v(t._s(e))])}),0),t._v(" "),n("p",{staticClass:"tips"},t._l(t.line2.split(""),function(e,a){return n("span",{key:a},[t._v(t._s(e))])}),0)]),t._v(" "),n("div",{staticClass:"md"},[n("div",{staticClass:"write_rl"},t._l(t.tipText.split(""),function(e,a){return n("span",{key:a},[t._v(t._s(e))])}),0)]),t._v(" "),n("div",{staticClass:"lt"},[n("button",{on:{click:t.save,touchstart:t.save}},[n("div",{staticClass:"write_rl"},t._l(t.confirmSignText.split(""),function(e,a){return n("span",{key:a},[t._v(t._s(e))])}),0)]),t._v(" "),n("button",{on:{click:t.clear,touchstart:t.clear}},[n("div",{staticClass:"write_rl"},t._l(t.reSignText.split(""),function(e,a){return n("span",{key:a},[t._v(t._s(e))])}),0)])])])},r=[];a._withStripped=!0;var i={render:a,staticRenderFns:r};e["a"]=i}])})},aa56:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"main"}},[n("div",{attrs:{id:"navBar"}},[t._v("电子签名")]),n("div",{staticClass:"signature-box",style:t.signatureStyle},[n("ElectronicSignature",{on:{onSuccessBack:t.handleSuccess}})],1)])},r=[],i=n("623d"),s=n.n(i),o={name:"Signature",components:{ElectronicSignature:s.a},data:function(){return{signatureStyle:""}},mounted:function(){var t=this;this.$nextTick(function(){var e=document.querySelectorAll("div[id='navBar']")[0],n=e.clientHeight,a=window.innerHeight,r=window.innerWidth,i=a-n;t.signatureStyle="height:"+i+"px;width:"+r+"px;top:"+n+"px"})},methods:{handleSuccess:function(t){alert(t)}}},c=o,u=(n("5aaa"),n("2877")),l=Object(u["a"])(c,a,r,!1,null,"141e2738",null);e["default"]=l.exports}}]);