!function(r){var l=!1;r(document).width()<768&&(l=!0),r("#pageNav li").each(function(n,t){r(this).click(function(){r("#pageNav li").removeClass("on"),r("#pageNav li").eq(n).addClass("on"),0==n?(r("#chouGongZuoPian").addClass("on").animate({opacity:1},300),r("#chouKeShi").removeClass("on").animate({opacity:-1},150)):(r("#chouGongZuoPian").removeClass("on").animate({opacity:-1},150),r("#chouKeShi").addClass("on").animate({opacity:1},300))})});var u,c,h,d,o,f=new Array,s=f.length,g=new Array,p=new Array,v=new Array,x=[],a=new Array,e=new Array;r.ajax({url:"../data-settings.xml",success:function(n){var t=r(n);m=t.find("gongZuoPian_ZhuanPan > rotateTime").text(),t.find("gongZuoPian_ZhuanPan > resultTitle").text(),Z=t.find("gongZuoPian_ZhuanPan > alertText").text(),i=t.find("gongZuoPian_ZhuanPan > fontSize").text(),t.find("gongZuoPian_ZhuanPan > colors > value").each(function(){S.push(r(this).text())}),u=t.find("xingZhengCun_ZhuanPan > rotateTime").text(),c=t.find("xingZhengCun_ZhuanPan > resultTitle").text(),h=t.find("xingZhengCun_ZhuanPan > alertText").text(),d=t.find("xingZhengCun_ZhuanPan > fontSize").text(),t.find("xingZhengCun_ZhuanPan > colors > value").each(function(){x.push(r(this).text())}),t.find("gongZuoPian").each(function(){var n=r(this).attr("name");f.push(n)}),r("#gongZuoPian").AddCanvasTurntable_withoutFunction({sectorText:f,rotateTime:m,colors:S,fontSize:i}),s=f.length,t.find("gongZuoPian").each(function(){var a=[];r(this).find("village > value").each(function(n,t){a.push(r(this).text())}),g.push(a)}),t.find("chouChaNeiRong > value").each(function(){p.push(r(this).attr("name")),v.push(r(this).find("link").text())}),t.find("keShi > name").each(function(){var n=r(this).text();a.push(n)}),t.find("keShi > colors > value").each(function(){var n=r(this).text();e.push(n)}),r("#keShi").AddCanvasTurntable({sectorText:a,alertText:t.find("keShi > alertText").text(),resultTitle:t.find("keShi > resultTitle").text(),rotateTime:t.find("keShi > rotateTime").text(),colors:e,fontSize:l?11:t.find("keShi > fontSize").text(),defaultSpacing:l?20:35})}});var m,Z,i,T=0,P=0,S=[],_=new Array;function C(n,t){for(var a=0;a<n.length;a++)if(n[a]==t)return!0;return!1}r("body").on("click","#gongZuoPian button.startBtn",function(){if(_.length<f.length){for(var n=0;-1<n;n++)if(e=0,i=f.length-1,P=Math.floor(Math.random()*(i-e+1)+e),!C(_,f[P])){o=2160*(T+1)-P*(360/s);break}t="rotate("+o+"deg)",(a=r("#gongZuoPian .canvas1")).css("-o-transform",t),a.css("-ms-transform",t),a.css("-moz-transform",t),a.css("-webkit-transform",t),a.css("transform",t),r(this).attr("disabled",!0),T++,setTimeout(function(){!function(n){var t=r("<div class='item item-"+T+"'></div>"),a=r("<p class='title'>第<span class='time'>"+T+"</span>次抽取的工作片为：<span class='name'>"+f[n]+"</span></p>");t.append(a);var e=r("<div class='clearfix'>"),i=r("<div id='village_"+T+"' class='village'><p class='lbl'>抽选行政村：</p></div>");e.append(i);var o=r("<div id='content_"+T+"' class='content'><p class='lbl'>抽选抽查内容：</p></div>");if(e.append(o),t.append(e),r("#gongZuoPian_result").append(t),_.push(f[n]),g[n].length<1){var s=r("<p class='alertText'><span class='name'>"+f[n]+"</span> 下没有行政村！</p>");r("#village_"+T).append(s)}else r("#village_"+T).AddCanvasTurntable({sectorText:g[n],alertText:h,resultTitle:c,rotateTime:u,fontSize:l?12:d,colors:x,defaultSpacing:l?20:25});r("#content_"+T).AddRandomSelection({defaultArray:p,defaultLinks:v,rollSpeed:70,rollTime:25,alertText:"所有抽查内容已全部被选中！",resultTitle:"当前已选中的抽查内容如下："})}(P),r("#gongZuoPian button.startBtn").removeAttr("disabled",!0)},1e3*m)}else alert(Z);var t,a,e,i})}(jQuery);