!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).jfm={})}(this,(function(e){"use strict";var n=function(){return(n=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},t=function(){};function a(e){if(/JiuFuMall/i.test(navigator.userAgent)){if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)window.WVJBCallbacks.push(e);else if(window.WVJBCallbacks=[e],/Android/i.test(window.navigator.userAgent))document.addEventListener("WebViewJavascriptBridgeReady",(function(){window.WVJBCallbacks.forEach((function(e){return e&&e(window.WebViewJavascriptBridge)}))}));else if(/iPhone|iPad|iPod/.test(window.navigator.userAgent)){var n=document.createElement("iframe");n.style.display="none",n.src="https://__bridge_loaded__",document.documentElement.appendChild(n),setTimeout((function(){document.documentElement.removeChild(n)}),0)}}}var o=function(e){var n=e.name,o=e.params,i=void 0===o?{}:o,r=e.success,s=void 0===r?t:r,c=e.error,u=void 0===c?t:c;a((function(e){e.callHandler(n,JSON.stringify(i),(function(e){var n=e?JSON.parse(e):{code:"999999",data:null,message:"未收到原生回调数据"};"000000"===n.code?s(n.data||{}):u(n)}))}))},i=function(e){var n=e.name,i=e.callback,r=void 0===i?t:i;a((function(e){e.registerHandler(n,(function(e,n){var t=e?JSON.parse(e):{};r(t,n)})),o({name:"addRegisterHandler",params:{name:n}})}))};i({name:"TriggerEvent",callback:function(e,n){var t=e.type,a=void 0===t?"":t,o=e.detail,i=new CustomEvent(a,{detail:void 0===o?{}:o,bubbles:!0,cancelable:!0}),r=document.dispatchEvent(i);n&&n(r?"passed":"cancelled")}});var r=o,s=function(e){return new Promise((function(t,a){o(n(n({},e),{success:t,error:a}))}))},c=i,u=function(e,n){document.addEventListener(e,n,!1),r({name:"on",params:{type:e}})},m=function(e,n){document.removeEventListener(e,n,!1),r({name:"off",params:{type:e}})},d=/JiuFuMall/i.test(navigator.userAgent);e.chooseAddress=function(){return s({name:"chooseAddress"})},e.chooseContact=function(){return s({name:"chooseContact"})},e.clearWebviewCache=function(){r({name:"clearWebviewCache"})},e.disablePullRefresh=function(){r({name:"disablePullRefresh"})},e.downloadFile=function(e){return s({name:"downloadFile",params:{url:e}})},e.enablePullRefresh=function(){r({name:"enablePullRefresh"})},e.faceRecognition=function(e){return s({name:"faceRecognition",params:{count:e.count||Math.floor(4*Math.random())+1,type:e.type,provider:e.provider,compressLevel:e.compressLevel||3,node:e.node}})},e.getAppDeviceInfo=function(){return s({name:"getAppDeviceInfo"})},e.getClipboard=function(){return s({name:"getClipboard"})},e.getGeoLocation=function(){return s({name:"getGeoLocation"})},e.getImage=function(e){return s({name:"getImage",params:{sourceType:e.sourceType||["album","camera"],count:e.count,compressLevel:e.compressLevel||3}})},e.getLocation=function(e){return s({name:"getLocation",params:e})},e.getPhoneContacts=function(){return s({name:"getPhoneContacts"})},e.getScreenShot=function(){return s({name:"getScreenShot"})},e.getStorage=function(e,n){return void 0===n&&(n="JFMCOMMON"),s({name:"getStorage",params:{key:e,business:n}})},e.getUserInfo=function(){return s({name:"getUserInfo"})},e.hideBackButton=function(){r({name:"hideBackButton"})},e.hideCloseButton=function(){r({name:"hideCloseButton"})},e.hideLoading=function(){r({name:"hideLoading"})},e.hideNavBar=function(){r({name:"hideNavBar"})},e.hideOptionMenu=function(){r({name:"hideOptionMenu"})},e.isJFM=d,e.makePhoneCall=function(e){r({name:"makePhoneCall",params:{phoneNumber:e}})},e.off=m,e.on=u,e.once=function(e,n){u(e,(function(t){n(t),m(e,n)}))},e.openAppStore=function(e){r({name:"openAppStore",params:{url:e}})},e.openChat=function(e){return s({name:"openChat",params:e})},e.openInBrowser=function(e){r({name:"openInBrowser",params:{url:e}})},e.openWeChat=function(){r({name:"openWeChat"})},e.payWithWeChat=function(e){return s({name:"payWithWeChat",params:e})},e.payWithalipay=function(e){return s({name:"payWithalipay",params:e})},e.playVideo=function(e){r({name:"playVideo",params:{url:e}})},e.popToRoot=function(){r({name:"popToRoot"})},e.popWindow=function(e,n){void 0===e&&(e=1),void 0===n&&(n={}),r({name:"popWindow",params:{index:e,data:n}})},e.previewImage=function(e){r({name:"previewImage",params:{urls:e}})},e.pushWindow=function(e,n){r({name:"pushWindow",params:{url:e,options:n}})},e.removeStorage=function(e,n){void 0===e&&(e=""),void 0===n&&(n="JFMCOMMON"),r({name:"removeStorage",params:{key:e,business:n}})},e.request=function(e,t){var a=n({method:"post",dataType:"json"},t);return s({name:"request",params:n({url:e},a)})},e.scanBankCard=function(e){return s({name:"scanBankCard",params:e})},e.scanIdCard=function(e){return s({name:"scanIdCard",params:e})},e.setBackButtonAction=function(e){c({name:"setBackButtonAction",callback:e})},e.setCityLocation=function(e){r({name:"setCityLocation",params:{name:e}})},e.setClipboard=function(e){void 0===e&&(e=""),r({name:"setClipboard",params:{content:e}})},e.setCloseButtonAction=function(e){c({name:"setCloseButtonAction",callback:e})},e.setLeftButtonStyle=function(e){void 0===e&&(e="black"),r({name:"setLeftButtonStyle",params:{color:e}})},e.setNavBarStyle=function(e){r({name:"setNavBarStyle",params:e})},e.setOptionMenu=function(e){r({name:"setOptionMenu",params:{menus:e}})},e.setOptionMenuAction=function(e){c({name:"setOptionMenuAction",callback:e})},e.setStatusBarStyle=function(e){void 0===e&&(e="DARK"),r({name:"setStatusBarStyle",params:{mode:e}})},e.setStorage=function(e,n,t){void 0===e&&(e=""),void 0===n&&(n=""),void 0===t&&(t="JFMCOMMON"),r({name:"setStorage",params:{key:e,value:n,business:t}})},e.setTitle=function(e){r({name:"setTitle",params:e})},e.share=function(e){return s({name:"share",params:e})},e.showActionSheet=function(e){return s({name:"showActionSheet",params:e})},e.showBackButton=function(){r({name:"showBackButton"})},e.showCloseButton=function(){r({name:"showCloseButton"})},e.showConfirm=function(e){return s({name:"showConfirm",params:e})},e.showDescLayer=function(e,n){r({name:"showDescLayer",params:{title:e,content:n}})},e.showLoading=function(e){r({name:"showLoading",params:{message:e}})},e.showNavBar=function(){r({name:"showNavBar"})},e.showToast=function(e){"string"==typeof e&&(e={message:e}),r({name:"showToast",params:e})},e.syncLoginInvalid=function(e){void 0===e&&(e=""),r({name:"syncLoginInvalid",params:{message:e}})},e.syncPullRefreshFinish=function(){r({name:"syncPullRefreshFinish"})},e.toMainTab=function(e,n){void 0===n&&(n={}),r({name:"toMainTab",params:{tab:e,params:n}})},e.trigger=function(e,n){r({name:"trigger",params:{type:e,detail:n}})},e.version="1.0.9",Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=jfm-sdk.min.js.map
